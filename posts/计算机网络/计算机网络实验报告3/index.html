<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>[计算机网络]实验报告3 - Nexuzzz0</title><meta name=Description content="Nexuzzz0's BLOG"><meta property="og:title" content="[计算机网络]实验报告3">
<meta property="og:description" content="静态路由 实验1：静态路由及默认路由基本配置 一、实验目的 掌握配置静态路由（指定接口）的方法 掌握配置静态路由（指定下一跳IP地址）的方法 掌握测试"><meta property="og:type" content="article"><meta property="og:url" content="https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A3/"><meta property="og:image" content="https://nexuzzz0.github.io/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-24T20:50:29+08:00"><meta property="article:modified_time" content="2024-01-24T20:50:29+08:00"><meta property="og:site_name" content="Nexuzzz0's BLOG"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://nexuzzz0.github.io/logo.png"><meta name=twitter:title content="[计算机网络]实验报告3"><meta name=twitter:description content="静态路由 实验1：静态路由及默认路由基本配置 一、实验目的 掌握配置静态路由（指定接口）的方法 掌握配置静态路由（指定下一跳IP地址）的方法 掌握测试"><meta name=application-name content="Nexuzzz0's BLOG"><meta name=apple-mobile-web-app-title content="Nexuzzz0's BLOG"><meta name=theme-color content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A3/><link rel=prev href=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2/><link rel=next href=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A4/><link rel=stylesheet href=/css/main.css><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/color.css><link rel=stylesheet href=/css/style.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/fontawesome-free/all.min.css><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/animate/animate.min.css><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"[计算机网络]实验报告3","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/nexuzzz0.github.io\/posts\/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C\/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A3\/"},"genre":"posts","keywords":"计算机网络","wordcount":20276,"url":"https:\/\/nexuzzz0.github.io\/posts\/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C\/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A3\/","datePublished":"2024-01-24T20:50:29+08:00","dateModified":"2024-01-24T20:50:29+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Nexuzzz0"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>function setTheme(e){document.body.setAttribute("theme",e),document.documentElement.style.setProperty("color-scheme",e==="light"?"light":"dark"),window.theme=e,window.isDark=window.theme!=="light"}function saveTheme(e){window.localStorage&&localStorage.setItem("theme",e)}function getMeta(e){const t=document.getElementsByTagName("meta");for(let n=0;n<t.length;n++)if(t[n].getAttribute("name")===e)return t[n];return""}if(window.localStorage&&localStorage.getItem("theme")){let e=localStorage.getItem("theme");e==="light"||e==="dark"||e==="black"?setTheme(e):setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}else"auto"==="light"||"auto"==="dark"||"auto"==="black"?(setTheme("auto"),saveTheme("auto")):(saveTheme("auto"),setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));let metaColors={light:"#f8f8f8",dark:"#252627",black:"#000000"};getMeta("theme-color").content=metaColors[document.body.getAttribute("theme")],window.switchThemeEventSet=new Set</script><div id=back-to-top></div><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=Nexuzzz0><span id=desktop-header-typeit class=typeit></span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw"></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i>
</span></span><a href=javascript:void(0); class="menu-item theme-select" title=切换主题><i class="fas fa-adjust fa-fw"></i>
<select class=color-theme-select id=theme-select-desktop title=切换主题><option value=light>浅色</option><option value=dark>深色</option><option value=black>黑色</option><option value=auto>跟随系统</option></select></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=Nexuzzz0><span id=mobile-header-typeit class=typeit></span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw"></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts/ title>文章</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/categories/ title>分类</a><a href=javascript:void(0); class="menu-item theme-select" title=切换主题>
<i class="fas fa-adjust fa-fw"></i>
<select class=color-theme-select id=theme-select-mobile title=切换主题><option value=light>浅色</option><option value=dark>深色</option><option value=black>黑色</option><option value=auto>跟随系统</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class="toc-content always-active" id=toc-content-auto><nav id=TableOfContents><ul><li><a href=#实验1静态路由及默认路由基本配置>实验1：静态路由及默认路由基本配置</a><ul><li><a href=#一实验目的>一、实验目的</a></li><li><a href=#二实验环境>二、实验环境</a></li><li><a href=#三实验内容>三、实验内容</a></li><li><a href=#四实验结果>四、实验结果</a></li><li><a href=#五讨论与分析>五、讨论与分析</a></li></ul></li><li><a href=#实验2浮动静态路由及负载均衡>实验2：浮动静态路由及负载均衡</a><ul><li><a href=#一实验目的-1>一、实验目的</a></li><li><a href=#二实验环境-1>二、实验环境</a></li><li><a href=#三实验内容-1>三、实验内容</a></li><li><a href=#四实验结果-1>四、实验结果</a></li><li><a href=#五讨论与分析-1>五、讨论与分析</a></li></ul></li></ul><ul><li><a href=#实验1rip-路由协议基本配置>实验1：RIP 路由协议基本配置</a><ul><li><a href=#一实验目的-2>一、实验目的</a></li><li><a href=#二实验环境-2>二、实验环境</a></li><li><a href=#三实验内容-2>三、实验内容</a></li><li><a href=#四实验结果-2>四、实验结果</a></li><li><a href=#五讨论与分析-2>五、讨论与分析</a></li></ul></li><li><a href=#实验2配置-ripv2-的认证><strong>实验2：配置 RIPv2 的认证</strong></a><ul><li><a href=#一实验目的-3><strong>一、实验目的</strong></a></li><li><a href=#二实验环境-3><strong>二、实验环境</strong></a></li><li><a href=#三实验内容-3><strong>三、实验内容</strong></a></li><li><a href=#四实验结果-3><strong>四、实验结果</strong></a></li><li><a href=#五讨论与分析-3><strong>五、讨论与分析</strong></a></li></ul></li><li><a href=#实验3rip-路由协议的汇总><strong>实验3：RIP 路由协议的汇总</strong></a><ul><li><a href=#一实验目的-4><strong>一、实验目的</strong></a></li><li><a href=#二实验环境-4><strong>二、实验环境</strong></a></li><li><a href=#三实验内容-4><strong>三、实验内容</strong></a></li><li><a href=#四实验结果-4><strong>四、实验结果</strong></a></li><li><a href=#五讨论与分析-4><strong>五、讨论与分析</strong></a></li></ul></li><li><a href=#实验4配置-rip-的版本兼容定时器及协议优先级><strong>实验4：配置 RIP 的版本兼容、定时器及协议优先级</strong></a><ul><li><a href=#一实验目的-5><strong>一、实验目的</strong></a></li><li><a href=#二实验环境-5><strong>二、实验环境</strong></a></li><li><a href=#三实验内容-5><strong>三、实验内容</strong></a></li><li><a href=#四实验结果-5><strong>四、实验结果</strong></a></li><li><a href=#五讨论与分析-5><strong>五、讨论与分析</strong></a></li></ul></li><li><a href=#实验5配置-rip-抑制接口及单播更新><strong>实验5：配置 RIP 抑制接口及单播更新</strong></a><ul><li><a href=#一实验目的-6><strong>一、实验目的</strong></a></li><li><a href=#二实验环境-6><strong>二、实验环境</strong></a></li><li><a href=#三实验内容-6><strong>三、实验内容</strong></a></li><li><a href=#四实验结果-6><strong>四、实验结果</strong></a></li><li><a href=#五讨论与分析-6><strong>五、讨论与分析</strong></a></li></ul></li><li><a href=#实验6rip-与不连续子网><strong>实验6：RIP 与不连续子网</strong></a><ul><li><a href=#一实验目的-7><strong>一、实验目的</strong></a></li><li><a href=#二实验环境-7><strong>二、实验环境</strong></a></li><li><a href=#三实验内容-7><strong>三、实验内容</strong></a></li><li><a href=#四实验结果-7><strong>四、实验结果</strong></a></li><li><a href=#五讨论与分析-7><strong>五、讨论与分析</strong></a></li></ul></li><li><a href=#实验7rip-的水平分割及触发更新><strong>实验7：RIP 的水平分割及触发更新</strong></a><ul><li><a href=#一实验目的-8><strong>一、实验目的</strong></a></li><li><a href=#二实验环境-8><strong>二、实验环境</strong></a></li><li><a href=#三实验内容-8><strong>三、实验内容</strong></a></li><li><a href=#四实验结果-8><strong>四、实验结果</strong></a></li><li><a href=#五讨论与分析-8><strong>五、讨论与分析</strong></a></li></ul></li><li><a href=#实验8配置-rip-路由附加度量值><strong>实验8：配置 RIP 路由附加度量值</strong></a><ul><li><a href=#一实验目的-9><strong>一、实验目的</strong></a></li><li><a href=#二实验环境-9><strong>二、实验环境</strong></a></li><li><a href=#三实验内容-9><strong>三、实验内容</strong></a></li><li><a href=#四实验结果-9><strong>四、实验结果</strong></a></li><li><a href=#五讨论与分析-9><strong>五、讨论与分析</strong></a></li></ul></li><li><a href=#实验9rip-的故障处理><strong>实验9：RIP 的故障处理</strong></a><ul><li><a href=#一实验目的-10><strong>一、实验目的</strong></a></li><li><a href=#二实验环境-10><strong>二、实验环境</strong></a></li><li><a href=#三实验内容-10><strong>三、实验内容</strong></a></li><li><a href=#四实验结果-10><strong>四、实验结果</strong></a></li><li><a href=#五讨论与分析-10><strong>五、讨论与分析</strong></a></li></ul></li><li><a href=#实验10rip-的路由引入><strong>实验10：RIP 的路由引入</strong></a><ul><li><a href=#一实验目的-11><strong>一、实验目的</strong></a></li><li><a href=#二实验环境-11><strong>二、实验环境</strong></a></li><li><a href=#三实验内容-11><strong>三、实验内容</strong></a></li><li><a href=#四实验结果-11><strong>四、实验结果</strong></a></li><li><a href=#五讨论与分析-11><strong>五、讨论与分析</strong></a></li></ul></li></ul></nav></div></div><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC","true")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">[计算机网络]实验报告3</h1><div class=post-meta><div class=post-meta-line><span class=post-author><span class="author fas fa-user-circle fa-fw"></span><a href=/ title=Author rel=author class=author>Nexuzzz0</a>
</span>&nbsp;<span class=post-category>收录于 </span>&nbsp;<span class=post-category>类别 <a href=/categories/%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/><i class="far fa-folder fa-fw"></i>实验报告</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2024-01-24>2024-01-24</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime=2024-01-24>2024-01-24</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 20276 字&nbsp;<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 41 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#实验1静态路由及默认路由基本配置>实验1：静态路由及默认路由基本配置</a><ul><li><a href=#一实验目的>一、实验目的</a></li><li><a href=#二实验环境>二、实验环境</a></li><li><a href=#三实验内容>三、实验内容</a></li><li><a href=#四实验结果>四、实验结果</a></li><li><a href=#五讨论与分析>五、讨论与分析</a></li></ul></li><li><a href=#实验2浮动静态路由及负载均衡>实验2：浮动静态路由及负载均衡</a><ul><li><a href=#一实验目的-1>一、实验目的</a></li><li><a href=#二实验环境-1>二、实验环境</a></li><li><a href=#三实验内容-1>三、实验内容</a></li><li><a href=#四实验结果-1>四、实验结果</a></li><li><a href=#五讨论与分析-1>五、讨论与分析</a></li></ul></li></ul><ul><li><a href=#实验1rip-路由协议基本配置>实验1：RIP 路由协议基本配置</a><ul><li><a href=#一实验目的-2>一、实验目的</a></li><li><a href=#二实验环境-2>二、实验环境</a></li><li><a href=#三实验内容-2>三、实验内容</a></li><li><a href=#四实验结果-2>四、实验结果</a></li><li><a href=#五讨论与分析-2>五、讨论与分析</a></li></ul></li><li><a href=#实验2配置-ripv2-的认证><strong>实验2：配置 RIPv2 的认证</strong></a><ul><li><a href=#一实验目的-3><strong>一、实验目的</strong></a></li><li><a href=#二实验环境-3><strong>二、实验环境</strong></a></li><li><a href=#三实验内容-3><strong>三、实验内容</strong></a></li><li><a href=#四实验结果-3><strong>四、实验结果</strong></a></li><li><a href=#五讨论与分析-3><strong>五、讨论与分析</strong></a></li></ul></li><li><a href=#实验3rip-路由协议的汇总><strong>实验3：RIP 路由协议的汇总</strong></a><ul><li><a href=#一实验目的-4><strong>一、实验目的</strong></a></li><li><a href=#二实验环境-4><strong>二、实验环境</strong></a></li><li><a href=#三实验内容-4><strong>三、实验内容</strong></a></li><li><a href=#四实验结果-4><strong>四、实验结果</strong></a></li><li><a href=#五讨论与分析-4><strong>五、讨论与分析</strong></a></li></ul></li><li><a href=#实验4配置-rip-的版本兼容定时器及协议优先级><strong>实验4：配置 RIP 的版本兼容、定时器及协议优先级</strong></a><ul><li><a href=#一实验目的-5><strong>一、实验目的</strong></a></li><li><a href=#二实验环境-5><strong>二、实验环境</strong></a></li><li><a href=#三实验内容-5><strong>三、实验内容</strong></a></li><li><a href=#四实验结果-5><strong>四、实验结果</strong></a></li><li><a href=#五讨论与分析-5><strong>五、讨论与分析</strong></a></li></ul></li><li><a href=#实验5配置-rip-抑制接口及单播更新><strong>实验5：配置 RIP 抑制接口及单播更新</strong></a><ul><li><a href=#一实验目的-6><strong>一、实验目的</strong></a></li><li><a href=#二实验环境-6><strong>二、实验环境</strong></a></li><li><a href=#三实验内容-6><strong>三、实验内容</strong></a></li><li><a href=#四实验结果-6><strong>四、实验结果</strong></a></li><li><a href=#五讨论与分析-6><strong>五、讨论与分析</strong></a></li></ul></li><li><a href=#实验6rip-与不连续子网><strong>实验6：RIP 与不连续子网</strong></a><ul><li><a href=#一实验目的-7><strong>一、实验目的</strong></a></li><li><a href=#二实验环境-7><strong>二、实验环境</strong></a></li><li><a href=#三实验内容-7><strong>三、实验内容</strong></a></li><li><a href=#四实验结果-7><strong>四、实验结果</strong></a></li><li><a href=#五讨论与分析-7><strong>五、讨论与分析</strong></a></li></ul></li><li><a href=#实验7rip-的水平分割及触发更新><strong>实验7：RIP 的水平分割及触发更新</strong></a><ul><li><a href=#一实验目的-8><strong>一、实验目的</strong></a></li><li><a href=#二实验环境-8><strong>二、实验环境</strong></a></li><li><a href=#三实验内容-8><strong>三、实验内容</strong></a></li><li><a href=#四实验结果-8><strong>四、实验结果</strong></a></li><li><a href=#五讨论与分析-8><strong>五、讨论与分析</strong></a></li></ul></li><li><a href=#实验8配置-rip-路由附加度量值><strong>实验8：配置 RIP 路由附加度量值</strong></a><ul><li><a href=#一实验目的-9><strong>一、实验目的</strong></a></li><li><a href=#二实验环境-9><strong>二、实验环境</strong></a></li><li><a href=#三实验内容-9><strong>三、实验内容</strong></a></li><li><a href=#四实验结果-9><strong>四、实验结果</strong></a></li><li><a href=#五讨论与分析-9><strong>五、讨论与分析</strong></a></li></ul></li><li><a href=#实验9rip-的故障处理><strong>实验9：RIP 的故障处理</strong></a><ul><li><a href=#一实验目的-10><strong>一、实验目的</strong></a></li><li><a href=#二实验环境-10><strong>二、实验环境</strong></a></li><li><a href=#三实验内容-10><strong>三、实验内容</strong></a></li><li><a href=#四实验结果-10><strong>四、实验结果</strong></a></li><li><a href=#五讨论与分析-10><strong>五、讨论与分析</strong></a></li></ul></li><li><a href=#实验10rip-的路由引入><strong>实验10：RIP 的路由引入</strong></a><ul><li><a href=#一实验目的-11><strong>一、实验目的</strong></a></li><li><a href=#二实验环境-11><strong>二、实验环境</strong></a></li><li><a href=#三实验内容-11><strong>三、实验内容</strong></a></li><li><a href=#四实验结果-11><strong>四、实验结果</strong></a></li><li><a href=#五讨论与分析-11><strong>五、讨论与分析</strong></a></li></ul></li></ul></nav></div></div><div class=content id=content><h1 id=静态路由 class=headerLink><a href=#%e9%9d%99%e6%80%81%e8%b7%af%e7%94%b1 class=header-mark></a>静态路由</h1><h2 id=实验1静态路由及默认路由基本配置 class=headerLink><a href=#%e5%ae%9e%e9%aa%8c1%e9%9d%99%e6%80%81%e8%b7%af%e7%94%b1%e5%8f%8a%e9%bb%98%e8%ae%a4%e8%b7%af%e7%94%b1%e5%9f%ba%e6%9c%ac%e9%85%8d%e7%bd%ae class=header-mark></a>实验1：静态路由及默认路由基本配置</h2><h3 id=一实验目的 class=headerLink><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84 class=header-mark></a>一、实验目的</h3><ul><li>掌握配置静态路由（指定接口）的方法</li><li>掌握配置静态路由（指定下一跳IP地址）的方法</li><li>掌握测试静态路由连通性的方法</li><li>掌握配置默认路由的方法</li><li>掌握测试默认路由的方法</li><li>掌握在简单网络中部署静态路由时的故障排除方法</li><li>掌握简单的网络优化方法</li></ul><h3 id=二实验环境 class=headerLink><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83 class=header-mark></a>二、实验环境</h3><p><strong>基础配置拓扑：</strong><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101191.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101191.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101191.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101191.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101191.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101191.png 2x" sizes=auto alt=image.png></a></figure><strong>实验编址：</strong></p><table><thead><tr><th>设备</th><th>接口</th><th>IP 地址</th><th>子网掩码</th><th>默认网关</th></tr></thead><tbody><tr><td>PC-1</td><td>Ethernet 0/0/1</td><td>192.168.10.10</td><td>255.255.255.0</td><td>192.168.10.1</td></tr><tr><td>R1(Router)</td><td>Ethernet 0/0/0</td><td>192.168.10.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>Serial 0/0/0</td><td>10.0.12.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>R2(Router)</td><td>Serial 0/0/1</td><td>10.0.12.2</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>Serial 0/0/0</td><td>10.0.23.2</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>R3(Router)</td><td>Serial 0/0/1</td><td>10.0.23.3</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>Ethernet 0/0/0</td><td>192.168.20.3</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>PC-2</td><td>Ethernet 0/0/1</td><td>192.168.20.20</td><td>255.255.255.0</td><td>192.168.20.3</td></tr></tbody></table><h3 id=三实验内容 class=headerLink><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9 class=header-mark></a>三、实验内容</h3><p>在由 3 台路由器所组成的简单网络中，R1 和 R3 各自连接着一台主机，现在要求能够实现 PC-1 和 PC-2 之间的正常通信，本实验将通过配置基本的静态路由和默认路由来实现</p><h3 id=四实验结果 class=headerLink><a href=#%e5%9b%9b%e5%ae%9e%e9%aa%8c%e7%bb%93%e6%9e%9c class=header-mark></a>四、实验结果</h3><ol><li>基本配置</li></ol><p>按照编址表进行端口配置（其他端口略）<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101181.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101181.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101181.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101181.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101181.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101181.png 2x" sizes=auto alt=image.png></a></figure>PC-1<code>ping</code>PC-2 测试连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101197.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101197.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101197.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101197.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101197.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101197.png 2x" sizes=auto alt=image.png></a></figure>发现无法连通
:::tips
<strong>分析原因</strong>：假设主机 PC-1 与 PC-2 之间如果能够正常连通，那么主机A将发送数据给其网关设备 R1；R1 收到后将根据数据包中的目的地址查看它的路由表，找到相应的目的网络的所在路由条目，并根据该条目中的下一跳和出接口信息将该数据转发给下一台路由器 R2；R2 采取同样的步骤将数据转发给 R3；最后 R3 也采取同样的步骤将数据转发给与自己直连的主机 PC-2；主机 PC-2 在收到数据后，与主机 PC-1 发送数据到 PC-2 的过程一样，再发送相应的回应消息给 PC-1
:::
查看 PC-1 与 R1 之间的连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101486.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101486.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101486.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101486.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101486.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101486.png 2x" sizes=auto alt=image.png></a></figure>主机与网关之间通信正常，检查 R1 上路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101162.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101162.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101162.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101162.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101162.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101162.png 2x" sizes=auto alt=image.png></a></figure>看到 R1 路由表上没有关于 PC-2 所在网段的信息，现查看 R2 和 R3路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101225.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101225.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101225.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101225.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101225.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101225.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101701.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101701.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101701.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101701.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101701.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101701.png 2x" sizes=auto alt=image.png></a></figure>发现 R2 上没有 PC-1 和 PC-2 所在网段信息，同理 R3 没有 PC-1 网段信息，验证初始情况下各路由器路由表上仅包括了与自身直接相连的网段的路由信息。
要实现 PC-1 和 PC-2 这两个不同网段之间的通信，可以通过配置静态路由来实现。</p><ol start=2><li>实现 PC-1 和 PC-2 之间的通信</li></ol><p>在 R1上配置目的网段为主机 PC-2 所在网段的静态路由，即目的 IP 地址为<code>192.168.20.0</code>，掩码为<code>255.255.255.0</code>。对于 R1 而言，要发送数据到 PC-2，则必须先发送给 R2，所以 R2 即为 R1 的下一跳路由器， R2 与R1 所在的直连链路上的物理接口的 IP 地址即为下一跳 IP 地址，即<code>10.0.12.2</code>。
<code>ip route-static 192.168.20.0 255.255.255.0 10.0.12.2</code>
配置完成查看 R1 路由表，可以看到 R1 路由表上出现 PC-2 网段的信息<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101795.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101795.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101795.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101795.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101795.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101795.png 2x" sizes=auto alt=image.png></a></figure>同理在 R2 上配置目标网段为 PC-2 的静态路由<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101786.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101786.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101786.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101786.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101786.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101786.png 2x" sizes=auto alt=image.png></a></figure>现 PC-1 ping PC-2，发现仍无法连通<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101813.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101813.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101813.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101813.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101813.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101813.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101737.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101737.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101737.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101737.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101737.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101737.png 2x" sizes=auto alt=image.png></a></figure>此时 PC-1 发送了 ICMP 请求消息，并没有收到任何回应消息。原因在于现在仅仅实现了 PC-1 能够通过路由将数据正常转发给 PC-2，而 PC-2 仍然无法发送数据给 PC-1，无法双向连通，所以同样需要在 R2 和 R3 的路由表上添加 PC-1 所在网段的路由信息。
在 R3 上配置目的网段为 PC-1 所在网段的静态路由，即目的IP地址为<code>192.168.10.0</code>，目的地址的掩码还可以直接使用掩码长度，即24来表示。对于R3而言，要发送数据到 PC-1，则必须先发送给 R2，所以 R3 与 R2 所在直连链路上的物理接口 S 0/0/1 为数据转发接口，也称为出接口，在配置中指定该接口即可。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101040.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101040.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101040.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101040.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101040.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101040.png 2x" sizes=auto alt=image.png></a></figure>R2 和 R3 配置完成后看三个路由器上的路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101224.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101224.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101224.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101224.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101224.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101224.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101209.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101209.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101209.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101209.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101209.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101209.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101235.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101235.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101235.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101235.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101235.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101235.png 2x" sizes=auto alt=image.png></a></figure>现在，每台路由器都有 PC-1 和 PC-2 所在网段的路由信息，再次 PC-1 ping PC-2<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101314.png title=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101314.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101314.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101314.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101314.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101314.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101314.png 2x" sizes=auto alt=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101314.png></a></figure></p><ol start=3><li>实现全网通信来增强网络的可靠性</li></ol><p>此时，PC-1 和 PC-2 能正常通信，假设此时网路故障，PC-1 侧的网管 发现与 PC-2 无法通信，先测试与 R1 之间的连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101369.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101369.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101369.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101369.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101369.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101369.png 2x" sizes=auto alt=image.png></a></figure>PC-1 与网关通信正常，再测试 PC-2 和网关 R3 之间的连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101477.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101477.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101477.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101477.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101477.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101477.png 2x" sizes=auto alt=image.png></a></figure>发现无法通信，这意味着网管无法通过 PC-1 登录到 R3 上进一步排除故障，因此有必要在 R1 的路由表中添加 R2 和 R3 间直连的路由信息，同样也应在 R3 的路由表中添加 R1 和 R2 间直连网段的路由信息，实现全网连通
配置完成后查看 R1 R2 R3 路由表，注意观察新增目录<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101687.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101687.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101687.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101687.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101687.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101687.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101743.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101743.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101743.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101743.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101743.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101743.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101733.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101733.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101733.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101733.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101733.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101733.png 2x" sizes=auto alt=image.png></a></figure>再次测试 PC-1 和 R3 间连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101040.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101040.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101040.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101040.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101040.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101040.png 2x" sizes=auto alt=image.png></a></figure>测试成功， PC-1 和 R3 能通信</p><ol start=4><li>使用默认路由实现简单的网络优化</li></ol><p>通过适当减少设备上的配置工作量，能够帮助网络管理员在进行故障排除时更轻松地定位故障，且相对较少的配置量也能减少在配置时出错的可能，另一方面，也能够相对减少对设备本身硬件的负担。
默认路由是一种特殊的静态路由，使用默认路由可以简化路由器上的配置。查看此时 R1 上的路由表。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101015.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101015.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101015.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101015.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101015.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101015.png 2x" sizes=auto alt=image.png></a></figure>此时 R1 上存在两条先前经过手动配置的静态路由条目，且她们的下一跳和出接口都一致，现在在 R1 上配置一条默认路由，即目标网段和掩码都为 0，表示任何网络，下一跳为 10.0.12.2，并删除此前配置的两条静态路由，查看 R1 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101094.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101094.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101094.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101094.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101094.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101094.png 2x" sizes=auto alt=image.png></a></figure>再次测试 PC-1 和 PC-2 之间的通信<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101230.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101230.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101230.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101230.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101230.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101230.png 2x" sizes=auto alt=image.png></a></figure>发现通信正常，证明使用默认路由不但能实现与静态路由同样的效果，而且还能减少配置量，在 R3 上进行同样配置<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101349.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101349.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101349.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101349.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101349.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101349.png 2x" sizes=auto alt=image.png></a></figure>再次测试 PC-1 和 PC-2间的通信<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101301.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101301.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101301.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101301.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101301.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101301.png 2x" sizes=auto alt=image.png></a></figure>通信正常</p><h3 id=五讨论与分析 class=headerLink><a href=#%e4%ba%94%e8%ae%a8%e8%ae%ba%e4%b8%8e%e5%88%86%e6%9e%90 class=header-mark></a>五、讨论与分析</h3><p><strong>思考</strong>
<strong>在静态路由的配置中，可以采取指定下一跳 IP 地址的方式，也可以采取指定出接口的方式，这两种方式存在什么区别？</strong></p><ul><li>如果网络拓扑相对稳定，下一跳设备的IP地址不太可能变化，并且需要更精确地控制流量的路径，那么指定下一跳IP地址可能更合适。</li><li>如果网络拓扑较为动态，下一跳设备的IP地址可能会经常变化，或者需要简化配置并且无需过多的路径控制，那么指定出接口可能更方便。</li></ul><p><strong>收获</strong></p><ul><li><strong>提高网络可靠性：</strong> 通过全网全通测试，能够及早发现并解决潜在网络问题，同时通过合理配置路由提高了网络的可靠性和稳定性。</li><li><strong>网络优化与简化：</strong> 使用默认路由简化了配置，特别是在大规模网络中。默认路由可以有效减少路由表大小，提高网络效率。</li></ul><h2 id=实验2浮动静态路由及负载均衡 class=headerLink><a href=#%e5%ae%9e%e9%aa%8c2%e6%b5%ae%e5%8a%a8%e9%9d%99%e6%80%81%e8%b7%af%e7%94%b1%e5%8f%8a%e8%b4%9f%e8%bd%bd%e5%9d%87%e8%a1%a1 class=header-mark></a>实验2：浮动静态路由及负载均衡</h2><h3 id=一实验目的-1 class=headerLink><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84-1 class=header-mark></a>一、实验目的</h3><ul><li>理解浮动静态路由的应用场景</li><li>掌握配置浮动静态路由的方法</li><li>掌握测试浮动静态路由的方法</li><li>掌握配置静态路由负载均衡的方法</li><li>掌握测试静态路由负载均衡的方法</li></ul><h3 id=二实验环境-1 class=headerLink><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83-1 class=header-mark></a>二、实验环境</h3><p><strong>基础配置拓扑：</strong><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101638.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101638.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101638.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101638.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101638.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101638.png 2x" sizes=auto alt=image.png></a></figure><strong>实验编址：</strong></p><table><thead><tr><th>设备</th><th>接口</th><th>IP 地址</th><th>子网掩码</th><th>默认网关</th></tr></thead><tbody><tr><td>PC-1</td><td>Ethernet 0/0/1</td><td>192.168.10.10</td><td>255.255.255.0</td><td>192.168.10.1</td></tr><tr><td>R1(Router)</td><td>GE 0/0/0</td><td>192.168.10.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>Serial 0/0/0</td><td>10.0.12.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>Serial 0/0/1</td><td>10.0.13.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>R2(Router)</td><td>Serial 0/0/0</td><td>10.0.12.2</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>Serial 0/0/1</td><td>10.0.23.2</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>R3(Router)</td><td>Serial 0/0/0</td><td>10.0.23.3</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>Serial 0/0/1</td><td>10.0.13.3</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>GE 0/0/0</td><td>192.168.20.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>PC-2</td><td>Ethernet 0/0/1</td><td>192.168.20.20</td><td>255.255.255.0</td><td>192.168.20.1</td></tr></tbody></table><h3 id=三实验内容-1 class=headerLink><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9-1 class=header-mark></a>三、实验内容</h3><p>R2 为某公司总部， R1 与 R3 是两个分部，主机 PC-1 与 PC-2 所在的网段分别模拟两个分部中的办公网络。现需要总部与各个分部、分部与分部之间都能够通信，且分部之间在通信时，之间的直连链路为主用链路，通过总部的链路为备用链路。本实验使用浮动静态路由实现需求，并再根据实际需求实现负载均衡来优化网络。</p><h3 id=四实验结果-1 class=headerLink><a href=#%e5%9b%9b%e5%ae%9e%e9%aa%8c%e7%bb%93%e6%9e%9c-1 class=header-mark></a>四、实验结果</h3><ol><li>基本配置</li></ol><p>根据实验编址表来进行相应配置，以 R2 为例，其余略<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101622.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101622.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101622.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101622.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101622.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101622.png 2x" sizes=auto alt=image.png></a></figure></p><ol start=2><li>实现两分部间、总部与两分部间的通信</li></ol><p>在 R1 上配置目标网段为 PC-2 所在网段的基本路由，在 R3 上配置目标网段为 PC-1 所在网段的 静态路由，在 R2 上配置目标网段分别为 PC-1 和 PC-2 所在网段的静态路由<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101676.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101676.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101676.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101676.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101676.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101676.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101804.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101804.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101804.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101804.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101804.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101804.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101761.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101761.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101761.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101761.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101761.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101761.png 2x" sizes=auto alt=image.png></a></figure>配置完场后查看 R1 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101873.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101873.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101873.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101873.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101873.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101873.png 2x" sizes=auto alt=image.png></a></figure>观察到 R1 路由表中存在以主机 PC-2所在网段为目标网段的路由条目，且下一条路由器为 R3
测试 PC-1 和 PC-2 连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101977.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101977.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101977.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101977.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101977.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101977.png 2x" sizes=auto alt=image.png></a></figure>通信正常，在 PC-1 上用<code>tracert</code>命令测试所经过的网关<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101053.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101053.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101053.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101053.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101053.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101053.png 2x" sizes=auto alt=image.png></a></figure>发现数据包经过 R1 和 R3 才到 PC-2
同样的，PC-2 数据包经过 R3 和 R1 到达 PC-1（过程相似略）
经过测试，总部路由器能正常访问两个分部主机 PC-1 和 PC-2</p><ol start=3><li>配置浮动静态路由实现路由备份</li></ol><p>通过上一步骤的配置，现在网络搭建已经初步完成。现需要实现当两分部间通信时，直连链路为主用链路，通过总部的链路为备用链路，即当主用链路发生故障时，可以使用备用链路保障两分部网络间的通信。这里使用浮动静态路由实现网络冗余。
在 R1 上配置静态路由，目的网段为主机 PC-2 所在网段，掩码为 24 位，下一跳为 R2，将路由优先级设置为 100（默认是 60），配置完成后查看路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101244.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101244.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101244.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101244.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101244.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101244.png 2x" sizes=auto alt=image.png></a></figure>发现路由表没变化，用<code>display ip routing-table protocol static</code>命令仅查看静态路由的路由信息<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101160.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101160.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101160.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101160.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101160.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101160.png 2x" sizes=auto alt=image.png></a></figure>观察到目标地址为 PC-2 所在网段的两条优先级为 100 和 60 的静态路由条目都已经存在。
现在 R1 上去往相同的目的网段存在有两条不同路由条目，首先会比较它们的优先级，优先级高的，即对应的优先级数值较小的路由条目将被选为主用路由。通过比较，优先级数值为 60 的条目优先级更高，将被 R1 使用，放入路由表中，状态为 Active ；而另一条路由状态则为 Inactive，作为备份，不会被放入路由表。只有当 Active 的路由条目失效时，优先级为100的路由条目才会被放入路由表。
在 R3 上做和 R1 同样的对称配置。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101165.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101165.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101165.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101165.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101165.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101165.png 2x" sizes=auto alt=image.png></a></figure>将 R1 S 0/0/1 端口关闭，验证使用备份备份链路，配置完成后查看静态路由的路由信息<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101376.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101376.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101376.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101376.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101376.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101376.png 2x" sizes=auto alt=image.png></a></figure>此时优先级为 100 的路由目录已经添加到路由表中<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101448.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101448.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101448.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101448.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101448.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101448.png 2x" sizes=auto alt=image.png></a></figure>现在优先级为 100 的条目为 Active 状态，优先级为 60 的条目为 Inactive 状态，测试 PC-1 和 PC-2 通信，同时查看通信所经过的网关<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101624.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101624.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101624.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101624.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101624.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101624.png 2x" sizes=auto alt=image.png></a></figure>再次验证两分部之间通信时已经使用了备用链路</p><ol start=4><li>通过负载均衡实现网络优化</li></ol><p>公司网管发现业务往来变多，网络流量剧增，主用链路压力非常大，而总部与分部之间的网络流量相对较少，即备用链路上的宽带多处在闲置状态，此时可以通过配置实现负载均衡，即同时利用主备两条链路来支撑两分部间的通信
恢复 R1 S 0/0/1 接口，并配置目标网段为 PC-2 所在网段，掩码为 24 位，下一跳为 R2，优先级不变，并查看 R1 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101608.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101608.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101608.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101608.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101608.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101608.png 2x" sizes=auto alt=image.png></a></figure>配置完成后可以观察到去往 192.168.20.0 网段拥有两条下一跳不同的路由条目，即实现了负载均衡
测试 PC-1 和 PC-2 通信<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101688.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101688.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101688.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101688.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101688.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101688.png 2x" sizes=auto alt=image.png></a></figure>观察到通信正常，在 R3 上做 R1 同样的对称配置<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101711.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101711.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101711.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101711.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101711.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101711.png 2x" sizes=auto alt=image.png></a></figure>配置完成后，能够在R3的路由表中观察到与R1路由表相同的情况。
通过配置针对相同目的地址但优先级值不同的静态路由，可以在路由器上实现路径备份的功能。而通过配置针对相同目的地址且优先级值相同的静态路由，不仅互为备份还能实现负载均衡。</p><h3 id=五讨论与分析-1 class=headerLink><a href=#%e4%ba%94%e8%ae%a8%e8%ae%ba%e4%b8%8e%e5%88%86%e6%9e%90-1 class=header-mark></a>五、讨论与分析</h3><p><strong>思考</strong>
<strong>在本实验的步骤3和步骤4中，如果不在R3上做和R1同样的对称配置，会产生什么样的现象？为什么？</strong>
可能导致负载不均衡，在步骤4中，如果只在 R1 上配置了负载均衡，而在 R3 上没有进行对称配置，流量可能会倾向于使用 R1 到 R2 的路径，而 R3 到 R2 的路径则没有被利用。这样就无法实现总部和分部之间的网络流量在两个路径之间均衡分担，造成主用链路的过载，而备份链路处于闲置状态。
<strong>完成负载均衡的配置之后，可以在 R1 S 0/0/0 和 S 0/0/1 个接口上启用抓包工具，且在主机 PC-1 上 ping 主机 PC-2，观察 R1 的两个接口上的现象，解释为什么会产生这样的现象。</strong></p><ul><li><strong>多条 ICMP 流量记录：</strong> 因为在 R1 上配置了负载均衡，主机 PC-1 到主机 PC-2 的通信流量会分布在两条路径上，分别经过 R1 的 S 0/0/0 和 S 0/0/1 两个接口。因此，在抓包工具上可能会看到多条 ICMP 流量记录，分别对应两个接口上的流量。</li><li><strong>流量分布不均匀：</strong> 如果负载均衡配置正常，流量应该在两个接口上分布相对均匀。即使流量分布不均匀，也可能是由于流量量较小、路径选择算法等原因导致的，但总体上应该能在两个接口上看到相应的 ICMP 流量。</li></ul><p><strong>收获</strong>
通过配置浮动静态路由，实现了网络路径的冗余，确保在主用路径发生故障时能够迅速切换到备份路径，提高了网络的可用性和稳定性。 通过配置负载均衡，学到了如何同时利用多条链路，分担网络流量，提高网络的性能和带宽利用率。了解了如何在多条路径之间实现均衡的流量分发。</p><h1 id=rip class=headerLink><a href=#rip class=header-mark></a>RIP</h1><h2 id=实验1rip-路由协议基本配置 class=headerLink><a href=#%e5%ae%9e%e9%aa%8c1rip-%e8%b7%af%e7%94%b1%e5%8d%8f%e8%ae%ae%e5%9f%ba%e6%9c%ac%e9%85%8d%e7%bd%ae class=header-mark></a>实验1：RIP 路由协议基本配置</h2><h3 id=一实验目的-2 class=headerLink><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84-2 class=header-mark></a>一、实验目的</h3><ul><li>理解RIP的应用场景</li><li>理解RIP的基本原理</li><li>掌握RIPv1的基本配置</li><li>掌握RIPv2的基本配置</li><li>掌握测试RIP路由网络的连通性的方法</li><li>掌握使用display与debug 命令测试RIP</li><li>了解RIPv1与RIPv2的区别</li></ul><h3 id=二实验环境-2 class=headerLink><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83-2 class=header-mark></a>二、实验环境</h3><p><strong>基础配置拓扑：</strong><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101776.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101776.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101776.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101776.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101776.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101776.png 2x" sizes=auto alt=image.png></a></figure><strong>实验编址：</strong></p><table><thead><tr><th>设备</th><th>接口</th><th>IP 地址</th><th>子网掩码</th><th>默认网关</th></tr></thead><tbody><tr><td>R1(AR1220)</td><td>GE 0/0/0</td><td>10.0.12.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>Lookback 0</td><td>10.0.1.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>R2(AR1220)</td><td>GE 0/0/0</td><td>10.0.12.2</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>Lookback 0</td><td>10.0.2.2</td><td>255.255.255.0</td><td>N/A</td></tr></tbody></table><h3 id=三实验内容-2 class=headerLink><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9-2 class=header-mark></a>三、实验内容</h3><p>某小型公司组网拓扑很简单，只拥有两台路由器，因此可以采用 RIP 路由协议来完成网络的部署。本实验通过模拟简单的企业网络场景来描述RIP路由协议的基本配置，并介绍一些基本的查看 RIP 信息的命令使用方法。</p><h3 id=四实验结果-2 class=headerLink><a href=#%e5%9b%9b%e5%ae%9e%e9%aa%8c%e7%bb%93%e6%9e%9c-2 class=header-mark></a>四、实验结果</h3><ol><li>基本配置</li></ol><p><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101823.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101823.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101823.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101823.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101823.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101823.png 2x" sizes=auto alt=image.png></a></figure></p><ol start=2><li>使用 RIPv1 搭建网络</li></ol><p>在公司两台路由器 R1 和 R2 上配置 RIPv1。使用<code>**rip**</code>命令创建并开启协议进程，默认情况下进程号是 <strong>1</strong>。使用<code>**network**</code>命令对指定网段接口使能 RIP 功能，注意必须是自然网段的地址，配置完成后看 R1 和 R2 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101085.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101085.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101085.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101085.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101085.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101085.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101144.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101144.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101144.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101144.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101144.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101144.png 2x" sizes=auto alt=image.png></a></figure>观察到两台路由器已经通过 RIP 协议学习到了对方环回接口所在网段的路由条目。
测试 R1 和 R2 环回接口间连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101123.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101123.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101123.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101123.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101123.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101123.png 2x" sizes=auto alt=image.png></a></figure>观察到通信正常使用
使用 <code>**debuging**</code>** **命令查看 RIP 协议定期更新情况，并开启 RIP 调试功能。请注意，<code>**debug**</code> 命令需要在用户视图下才能使用。使用<code>**terminal debugging**</code>和<code>** terminal monitor**</code>命令开启<code>**debug**</code>信息在屏幕上显示的功能，才能在电脑屏幕上看到路由器之间 RIP 协议交互的信息。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101252.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101252.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101252.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101252.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101252.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101252.png 2x" sizes=auto alt=image.png></a></figure>可以观察到 R1 从连接 R2 E 0/0/0 接口周期性发送、接受 v1 的 Response 更新报文，包括目的地、数据包大小以及 cost 值。</p><ol start=3><li>使用 RIPv2 搭建网络</li></ol><p>现在只需要在 RIP 视图下配置 v2 即可<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101313.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101313.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101313.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101313.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101313.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101313.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101368.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101368.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101368.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101368.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101368.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101368.png 2x" sizes=auto alt=image.png></a></figure>观察到两台路由器已经通过 RIP 协议学习到了对方环回接口所在网段的路由条目，ping 检测 R1 和 R2 之间直连链路的 IP 连通性。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101515.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101515.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101515.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101515.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101515.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101515.png 2x" sizes=auto alt=image.png></a></figure>观察到通信正常，使用<code>**debugging**</code>命令查看 RIPv2 协议定期更新情况<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101628.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101628.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101628.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101628.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101628.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101628.png 2x" sizes=auto alt=image.png></a></figure>与 RIPv1 中使用<code>**debuging**</code> 命令所查看的信息进行对比，可以明显区分出 RIPv1 和 RIPv2 的不同；</p><ul><li>RIPv2 的路由信息中携带了子网掩码；</li><li>RIPv2 的路由信息中携带了下一跳地址，标识一个比通告路由器的地址更好的下一跳地址。换句话说，它指出的地址，其度量值（跳数）比在同一个子网上的通告路由器更靠近目的地。如果这个字段设置为全0（0.0.0.0），说明通告路由器的地址是最优的下一跳地址；</li><li>RIPv2 默认采用组播方式发送报文，地址为224.0.0.9</li></ul><h3 id=五讨论与分析-2 class=headerLink><a href=#%e4%ba%94%e8%ae%a8%e8%ae%ba%e4%b8%8e%e5%88%86%e6%9e%90-2 class=header-mark></a>五、讨论与分析</h3><p><strong>收获</strong>
学习到如何在路由器上配置 RIP，包括启用 RIP 进程、选择参与 RIP 的接口、配置版本（RIP v1或RIP v2）等</p><h2 id=实验2配置-ripv2-的认证 class=headerLink><a href=#%e5%ae%9e%e9%aa%8c2%e9%85%8d%e7%bd%ae-ripv2-%e7%9a%84%e8%ae%a4%e8%af%81 class=header-mark></a><strong>实验2：配置 RIPv2 的认证</strong></h2><h3 id=一实验目的-3 class=headerLink><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84-3 class=header-mark></a><strong>一、实验目的</strong></h3><ul><li>理解配置RIPv2认证的场景和意义</li><li>掌握配置RIPv2简单验证的方法</li><li>掌握测试RIPv2简单验证的配置结果的方法</li><li>掌握配置RIPv2 MD5密文验证的方法</li><li>掌握测试RIPv2MD5密文验证配置结果的方法实验内容</li></ul><h3 id=二实验环境-3 class=headerLink><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83-3 class=header-mark></a><strong>二、实验环境</strong></h3><p><strong>基础配置拓扑：</strong><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101672.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101672.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101672.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101672.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101672.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101672.png 2x" sizes=auto alt=image.png></a></figure><strong>实验编址：</strong></p><table><thead><tr><th>设备</th><th>接口</th><th>IP</th><th>子网掩码</th><th>网关</th></tr></thead><tbody><tr><td>PC-1</td><td>E 0/0/1</td><td>192.168.10.10</td><td>255.255.255.0</td><td>192.168.10.1</td></tr><tr><td>R1(AR2220)</td><td>GE 0/0/0</td><td>192.168.10.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>GE 0/0/1</td><td>10.0.12.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>R2(AR2220)</td><td>GE 0/0/1</td><td>10.0.12.2</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>GE 0/0/0</td><td>192.168.20.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>PC-2</td><td>E 0/0/1</td><td>192.168.20.20</td><td>255.255.255.0</td><td>192.168.20.1</td></tr></tbody></table><p>|</p><p>R3(AR2220) | GE 0/0/0 | 10.0.12.3 | 255.255.255.0 | N/A |
| | Loopback 0 | 192.168.10.1 | 255.255.255.0 | N/A |
| | Loopback 1 | 192.168.20.1 | 255.255.255.0 | N/A |</p><h3 id=三实验内容-3 class=headerLink><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9-3 class=header-mark></a><strong>三、实验内容</strong></h3><p>本实验模拟企业网络场景。某公司有两台路由器 R1 与 R2，各自连接着一台主机，并且 R1 和 R2 之间配置 RIPv2 协议学习路由条目。R3 模拟作为网络中的攻击者，窃取 R1 与 R2 间的路由信息，并发布了一些虚假路由，使 R1 和 R2 的相关路由的选路指向了 R3，形成了路由欺骗。为了避免遭受攻击，提高网络安全性，网络管理员将配置 RIPv2 认证。</p><h3 id=四实验结果-3 class=headerLink><a href=#%e5%9b%9b%e5%ae%9e%e9%aa%8c%e7%bb%93%e6%9e%9c-3 class=header-mark></a><strong>四、实验结果</strong></h3><ol><li>基本配置</li></ol><p>根据编址进行配置，R3 上两个环回接口先不配置 IP 地址（仅展示 R1 其余略）<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101754.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101754.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101754.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101754.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101754.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101754.png 2x" sizes=auto alt=image.png></a></figure></p><ol start=2><li>搭建 RIP 网络</li></ol><p>配置公司路由器 R1 和 R2 的 RIPv2 协议，并添加需要通告的网段，配置完成后查看路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101852.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101852.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101852.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101852.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101852.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101852.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101860.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101860.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101860.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101860.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101860.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101860.png 2x" sizes=auto alt=image.png></a></figure>观察到双方已经正常获得了 RIP 路由条目</p><ol start=3><li>模拟网络攻击</li></ol><p>配置 R3 为攻击者，接入公司网络 。在基本配置中已经将接口 GE 0/0/0 地址配为 10.0.12.3，与该公司路由器在同一网段，并配置 RIPv2 协议，通告该网段。配置完成后查看 R3 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101035.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101035.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101035.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101035.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101035.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101035.png 2x" sizes=auto alt=image.png></a></figure>观察发现 R3 已经非法获取了 R1 和 R2 上用户终端所在的两个网段的路由信息。此时 R3 就可以向两个网段发送大量的 ping 包，导致网络链路拥塞，形成攻击
下面是 R3 模拟攻击，发送十万个 ping 包给 PC-1，导致攻击发生<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101047.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101047.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101047.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101047.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101047.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101047.png 2x" sizes=auto alt=image.png></a></figure>完成模拟攻击后，在 R3 上分别配置两个用于欺骗的环回接口，地址分别是 192.168.10.1 和 192.168.20.1，即与公司网络中两个用户的地址相同，并且在 RIP 协议中通告两个欺骗的网段<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101129.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101129.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101129.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101129.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101129.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101129.png 2x" sizes=auto alt=image.png></a></figure>配置完成后查看 R1 和 R2 两个路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101233.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101233.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101233.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101233.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101233.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101233.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101278.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101278.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101278.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101278.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101278.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101278.png 2x" sizes=auto alt=image.png></a></figure>可以观察到 R3 发过来的路由更新。因为 R2 和 R3 发送 RIP 更新的 cost 都是1跳，所以在 R1 的路由表中，目的为 192.168.20.0 网段形成了两条等价负载均衡的路径，下一跳分别是 R2 和 R3。这样会导致去往 192.168.20.0 网段的数据包有部分转发给了欺骗路由器 R3，R2 的路由表变化和 R1 同理。</p><ol start=4><li>配置RIPv2简单验证</li></ol><p>为了提升网络安全性，避免发生上述攻击和路由欺骗，网管可在 R1 和 R2 上配置 RIP 的简单验证实现对网络的保护。
在路由器 R1 和 R2 的GE 0/0/1 接口配置认证，使用简单验证方式，密码为 huawei。注意，两端的密码必须保持一致，否则会导致认证失败，从而使得 RIP 协议无法正常运行。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101396.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101396.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101396.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101396.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101396.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101396.png 2x" sizes=auto alt=image.png></a></figure>再次查看 R1 和 R2 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101506.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101506.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101506.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101506.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101506.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101506.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101589.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101589.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101589.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101589.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101589.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101589.png 2x" sizes=auto alt=image.png></a></figure>观察到路由表正常，R3 发送的欺骗路由在路由表中消失，原因是 R1 和 R2 配置了 RIP 认证，要求在 RIP 更新报文中包含认证密码，如果密码错误或者不存在，就认为该路由非法并丢弃
在 R1 GE 0/0/1 口抓包<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101613.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101613.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101613.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101613.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101613.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101613.png 2x" sizes=auto alt=image.png></a></figure>观察到 RIP 报文中含 <code>**authentication**</code> 字段，并且密码是明文 <code>**huawei**</code></p><ol start=5><li>配置 RIPv2 MD5 密文验证</li></ol><p>在上一步骤中，在 R1 和 R2 上配置了简单验证方式的认证后，成功地抵御了 R3 的路由欺骗和攻击，且主机 PC-1 与 PC-2 可以正常通信。但是通过抓包能够发现，简单验证方式下的认证安全性非常差，攻击者虽然无法直接攻击网络，但是可以通过抓取 RIP协议数据包获得明文密码，因此建议使用MD5密文验证方式进行RIPv2的认证。
在 R1 和 R2 的 GE 0/0/1 接口上删除上一步骤中的简单验证配置，选择使用 MD5 密文验证方式配置。配置时可以选择MD5密文验证方式的报文格式，<code>**usual**</code> 参数表示使用通用报文格式；<code>**nonstandard**</code>参数表示使用非标准报文格式（IETF标准），但是必须保证两端的报文格式一致，这里选用通用标准格式。
配置完成后查看路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101677.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101677.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101677.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101677.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101677.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101677.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101744.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101744.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101744.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101744.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101744.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101744.png 2x" sizes=auto alt=image.png></a></figure>观察到路由表正常，R3 发送的欺骗路由在路由表中消失，与配置简单验证的效果一样，抓R
1 GE 0/0/1包<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101788.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101788.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101788.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101788.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101788.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101788.png 2x" sizes=auto alt=image.png></a></figure>发现已经看不到配置的认证密码了</p><h3 id=五讨论与分析-3 class=headerLink><a href=#%e4%ba%94%e8%ae%a8%e8%ae%ba%e4%b8%8e%e5%88%86%e6%9e%90-3 class=header-mark></a><strong>五、讨论与分析</strong></h3><p><strong>思考</strong>
<strong>在本实验中， R1 和 R2 上配置了认证，R3 没有配置认证，根据分析，R1 和 R2 不会再接收 R3 发送的不包含认证信息的 RIP 更新，那 R3 是否会接收 R1 和 R2 发送过来的带有认证信息的 RIP 更新呢？为什么？</strong>
不会，因为他没有配置和 R1 R2 同样的认证信息
<strong>收获</strong>
RIPv2 认证是一种网络安全机制，可以帮助防止路由器欺骗攻击和未经授权的路由信息更改。通过配置认证，路由器可以相互验证发送和接收的RIP更新的真实性，减少了路由信息被篡改的风险。</p><h2 id=实验3rip-路由协议的汇总 class=headerLink><a href=#%e5%ae%9e%e9%aa%8c3rip-%e8%b7%af%e7%94%b1%e5%8d%8f%e8%ae%ae%e7%9a%84%e6%b1%87%e6%80%bb class=header-mark></a><strong>实验3：RIP 路由协议的汇总</strong></h2><h3 id=一实验目的-4 class=headerLink><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84-4 class=header-mark></a><strong>一、实验目的</strong></h3><ul><li>理解RIP路由协议汇总的应用场景</li><li>理解RIPv1和RIPv2的自动汇总</li><li>掌握配置和测试RIPv2手动汇总的方法实验内容</li></ul><h3 id=二实验环境-4 class=headerLink><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83-4 class=header-mark></a><strong>二、实验环境</strong></h3><p><strong>基础配置拓扑：</strong></p><p><strong>实验编址：</strong></p><table><thead><tr><th>设备</th><th>接口</th><th>IP</th><th>子网掩码</th><th>网关</th></tr></thead><tbody><tr><td>R1(Router)</td><td>Serial 0/0/0</td><td>192.168.12.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>R1(Router)</td><td>Serial 0/0/1</td><td>192.168.12.2</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>Serial 0/0/0</td><td>192.168.23.2</td><td>255.255.255.0</td><td>N/A</td></tr></tbody></table><p>|</p><p>R1(Router) | Serial 0/0/1 | 192.168.23.3 | 255.255.255.0 | N/A |
| | Loopback 0 | 3.3.0.3 | 255.255.255.0 | N/A |
| | Loopback 1 | 3.3.1.3 | 255.255.255.0 | N/A |
| | Loopback 2 | 3.3.2.3 | 255.255.255.0 | N/A |
| | Loopback 3 | 3.3.3.3 | 255.255.255.0 | N/A |</p><h3 id=三实验内容-4 class=headerLink><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9-4 class=header-mark></a><strong>三、实验内容</strong></h3><p>在由3台路由器所组成的简单网络中，R3 连接着多个网段，通过 Loopback 口来模拟多个网段，通过实验实现 RIPv1 自动汇总、RIPv2 自动汇总以及 RIPv2 手工汇总。</p><h3 id=四实验结果-4 class=headerLink><a href=#%e5%9b%9b%e5%ae%9e%e9%aa%8c%e7%bb%93%e6%9e%9c-4 class=header-mark></a><strong>四、实验结果</strong></h3><ol><li>基本配置（以 R3 为例，其余略）</li></ol><p><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101007.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101007.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101007.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101007.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101007.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101007.png 2x" sizes=auto alt=image.png></a></figure></p><ol start=2><li>配置 RIPv1 协议</li></ol><p>在路由器 R1 R2 R3 上配置 RIPv1 协议，通告相应网段，并查看 R1 R2 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101050.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101050.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101050.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101050.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101050.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101050.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101116.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101116.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101116.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101116.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101116.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101116.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101097.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101097.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101097.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101097.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101097.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101097.png 2x" sizes=auto alt=image.png></a></figure>观察到 R3 发送过来的汇总路由条目 3.0.0.0/8，没有任何明细路由条目，在 R3 S 0/0/01 接口抓包<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101152.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101152.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101152.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101152.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101152.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101152.png 2x" sizes=auto alt=image.png></a></figure>可以观察到，RIPv1 的协议报文中没有携带掩码信息，只有相应的网络号以及 Metric 值，即 RIPv1 只发布汇总后的有类路由。RIPv1 默认开启自动汇总，且无法关闭，也不支持手动汇总。可以使用<code>**display default-parameter rip**</code>命令查看 RIP 默认配置信息。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101250.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101250.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101250.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101250.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101250.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101250.png 2x" sizes=auto alt=image.png></a></figure>观察到默认开启了自动汇总</p><ol start=3><li>配置 RIPv2 自动汇总</li></ol><p>在R1 R2 R3 上配置 <code>**version2**</code>命令，运行 RIPv2 协议<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101381.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101381.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101381.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101381.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101381.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101381.png 2x" sizes=auto alt=image.png></a></figure>配置完成后再 R3 S 0/0/1 接口抓包<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101488.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101488.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101488.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101488.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101488.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101488.png 2x" sizes=auto alt=image.png></a></figure>观察到报文中携带了掩码信息，RIPv2 支持自动汇总，默认是开启的，并且可以关闭
查看 R1 R2 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101668.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101668.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101668.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101668.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101668.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101668.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101543.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101543.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101543.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101543.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101543.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101543.png 2x" sizes=auto alt=image.png></a></figure>可以观察到，接收到的路由条目是具体的明细路由条目，而没有汇总路由，即此时 RIPv2 默认自动汇总并没有生效。
这是因为在华为设备上，以太网接口和串口都默认启用了水平分割功能。为了防止环路和不连续子网问题的产生，在启用了水平分割或毒性逆转的接口上，RIPv2 的默认自动汇总就会失效，所以从 R3 通告过来的都是具体的明细路由条目。
要使 RIPv2 的默认自动汇总生效，有两种方法。
第一种方法，使用<code>**summary always**</code>命令。配置该命令后，不论水平分割是否启用，RIPv2 的自动汇总都生效。第二种方法，关闭相应接口下的水平分割功能<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101589.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101589.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101589.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101589.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101589.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101589.png 2x" sizes=auto alt=image.png></a></figure>使用一种方法后查看 R1 R2 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101672.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101672.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101672.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101672.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101672.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101672.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101858.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101858.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101858.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101858.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101858.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101858.png 2x" sizes=auto alt=image.png></a></figure>观察到 RIPv2 的自动汇总生效了</p><ol start=4><li>配置 RIPv2 手动汇总</li></ol><p>首先要删除上一步使 RIPv2 生效的配置<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101876.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101876.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101876.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101876.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101876.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101876.png 2x" sizes=auto alt=image.png></a></figure>在 R3 上使用 <code>rip summary-address</code>命令配置手动汇总，配合需要汇总的本地网络 IP 地址为 3.3.0.0，网络掩码为 255.255.255.0<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101992.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101992.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101992.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101992.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101992.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101992.png 2x" sizes=auto alt=image.png></a></figure>查看 R1 R2 路由表，观察到 R1 R2 上已经收到了该汇总路由条目，且没有任何明细条目<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101089.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101089.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101089.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101089.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101089.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101089.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101133.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101133.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101133.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101133.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101133.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101133.png 2x" sizes=auto alt=image.png></a></figure></p><h3 id=五讨论与分析-4 class=headerLink><a href=#%e4%ba%94%e8%ae%a8%e8%ae%ba%e4%b8%8e%e5%88%86%e6%9e%90-4 class=header-mark></a><strong>五、讨论与分析</strong></h3><p><strong>收获</strong></p><ol><li>路由汇总可以将多个具体的子网汇总成一个更大的网络，从而简化网络拓扑。这有助于减少路由表的条目数量。</li><li>汇总可以减少路由表的大小，降低路由器的内存使用。</li></ol><h2 id=实验4配置-rip-的版本兼容定时器及协议优先级 class=headerLink><a href=#%e5%ae%9e%e9%aa%8c4%e9%85%8d%e7%bd%ae-rip-%e7%9a%84%e7%89%88%e6%9c%ac%e5%85%bc%e5%ae%b9%e5%ae%9a%e6%97%b6%e5%99%a8%e5%8f%8a%e5%8d%8f%e8%ae%ae%e4%bc%98%e5%85%88%e7%ba%a7 class=header-mark></a><strong>实验4：配置 RIP 的版本兼容、定时器及协议优先级</strong></h2><h3 id=一实验目的-5 class=headerLink><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84-5 class=header-mark></a><strong>一、实验目的</strong></h3><ul><li>掌握配置RIP版本的方法</li><li>理解RIPvl和RIPv2的相互兼容性</li><li>掌握RIP的3种定时器的配置</li><li>掌握RIP的协议优先级的配置</li></ul><h3 id=二实验环境-5 class=headerLink><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83-5 class=header-mark></a><strong>二、实验环境</strong></h3><p><strong>基础配置拓扑：</strong><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101154.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101154.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101154.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101154.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101154.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101154.png 2x" sizes=auto alt=image.png></a></figure><strong>实验编址：</strong></p><table><thead><tr><th>设备</th><th>接口</th><th>IP</th><th>子网掩码</th><th>网关</th></tr></thead><tbody><tr><td>R1(AR2220)</td><td>GE 0/0/0</td><td>10.0.12.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>GE 0/0/1</td><td>192.168.10.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>R1(AR2220)</td><td>GE 0/0/0</td><td>10.0.12.2</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>GE 0/0/1</td><td>192.168.20.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>PC-1</td><td>E 0/0/1</td><td>192.168.10.10</td><td>255.255.255.0</td><td>192.168.10.1</td></tr><tr><td>PC-2</td><td>E 0/0/1</td><td>192.168.20.20</td><td>255.255.255.0</td><td>192.168.20.1</td></tr></tbody></table><h3 id=三实验内容-5 class=headerLink><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9-5 class=header-mark></a><strong>三、实验内容</strong></h3><p>本实验中采用简单的场景介绍 RIP 各版本间的区别及如何实现相互间的兼容、RIP 的3种定时器的作用及修改方法、RIP 优先级的作用及修改方法。</p><h3 id=四实验结果-5 class=headerLink><a href=#%e5%9b%9b%e5%ae%9e%e9%aa%8c%e7%bb%93%e6%9e%9c-5 class=header-mark></a><strong>四、实验结果</strong></h3><ol><li>基本配置</li></ol><p>配置接口（以 R1 为例）<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101239.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101239.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101239.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101239.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101239.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101239.png 2x" sizes=auto alt=image.png></a></figure></p><ol start=2><li>配置 RIP 协议的版本兼容</li></ol><p>在 R1 和 R2 上分别配置 RIP 协议，并通告相应网段，但是在 R1 上，不指定 RIP 版本，R2 上指定使用版本 v2，配置完成后查看路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101255.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101255.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101255.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101255.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101255.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101255.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101452.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101452.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101452.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101452.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101452.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101452.png 2x" sizes=auto alt=image.png></a></figure>观察到 R1 的路由表中存在 PC-2 所在网段的路由条目，在 R2 路由表中没有发现 PC-2 所在网段的路由条目
在 R1 GE 0/0/0 接口抓取 R1 发送给 R2 和从 R2 接收到的 RIP 报文<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101480.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101480.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101480.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101480.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101480.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101480.png 2x" sizes=auto alt=image.png></a></figure>可以观察到R1采用版本1,即广播方式来发送更新；而R2采用版本2,即组播方式发送更新。验证了 R1在RIP协议进程中没有明确指定版本配置时，默认是可以处理接收版本1和版本2的报文，但仅发送版本1的报文；而R2因在RIP协议进程中明确配置了版本2,仅接收和发送版本2的报文。
因此，由于R1发送的是RIPvl报文，而R2不能正确处理接收，所以R2的路由表中没有PC-1所在网段的路由条目。而R2发送的RIPv2报文能够被R1处理接收，所以在R1的路由表中存在PC-2所在网段的路由条目。
现在为了使R2也能接收PC-1所在网段的路由条目，在R1上设置接口的R1P版本，使R1能够以广播方式发送RIPv2报文。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101536.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101536.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101536.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101536.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101536.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101536.png 2x" sizes=auto alt=image.png></a></figure>配置完成后，查看 R2 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101726.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101726.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101726.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101726.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101726.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101726.png 2x" sizes=auto alt=image.png></a></figure>发现路由表中已经存在 R1 发送过来的路由条目。同样也可以使用<code>**rip version 2 mlitlicast**</code>命令，即使 R1 能够以组播方式发送 RIPv2 报文，效果一样，这里不再验证。
在配置RIP协议时建议路由器之间配置相同RIP版本，即所有路由器都配置 RIPv1 或者都配置 RIPv2。以避免可能由于错误配置而导致 RIP 协议无法正常工作。</p><ol start=3><li>配置RIP的定时器</li></ol><p>配置完 RIP 版本兼容后，再次在 R1 GE 0/0/0 接口上通过抓包分析 R1 和 R2 更新报文的发送情况<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101748.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101748.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101748.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101748.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101748.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101748.png 2x" sizes=auto alt=image.png></a></figure>路由更新的有效期为超时定时器定义的时间180s,即当在180s内没有收到新的路由更新，则宣布该路由不可达，并从路由表中清除掉该路由条目。
为了验证效果，在 R1 GE 0/0/0接口上配置停止发送RIP路由更新。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101858.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101858.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101858.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101858.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101858.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101858.png 2x" sizes=auto alt=image.png></a></figure>此时，接口不能发送任何关于 RIP 路由更新，查看 R2 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101907.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101907.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101907.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101907.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101907.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101907.png 2x" sizes=auto alt=image.png></a></figure>观察到 R1 接收到的路由条目依然存在，原因是 RIP 超时定时器没有到期，该路由条目依然被保存在路由表中
使用 <code>display rip database</code>命令检查 R2 的 RIP 发布数据库中的所有激活路由<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101911.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101911.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101911.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101911.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101911.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101911.png 2x" sizes=auto alt=image.png></a></figure>路由条目也没有发生变化，状态仍为[A]，即仍被通告。在超过 180s 以后再查看路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101934.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101934.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101934.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101934.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101934.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101934.png 2x" sizes=auto alt=image.png></a></figure>可以观察到，R2 的路由表中已经无法看到 R1 发送过来的路由条目，原因是超时定时器已经到期，该路由条目被定义为失效，已经从路由表中删除了
同时再次检查 R2 的路由表和发布数据库<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101101.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101101.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101101.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101101.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101101.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101101.png 2x" sizes=auto alt=image.png></a></figure>发现在数据库中可以看到该路由条目，但是该路由条目己经被标记为16跳，即不可达，并且状态标记为因，该路由将不能被通告出去。虽然该条目己失效，但是仍然存在于发布数据库中的原因是RIP垃圾收集定时器启动，且还没有到期，暂时不能从数据库中清除。
如果在默认120s内仍然没有收到更新报文，垃圾收集定时器超时后将删除该表项，经过120s后再查看R2上的发布数据库。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101262.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101262.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101262.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101262.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101262.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101262.png 2x" sizes=auto alt=image.png></a></figure>可以观察到此时已经不存在任何 R1 发过来的路由条目
可以通过<code>**timers rip**</code>命令改变这几个定时器的默认值来影响RIP的收敛速度。现将 R1 的更新报文的时间间隔修改为 20s,超时计时器的超时时间修改为120s,垃圾收集计时器的超时时间修改为60s。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101285.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101285.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101285.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101285.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101285.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101285.png 2x" sizes=auto alt=image.png></a></figure>观察到 RIP 定时器不会马上生效
如果3个定时器值设置不当，会引起网络不稳定。例如，如果更新时间大于失效时间，那么在更新时间内，可能在接收到路由更新之前，本地的路由条目已经失效了。定时器值的调整应考虑网络的规模和性能，并在所有运行的RIP路由器上进行统一配置。</p><ol start=4><li>配置RIP协议优先级</li></ol><p>在实际网络中，去往相同目的网段的路由信息可以通过不同的路由协议获取，比如同时通过静态路由和RIP协议获取，此时就会先比较二者的协议优先级，通过具有较高优先级的路由协议所获取的路由信息将被优选放入路由表中
杳看 R1 路由表。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101392.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101392.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101392.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101392.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101392.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101392.png 2x" sizes=auto alt=image.png></a></figure>观察到 RIP 的路由默认优先级为 100.可以使用<code>**preference**</code>命令将 R1 的路由优先级调整为 90，然后查看 R1 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101332.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101332.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101332.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101332.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101332.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101332.png 2x" sizes=auto alt=image.png></a></figure>注意优先级数字越小优先级越高</p><h3 id=五讨论与分析-5 class=headerLink><a href=#%e4%ba%94%e8%ae%a8%e8%ae%ba%e4%b8%8e%e5%88%86%e6%9e%90-5 class=header-mark></a><strong>五、讨论与分析</strong></h3><p><strong>思考</strong>
<strong>在此实验中，如果在R1上配置一条去往192.168.20.0网段的静态路由，再把RIP优先级修改为60,那么在R1的IP路由表中该网段路由来自RIP还是静态路由？为什么？</strong>
R1 的 IP 路由表中会使用 RIP 学到的路由作为主要路由。静态路由的优先级默认是 60，因此小于 RIP 默认优先级，RIP 学到的路由将优先生效。
<strong>收获</strong></p><ul><li>了解 RIPv1 和 RIPv2 的主要区别，包括支持的特性以及版本兼容性的配置，学会配置路由器以适应不同版本。</li><li>学会配置 RIP 更新定时器，了解定时器的作用和影响。通过调整更新定时器，可以改变 RIP 更新的频率，适应不同网络环境。</li><li>通过调整 RIP 的各种参数，如定时器和协议优先级，可以优化网络的性能和稳定性。这有助于确 RIP 在各种网络环境中都能良好运行。</li></ul><h2 id=实验5配置-rip-抑制接口及单播更新 class=headerLink><a href=#%e5%ae%9e%e9%aa%8c5%e9%85%8d%e7%bd%ae-rip-%e6%8a%91%e5%88%b6%e6%8e%a5%e5%8f%a3%e5%8f%8a%e5%8d%95%e6%92%ad%e6%9b%b4%e6%96%b0 class=header-mark></a><strong>实验5：配置 RIP 抑制接口及单播更新</strong></h2><h3 id=一实验目的-6 class=headerLink><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84-6 class=header-mark></a><strong>一、实验目的</strong></h3><ul><li>掌握 RIP 抑制接口的配置</li><li>理解抑制接口的原理及应用场景</li><li>掌握RIP中单播更新的配置</li><li>理解单播更新的原理及应用场景</li></ul><h3 id=二实验环境-6 class=headerLink><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83-6 class=header-mark></a><strong>二、实验环境</strong></h3><p><strong>基础配置拓扑：</strong><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101435.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101435.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101435.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101435.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101435.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101435.png 2x" sizes=auto alt=image.png></a></figure><strong>实验编址：</strong></p><table><thead><tr><th>设备</th><th>接口</th><th>IP</th><th>子网掩码</th><th>网关</th></tr></thead><tbody><tr><td>R1(AR2220)</td><td>GE 0/0/1</td><td>172.16.1.254</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>R2(AR2220)</td><td>GE 0/0/1</td><td>172.16.1.100</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>GE 0/0/0</td><td>172.16.2.254</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>R3(AR2220)</td><td>GE 0/0/1</td><td>172.16.1.200</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>GE 0/0/0</td><td>192.168.1.254</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>PC-1</td><td>Ethernet 0/0/1</td><td>172.16.2.1</td><td>255.255.255.0</td><td>172.16.2.254</td></tr><tr><td>PC-2</td><td>Ethernet 0/0/1</td><td>172.16.1.1</td><td>255.255.255.0</td><td>172.16.1.254</td></tr><tr><td>PC-3</td><td>Ethernet 0/0/1</td><td>192.168.1.1</td><td>255.255.255.0</td><td>192.168.1.254</td></tr></tbody></table><h3 id=三实验内容-6 class=headerLink><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9-6 class=header-mark></a><strong>三、实验内容</strong></h3><p>本实验模拟企业网络场景。R1 为该公司出口网关路由器，连接运营商网络；R2 为公司 IT部门路由器，通过交换机 S1 与网关相连；人事部员工直接通过交换机 S1 接入公司网络：R3 为公司财务部门路由器，同样通过 S1 与网关相连。所有路由器运行路由协议RIP实现网络互通。由于交换机 S1 直连了大量PC用户，如果R1继续以广播（RIPvl）或组播（RIPv2）的方式发送更新的路由给 R2 和 R3，处于同一广播网络中的S1 下连接的 PC 也会收到这些对 PC 来说无用的更新，造成了带宽和资源的浪费。为了优化网络，现需在R1 的 GE 0/0/1 接口配置抑制接口来抑制广播或组播更新，为了使 R2 和 R3 能照常接收更新，还需要在R1 上配置与 R2、R3 的单播更新；同时禁止其他部门访问财务部门，需抑制 R3的 GE 0/0/1接口，不发布任何 RIP 路由（单播更新也不行），仅可接收其他路由信息。</p><h3 id=四实验结果-6 class=headerLink><a href=#%e5%9b%9b%e5%ae%9e%e9%aa%8c%e7%bb%93%e6%9e%9c-6 class=header-mark></a><strong>四、实验结果</strong></h3><ol><li>基本配置</li></ol><p>根据实验编制进行基本配置（以 R2 为例，其他略）<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101606.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101606.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101606.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101606.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101606.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101606.png 2x" sizes=auto alt=image.png></a></figure></p><ol start=2><li>搭建基础的 RIP 网路</li></ol><p>在公司各台服务器上都运行 RIP 路由协议，并通告相应网段，配置完成后查看路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101672.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101672.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101672.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101672.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101672.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101672.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101738.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101738.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101738.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101738.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101738.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101738.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101765.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101765.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101765.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101765.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101765.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101765.png 2x" sizes=auto alt=image.png></a></figure>现在每台路由器上都已经拥有了所在网段的路由信息
网管在 PC-2 E 0/0/1 接口抓包，观察到接受了许多对 PC-2 来说无用的 RIP 路由更新<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101789.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101789.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101789.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101789.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101789.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101789.png 2x" sizes=auto alt=image.png></a></figure>在 PC-1 的 E 0/0/1 接口抓包<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101793.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101793.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101793.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101793.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101793.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101793.png 2x" sizes=auto alt=image.png></a></figure>同样可观察到 PC-1上接收到许多对 PC-1 而言无用的 RIP 更新，这是由于在 R2 上 172.16.2.0 网段也被通告进了 RIP 协议中，即 R2 的 E 1/0/0 接口运行在了 RIP协议中， 也会发送 RIP 路由信息。在 PC-3 上抓包可以看到同样的效果，原理和 PC-1 一样。</p><ol start=3><li>配置RIP抑制接口，优化公司网络</li></ol><p>为了减少对带宽和资源的浪费，不让人事部门、IT部门和财务部门的 PC 收到大量 无关 RIP 报文，可以以采用抑制接口的方法来实现，使得该接口只接收 RIP 更新报文，血 不发送更新报文。
在各路由器上使用<code>**silent-interface**</code>命令将相应接口配置成为抑制接口，配置完成后在 R1 R2 R3 上使用<code>display rip</code>命令查看相关配置<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102023.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102023.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102023.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102023.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102023.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102023.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102167.png title="屏幕截图 2023-11-28 172751.png" data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102167.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102167.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102167.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102167.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102167.png 2x" sizes=auto alt="屏幕截图 2023-11-28 172751.png"></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102177.png title="屏幕截图 2023-11-28 172849.png" data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102177.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102177.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102177.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102177.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102177.png 2x" sizes=auto alt="屏幕截图 2023-11-28 172849.png"></a></figure>观察到配置成功，在 PC-2 的 E 0/0/1 接口抓包，可以观察到此时收不到 RIP 更新<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102126.png title="屏幕截图 2023-11-28 173123.png" data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102126.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102126.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102126.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102126.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102126.png 2x" sizes=auto alt="屏幕截图 2023-11-28 173123.png"></a></figure></p><ol start=4><li>配置 RIP 单播更新，恢复网络通信</li></ol><p>在上一步中，网管完成了对网络的优化，使所有 PC 都不再接受与之无关的路由更新，而这时各部门员工却反应无法相互间访问，也无法访问外网，查看 R1 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102128.png title="屏幕截图 2023-11-28 174340.png" data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102128.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102128.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102128.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102128.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102128.png 2x" sizes=auto alt="屏幕截图 2023-11-28 174340.png"></a></figure>可以发现此时 R1 获取不到其他网络的RIP路由信息，R2、R3 路由表同样也接收不到 RIP 路由信息。原因是在网络管理员将各路由器的相应接口配置成抑制接口后，接口将无法以广播或组播的方式发送 RIP 更新报文。
现在为了让 RIP 网络能够正常通信，可以通过增加 RIP 的单播更新配置来实现。通过该配置，RIP更新报文会以单播形式发送，而不采用正常的组播或广播的形式。
在R1 上使用<code>**peer**</code>命令,后面跟上指定的邻居路由器 IP 地址,即 R2 和 R3 与R1相连的直连链路上的 IP 地址，配置完成后使用<code>**display rip**</code>查看 RIP 协议的信息。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102182.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102182.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102182.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102182.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102182.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102182.png 2x" sizes=auto alt=image.png></a></figure>R2 R3 同理<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102582.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102582.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102582.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102582.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102582.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102582.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102651.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102651.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102651.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102651.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102651.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102651.png 2x" sizes=auto alt=image.png></a></figure>配置完成后查看路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102647.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102647.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102647.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102647.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102647.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102647.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102605.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102605.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102605.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102605.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102605.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102605.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102712.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102712.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102712.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102712.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102712.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102712.png 2x" sizes=auto alt=image.png></a></figure>观察到此时每台路由器上都已经拥有了所有网段的路由信息</p><ol start=5><li>验证另一种抑制接口方式</li></ol><p>RIP 协议中还可以通过使用<code>**undo rip output**</code>命令来配置抑制接口，禁止接口发送RIP报文。
首先将 R3 上的现有抑制接口和单播更新的配置删除，然后在 R3 上的 GE 0/0/1接口上配置<code>** undo rip output **</code>命令,禁止接口发送 RIP 报文。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102654.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102654.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102654.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102654.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102654.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102654.png 2x" sizes=auto alt=image.png></a></figure>配置完成后等待一段时间查看 R1 R2 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102003.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102003.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102003.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102003.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102003.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102003.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102042.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102042.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102042.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102042.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102042.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102042.png 2x" sizes=auto alt=image.png></a></figure>观察到并没有 R3 上 192.168.1.0 所在直连网段的路由条目，说明 R3 的<code>**undo rip output**</code>命令已经生效，不再发送任何 RIP 路由更新
在 R3 上配置与 R1 间的单播更新<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102138.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102138.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102138.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102138.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102138.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102138.png 2x" sizes=auto alt=image.png></a></figure>等待路由表收敛后再在 R1 上查看路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102130.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102130.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102130.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102130.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102130.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102130.png 2x" sizes=auto alt=image.png></a></figure>观察到 R1 上仍然没有 192.168.1.0 的路由条目，证明可以使用 <code>**undo rip output**</code>命令来抑制接口</p><h3 id=五讨论与分析-6 class=headerLink><a href=#%e4%ba%94%e8%ae%a8%e8%ae%ba%e4%b8%8e%e5%88%86%e6%9e%90-6 class=header-mark></a><strong>五、讨论与分析</strong></h3><p><strong>收获</strong></p><ul><li>在某些情况下，网络中的拓扑变化可能并不频繁。通过抑制接口，可以避免在拓扑保持稳定的情况下发送不必要的路由更新</li><li>抑制接口允许网管根据网络的特定需求来灵活控制路由更新的频率。这样可以根据网络的特性和性能要求进行定制化的配置</li></ul><h2 id=实验6rip-与不连续子网 class=headerLink><a href=#%e5%ae%9e%e9%aa%8c6rip-%e4%b8%8e%e4%b8%8d%e8%bf%9e%e7%bb%ad%e5%ad%90%e7%bd%91 class=header-mark></a><strong>实验6：RIP 与不连续子网</strong></h2><h3 id=一实验目的-7 class=headerLink><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84-7 class=header-mark></a><strong>一、实验目的</strong></h3><ul><li>理解连续子网和不连续子网的概念</li><li>掌握RIPv1中解决不连续子网问题的方法</li><li>掌握RIPv2中解决不连续子网问题的方法</li><li>理解RIPv1与RIPv2的区别</li></ul><h3 id=二实验环境-7 class=headerLink><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83-7 class=header-mark></a><strong>二、实验环境</strong></h3><p><strong>基础配置拓扑：</strong><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102084.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102084.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102084.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102084.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102084.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102084.png 2x" sizes=auto alt=image.png></a></figure><strong>实验编址：</strong></p><table><thead><tr><th>设备</th><th>接口</th><th>IP</th><th>子网掩码</th><th>网关</th></tr></thead><tbody><tr><td>R1(Router)</td><td>E 0/0/0</td><td>10.0.12.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>R2(Router)</td><td>E 0/0/0</td><td>10.0.12.2</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>S 0/0/0</td><td>192.168.23.2</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>R3(Router)</td><td>S 0/0/0</td><td>192.168.23.3</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>S 0/0/1</td><td>192.168.34.3</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>R4(Router)</td><td>S 0/0/1</td><td>192.168.34.4</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>E 0/0/0</td><td>10.0.45.4</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>R5(Router)</td><td>E 0/0/0</td><td>10.0.45.5</td><td>255.255.255.0</td><td>N/A</td></tr></tbody></table><h3 id=三实验内容-7 class=headerLink><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9-7 class=header-mark></a><strong>三、实验内容</strong></h3><p>在某公司的网络整改项目中，原先 R1 和 R5 属于同一主网络 10.0.0.0／8，现被 R2、R3、R4 分离，整网采用了 RIPv1 协议，发现在该子网不连续的环境下通信出现了问题，现需要通过额外的配置来解决这些问题，以保证所有设备能够互通。</p><h3 id=四实验结果-7 class=headerLink><a href=#%e5%9b%9b%e5%ae%9e%e9%aa%8c%e7%bb%93%e6%9e%9c-7 class=header-mark></a><strong>四、实验结果</strong></h3><ol><li>基本配置</li></ol><p>根据实验编址进行基本配置（以 R3 为例，其他略）<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102152.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102152.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102152.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102152.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102152.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102152.png 2x" sizes=auto alt=image.png></a></figure></p><ol start=2><li>组件基本的 RIPv1 网络</li></ol><p>在 R1 R2 R3 R4 R5 上配置 RIPv1（以 R3 为例，其他略）<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102584.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102584.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102584.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102584.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102584.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102584.png 2x" sizes=auto alt=image.png></a></figure>配置完成后查看 R1 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102577.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102577.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102577.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102577.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102577.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102577.png 2x" sizes=auto alt=image.png></a></figure>在 R1 路由表中存在 192.168.23.0/24 和 192.168.34.0/24 两条 RIP 路由条目，但并不存在 R4 和 R5 之间的 10.0.45.0/24 路由条目
查看 R2 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102560.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102560.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102560.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102560.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102560.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102560.png 2x" sizes=auto alt=image.png></a></figure>R2 路由表中，除了 10.0.12.0/24 和 192.168.23.0/24 为直连路由外，仅有192.168.34.0/24 该条路由目录通过 RIP 接收，却没有 R4 和 R5 之间的 10.0.45.0/24 的路由条目
查看 R3 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102607.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102607.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102607.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102607.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102607.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102607.png 2x" sizes=auto alt=image.png></a></figure>在 R3 的路由表中，除了 192.168.23.0/24 和 192.168.34.0/24 这两个子网是直连之外，分别通过R2和R4接收到了两条相同的 10.0.0.0/8 的主网路由条目，而并非现网拓扑中的 10.0.12.0/24 和 10.0.45.0/24 两条子网路由。
导致这种情况的原因是：由于采用了 RIPv1，在 R2 和 R4 分别接收到 10.0.12.0/24 和 10.0.45.0/24 的路由条目时，默认打开了自动有类汇总功能，所以在主网边界向外发送路由信息的时候都汇总成了 10.0.0.0/8，发送给 R3，最终在 R3 上由于接收到了两条目标网段相同、代价值也相同的路由条目。
那么既然此时在 R3 的路由表中存在有 10.0.0.0/8 的路由，在 R3 上测试与 R1 和 R5 的连通性。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102593.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102593.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102593.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102593.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102593.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102593.png 2x" sizes=auto alt=image.png></a></figure>发现此时呈现出有一端无法通信的现象。在 R3 发送ICMP报文的时候，会根据路由表进行匹配，即匹配10.0.0.0/8，那么最终报文流量可能会出现 R3 将本该要发送给 R1 的 ICMP 报文错误地转发给了 R4，导致无法通信。
现在每台设备上的路由表中没有清晰地反馈出拓扑中的真实子网信息，这是由于在RIPv1 默认自动汇总开启的情况下，设计网络时没有遵循主网的子网应该连续这一要求所致，解决的办法视路由器所使用的RIP版本（v1还是v2）而有所不同。</p><ol start=3><li>RIPvl中解决不连续子网问题</li></ol><p>路由器上所运行 RIP 协议的默认版本是 v1，自动汇总无法关闭，所以上面不连续子网所带来的问题，不能通过关闭自动汇总来解决。但如果把不连续的子网转变成连续的子网，问题就可以解决，办法是给接口配置第二个 IP 地址，IP地址取 10.0.0.0/8 主网的子网。
在路由器 R2 上的 S 0/0/0 接口上配置从IP地址，只要在常规配置 IP 地址的命令之后加上 sub 参数即可。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102591.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102591.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102591.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102591.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102591.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102591.png 2x" sizes=auto alt=image.png></a></figure>同理，在 R3 和 R4 上也做相应配置，并在 R3 的 RIP 进程中添加 10.0.0.0 网段<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102017.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102017.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102017.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102017.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102017.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102017.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102042.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102042.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102042.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102042.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102042.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102042.png 2x" sizes=auto alt=image.png></a></figure>配置后相当于原先在整拓扑中被孤立的两个不连续子网 10.0.12.0/24 和 10.0.45.0/24 被新添加的子网 10.0.23.0/24 和 10.0.34.0/24 网段连接了起来，即现在已经构成了一个连续的子网，查看每台路由器的路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102142.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102142.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102142.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102142.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102142.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102142.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102120.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102120.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102120.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102120.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102120.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102120.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102131.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102131.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102131.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102131.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102131.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102131.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102162.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102162.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102162.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102162.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102162.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102162.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102332.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102332.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102332.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102332.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102332.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102332.png 2x" sizes=auto alt=image.png></a></figure>发现每台路由器的路由表中都拥有了所有的子网信息，其中在 R2 上，由于 R3 的 S 0/0/0 接口配置了第二IP 地址，所以下一条 R3 的 S 0/0/0 接口路由条目会出现两个下一跳地址
在 R1 上测试与 R5 的连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102674.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102674.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102674.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102674.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102674.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102674.png 2x" sizes=auto alt=image.png></a></figure>连通性测试成功。
上述做法通过在不连续的子网之间的链路上配置相同主网的子网 IP 地址，即采用配置从 IP 地址的方式来实现子网的连续性，解决了因为自动汇总发生后，子网路由被抑制掉而导致的子网不可达。此种做法优点是 RIPv1 在不做大的拓扑结构调整的前提下，仅靠配置第二个 IP 地址就解决了不连续子网问题；不足之处是需要配置第二个 IP 地址，要消耗掉多个子网网段。</p><ol start=4><li>RIPv2中解决不连续子网问题</li></ol><p>如果路由器运行的是 RIPv2，则可以直接关闭自动汇总，子网是否连续就不重要了，因为 RIPv2 会直接通告相应的子网路由。
删除上一步骤中的从 IP 地址配置命令，并在所有路由器中将 RIP 的版本配置为 2，且关闭自动汇总。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102598.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102598.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102598.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102598.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102598.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102598.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102660.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102660.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102660.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102660.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102660.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102660.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102719.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102719.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102719.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102719.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102719.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102719.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102886.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102886.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102886.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102886.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102886.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102886.png 2x" sizes=auto alt=image.png></a></figure>观察每台路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102058.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102058.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102058.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102058.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102058.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102058.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102072.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102072.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102072.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102072.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102072.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102072.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102136.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102136.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102136.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102136.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102136.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102136.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102131.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102131.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102131.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102131.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102131.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102131.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102142.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102142.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102142.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102142.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102142.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102142.png 2x" sizes=auto alt=image.png></a></figure>可以看到所在路由表中都没有汇总路由 10.0.0.0/8 并且 10.0.45.0/24 和 10.0.12.0/24 子网出现在所有的路由表中
测试 R1 R5 之间的连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102220.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102220.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102220.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102220.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102220.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102220.png 2x" sizes=auto alt=image.png></a></figure>在 RIPv2 的环境中，因为默认情况下自动汇总是开启的，所以在设计网络时，应尽量不要出现同主网的子网被其他主网分隔的情况。如果出现了，关闭自动汇总是最佳的做法，不足之处是路由表中路由条目会增加。</p><h3 id=五讨论与分析-7 class=headerLink><a href=#%e4%ba%94%e8%ae%a8%e8%ae%ba%e4%b8%8e%e5%88%86%e6%9e%90-7 class=header-mark></a><strong>五、讨论与分析</strong></h3><p><strong>思考</strong>
<strong>在使用 RIPv1 的环境中，R2、R3 和 R4 都配置了第二个IP地址，10.0.0.0/8 的子网已经连续，如果 R2是主网边界，为什么 R3 还能看到 10.0.12.0/24 的子网？如果 R2 不是主网边界，为什么在 R3 的路由表里能看到 10.0.0.0/8 的汇总路由？</strong>
R2 可能在其接口上配置了 10.0.12.0/24 的辅助地址，使得这个子网也成为了 R2 的直接相邻网络。因为RIPv1 发送的是主网络的路由信息，R3 会看到 R2 发送的 10.0.0.0/8 的主网路由，其中包含 10.0.12.0/24
<strong>收获</strong></p><ul><li>RIPv1是一种不支持子网掩码的协议。了解这一点意味着在RIPv1中，无法精确表示不连续子网，因为它将所有子网看作主网络。</li><li>学习RIP时，理解主网边界的概念，即一个路由器是否被认为是主网络的边界，对于理解RIP路由表中的汇总路由以及对不连续子网的处理非常重要。</li></ul><h2 id=实验7rip-的水平分割及触发更新 class=headerLink><a href=#%e5%ae%9e%e9%aa%8c7rip-%e7%9a%84%e6%b0%b4%e5%b9%b3%e5%88%86%e5%89%b2%e5%8f%8a%e8%a7%a6%e5%8f%91%e6%9b%b4%e6%96%b0 class=header-mark></a><strong>实验7：RIP 的水平分割及触发更新</strong></h2><h3 id=一实验目的-8 class=headerLink><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84-8 class=header-mark></a><strong>一、实验目的</strong></h3><ul><li>掌握RIP触发更新的原理</li><li>掌握RIP中触发更新与等待老化时间的现象差别</li><li>掌握R1P水平分割的原理和配置</li><li>掌握开启水平分割与关掉水平分割时路由条目的变化</li><li>掌握毒性逆转原理和配置</li></ul><h3 id=二实验环境-8 class=headerLink><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83-8 class=header-mark></a><strong>二、实验环境</strong></h3><p><strong>基础配置拓扑：</strong><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102523.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102523.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102523.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102523.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102523.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102523.png 2x" sizes=auto alt=image.png></a></figure><strong>实验编址：</strong></p><table><thead><tr><th>设备</th><th>接口</th><th>IP</th><th>子网掩码</th><th>网关</th></tr></thead><tbody><tr><td>R1(AR2220)</td><td>GE 0/0/0</td><td>172.16.1.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>GE 0/0/2</td><td>172.16.2.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>R2(AR2220)</td><td>GE 0/0/1</td><td>172.16.2.2</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>GE 0/0/0</td><td>192.168.2.254</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>R3(AR2220)</td><td>GE 0/0/1</td><td>172.16.1.2</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>GE 0/0/0</td><td>192.168.1.254</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>PC-1</td><td>E 0/0/1</td><td>192.168.2.1</td><td>255.255.255.0</td><td>192.168.2.254</td></tr><tr><td>PC-2</td><td>E 0/0/1</td><td>192.168.1.1</td><td>255.255.255.0</td><td>192.168.1.254</td></tr></tbody></table><h3 id=三实验内容-8 class=headerLink><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9-8 class=header-mark></a><strong>三、实验内容</strong></h3><p>本实验模拟企业网络场景。R1 为该公司出口网关路由器，连接运营商网络，R2 为公司IT部门路由器，通过交换机 S2 与网关相连；同时公司人力资源部路由器 R3 也通过交换机 S1 与网关相连，所有路由器运行路由协议 RIPv2 实现公司整网互通，当 R3 与 S1 之间链路 down 掉时 R1 不会触发更新，网络收敛较慢：而当 R1 与 S1 之间链路 down 掉时，R1 会触发更新，网络收敛快。华为路由器默认开启 RIP 水平分割功能，当主动关掉路由器上水平分割功能时，检查路由器发送 RIP 路由条目的变化。手动开启毒性逆转功能，检查路由器发送 RIP 路由条目的变化</p><h3 id=四实验结果-8 class=headerLink><a href=#%e5%9b%9b%e5%ae%9e%e9%aa%8c%e7%bb%93%e6%9e%9c-8 class=header-mark></a><strong>四、实验结果</strong></h3><ol><li>基本配置</li></ol><p>根据实验编址进行配置（以 R2 为例，其余略）<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102502.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102502.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102502.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102502.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102502.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102502.png 2x" sizes=auto alt=image.png></a></figure></p><ol start=2><li>搭建 RIP 网络</li></ol><p>在 R1 R2 R3 上配置 RIP 协议，并将相应网段通告进 RIP 协议中（以 R2 为例，其余略）<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102534.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102534.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102534.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102534.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102534.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102534.png 2x" sizes=auto alt=image.png></a></figure>配置完成后查看 R1 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102555.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102555.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102555.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102555.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102555.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102555.png 2x" sizes=auto alt=image.png></a></figure>观察到 R1 已经正常获取到了 PC-1 和 PC-2 所在网段的 RIP 路由信息</p><ol start=3><li>验证触发更新</li></ol><p>断掉 R3 与 S1 之间的链路（在模拟器上直接删除该链路）然后查看 R2 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102689.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102689.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102689.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102689.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102689.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102689.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102748.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102748.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102748.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102748.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102748.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102748.png 2x" sizes=auto alt=image.png></a></figure>观察到 192.168.1.0 网段路由信息仍存在，这是因为断掉的不是 R1 的直连接口，R1 此时无法直接感知到故障发生，路由条目需要等 180s 的老化计时器超时后此路由条目才会在路由表中删除
等待事件后再查看 R2 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102906.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102906.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102906.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102906.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102906.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102906.png 2x" sizes=auto alt=image.png></a></figure>观察到此时 192.168.1.0 网段的路由信息已经从路由表中删除
恢复链路，并在 R2 路由表正常后断掉 R1 与 S1 之间的链路，查看 R2 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102901.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102901.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102901.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102901.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102901.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102901.png 2x" sizes=auto alt=image.png></a></figure>观察到 192.168.1.0 网段的路由信息已经不存在了，因为断掉的是 R1 的直连接口，所以 R1 能够直接感知到链路发生故障，在路由表删除 192.168.1.0 的路由器同时，并会触发更新，使得 R2 路由表为最新状态</p><ol start=4><li>验证水平切割</li></ol><p>在 R2 上使用<code>**debugging rip 1 send GigabitEthernet 0/0/1**</code>命令打开 <strong>debug</strong> 功能，在再用<code>**terminal monitor**</code><strong>、</strong><code>**terminal debugging**</code>命令查看 R2 发送给 R1 的路由条目<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102917.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102917.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102917.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102917.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102917.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102917.png 2x" sizes=auto alt=image.png></a></figure>从 debug 信息可以观察到 R2 发送给 R1 的路由条目中没有包含 192.168.1.0 网段的路由信息，因为该路由条目是从 R1 始发过来的
下面关闭 debug ，并在 R2 GE 0/0/1 和 R1 GE 0/0/2 接口下使用 <code>**undo rip split-horizon**</code><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102921.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102921.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102921.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102921.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102921.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102921.png 2x" sizes=auto alt=image.png></a></figure>配置完成后查看 debug 信息<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102336.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102336.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102336.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102336.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102336.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102336.png 2x" sizes=auto alt=image.png></a></figure>从 debugging 信息可以看到 R2 发送给 R1 的路由条目中包含有 192.168.1.0 网段，此时接口上的水平分割功能不生效</p><ol start=5><li>验证毒性逆转</li></ol><p>关闭 debug 并在 R2 GE 0/0/1 接口下恢复水平分割功能<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102158.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102158.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102158.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102158.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102158.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102158.png 2x" sizes=auto alt=image.png></a></figure>配置完成后在 R2 上开启 debug 功能<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102289.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102289.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102289.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102289.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102289.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102289.png 2x" sizes=auto alt=image.png></a></figure>通过 debug 信息观察到此时开启了水平分割，R2 发送给 R1 的路由条目中没有包含 192.168.1.0 网段
关闭 debug 并在 R2 GE 0/0/1 接口下使用 <code>**rip poison-reverse**</code>命令开启毒性逆转功能<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102303.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102303.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102303.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102303.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102303.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102303.png 2x" sizes=auto alt=image.png></a></figure>配置完成后查看 debug 信息<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102294.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102294.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102294.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102294.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102294.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102294.png 2x" sizes=auto alt=image.png></a></figure>可以观察到，R2 发送给 R1 的路由条目中包含了 192.168.1.0 网段，但是 cost 值为 16。说明在毒性逆转和水平分割同时开启的情况下，简单的水平分割行为（从某接口学到的路由再从这个接口发布时将被抑制）会被毒性逆转行为代替。</p><h3 id=五讨论与分析-8 class=headerLink><a href=#%e4%ba%94%e8%ae%a8%e8%ae%ba%e4%b8%8e%e5%88%86%e6%9e%90-8 class=header-mark></a><strong>五、讨论与分析</strong></h3><p><strong>思考</strong>
<strong>水平分割可以防止环路，那为什么RIP协议还需要其他防环机制？水平分割的局限性在哪儿？</strong>
毒性逆转、Split Horizon
水平分割主要通过等待路由更新来防止环路的产生。然而，在RIP等协议中，这种定期广播更新的机制可能导致慢速的收敛。如果网络拓扑发生变化，需要一定的时间才能通知所有路由器，并且这期间环路仍然可能存在。
<strong>收获</strong></p><ul><li>学习水平分割在RIP协议中一种防止环路的机制。水平分割通过将路由器划分为几个区域，每个区域负责一部分目的网络，有助于防止由于路由信息传播而引起的环路。</li><li>学习了RIP中的触发更新有助于理解在网络变化时，及时向其他路由器通知变化信息的重要性。</li></ul><h2 id=实验8配置-rip-路由附加度量值 class=headerLink><a href=#%e5%ae%9e%e9%aa%8c8%e9%85%8d%e7%bd%ae-rip-%e8%b7%af%e7%94%b1%e9%99%84%e5%8a%a0%e5%ba%a6%e9%87%8f%e5%80%bc class=header-mark></a><strong>实验8：配置 RIP 路由附加度量值</strong></h2><h3 id=一实验目的-9 class=headerLink><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84-9 class=header-mark></a><strong>一、实验目的</strong></h3><ul><li>理解RIP路由附加度量值应用场景</li><li>掌握使用metricin方式附加度量值的方法</li><li>掌握使用metricout方式附加度量值的方法实验内容</li></ul><h3 id=二实验环境-9 class=headerLink><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83-9 class=header-mark></a><strong>二、实验环境</strong></h3><p><strong>基础配置拓扑：</strong><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102376.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102376.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102376.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102376.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102376.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102376.png 2x" sizes=auto alt=image.png></a></figure><strong>实验编址：</strong></p><table><thead><tr><th>设备</th><th>接口</th><th>IP</th><th>子网掩码</th><th>网关</th></tr></thead></table><p>|</p><p>R1(AR2220) | GE 0/0/0 | 10.0.12.1 | 255.255.255.0 | N/A |
| | GE 0/0/1 | 10.0.13.1 | 255.255.255.0 | N/A |
| | GE 0/0/2 | 192.168.1.254 | 255.255.255.0 | N/A |
| R2(AR2220) | GE 0/0/0 | 10.0.12.2 | 255.255.255.0 | N/A |
| | GE 0/0/1 | 10.0.24.2 | 255.255.255.0 | N/A |
| R3(AR2220) | GE 0/0/0 | 10.0.34.3 | 255.255.255.0 | N/A |
| | GE 0/0/1 | 10.0.13.3 | 255.255.255.0 | N/A |
|</p><p>R4(AR2220) | GE 0/0/0 | 10.0.34.4 | 255.255.255.0 | N/A |
| | GE 0/0/1 | 10.0.24.4 | 255.255.255.0 | N/A |
| | GE 0/0/2 | 192.168.2.254 | 255.255.255.0 | N/A |
| PC-1 | E 0/0/1 | 192.168.1.1 | 255.255.255.0 | 192.168.1.254 |
| PC-2 | E 0/0/1 | 192.168.2.1 | 255.255.255.0 | 192.168.2.254 |</p><h3 id=三实验内容-9 class=headerLink><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9-9 class=header-mark></a><strong>三、实验内容</strong></h3><p>本实验模拟公司网络场景。路由器 R1 左侧连接的是公司市场部，路由器 R4 右侧连接的是公司财务部，R1 与 R4 之间通过 R2、R3 双链路连接，所有路由器运行RIP协议，R1 与 R4 之间互访的流量通过两条链路负载分担。现在网络管理员在 R2 上做了流量控制，要求所有市场部访问财务部的流量都必须经过 R2，同时为了减轻 R2 的负担，由财务部去往市场部的流量都由 R3 来转发。网络管理员可通过两种 RIP 路由附加度量值的方式修改相应的路由度量值，灵活控制 RIP 的路由选择来达到公司的流量控制。</p><h3 id=四实验结果-9 class=headerLink><a href=#%e5%9b%9b%e5%ae%9e%e9%aa%8c%e7%bb%93%e6%9e%9c-9 class=header-mark></a><strong>四、实验结果</strong></h3><ol><li>基本配置</li></ol><p>根据实验编址进行基本配置（以 R1 为例，其他略）<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102577.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102577.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102577.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102577.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102577.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102577.png 2x" sizes=auto alt=image.png></a></figure></p><ol start=2><li>搭建 RIP 网络</li></ol><p>公司内部使用 RIP 协议，首先配置 R1 R2 R3 和 R4 运行 RIP 协议，通告所有网段，使公司网络互通（以 R1 为例，其他略）<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102659.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102659.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102659.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102659.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102659.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102659.png 2x" sizes=auto alt=image.png></a></figure>配置完成后查看 R1 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102685.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102685.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102685.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102685.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102685.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102685.png 2x" sizes=auto alt=image.png></a></figure>观察到 R1 上存在两条通过 RIP 协议接收到的去往财务部所在网段 192.168.2.0/24 的路由条目
同样在 R4 上查看路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102797.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102797.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102797.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102797.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102797.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102797.png 2x" sizes=auto alt=image.png></a></figure>同样可以观察到在 R4 上存在两条通过 RIP 协议接收到的去往市场部所在网段 192.168.1.0/24 的路由条目，且有两个下一跳，呈现负载分担。</p><ol start=3><li>配置RIP Metricin</li></ol><p>在 R1 的 GE 0／0／1接口下使用 rip metricin 2 命令，设置R1在接收R3发送来的路由条目时增加度量值2。这样由R3发给R1的路由条目的度量值将大于R2发给R1的路由，R1会优选R2发来的RIP路由条目，并加入路由表中。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102836.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102836.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102836.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102836.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102836.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102836.png 2x" sizes=auto alt=image.png></a></figure>配置完成后查看路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102969.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102969.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102969.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102969.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102969.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102969.png 2x" sizes=auto alt=image.png></a></figure>观察到此时R1 上访问财务部网段只有一个下一跳 R2，在 R1 上查看 RIP 的数据库<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102036.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102036.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102036.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102036.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102036.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102036.png 2x" sizes=auto alt=image.png></a></figure>观察到在 RIP 数据库中还是存在下一跳为 R3 的去往 192.168.2.0/24 网段的路由，但 cost 值被设为16，即不可达
在 PC-1 上测试访问 PC-2 所经过的网关设备<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102057.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102057.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102057.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102057.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102057.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102057.png 2x" sizes=auto alt=image.png></a></figure>可以观察到，数据包此时是经过 R2 转发至 PC-2 的</p><ol start=4><li>配置 RIP Metricout</li></ol><p>为了减轻R2的负担，所有由财务部去往市场部的流量都由R3来转发。
在 R2 上的 GE 0/0/1 接口下使用<code>**rip metricout 2**</code>命令，设置 R2 在向 R4 发送路由条目时增加度量值2。这样 R4 收到来自 R2 的路由的度量值就会大于来自 R3 的路由，R4 会优选来自 R3 的RIP路由条目，并加入到路由表中。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102271.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102271.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102271.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102271.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102271.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102271.png 2x" sizes=auto alt=image.png></a></figure>配置完成后查看路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102375.png title=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102375.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102375.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102375.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102375.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102375.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102375.png 2x" sizes=auto alt=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102375.png></a></figure>可以观察到此时 R4 上访问市场部网段只有下一跳 R3，在 PC-2 上测试访问 PC-2 所经过的网关设备<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102263.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102263.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102263.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102263.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102263.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102263.png 2x" sizes=auto alt=image.png></a></figure>可以观察到此时数据包是经过 R3 转发 PC-1 的</p><h3 id=五讨论与分析-9 class=headerLink><a href=#%e4%ba%94%e8%ae%a8%e8%ae%ba%e4%b8%8e%e5%88%86%e6%9e%90-9 class=header-mark></a><strong>五、讨论与分析</strong></h3><p><strong>收获</strong>
通过调整附加度量值，可以优化网络资源的使用，这在需要精确控制流量走向时特别有用。</p><h2 id=实验9rip-的故障处理 class=headerLink><a href=#%e5%ae%9e%e9%aa%8c9rip-%e7%9a%84%e6%95%85%e9%9a%9c%e5%a4%84%e7%90%86 class=header-mark></a><strong>实验9：RIP 的故障处理</strong></h2><h3 id=一实验目的-10 class=headerLink><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84-10 class=header-mark></a><strong>一、实验目的</strong></h3><ul><li>掌握RIP故障的常见原因</li><li>掌握RIP故障诊断流程</li><li>掌握RIP故障处理步骤</li><li>掌握RIP故障排除的常用命令</li></ul><h3 id=二实验环境-10 class=headerLink><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83-10 class=header-mark></a><strong>二、实验环境</strong></h3><p><strong>基础配置拓扑：</strong><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102467.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102467.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102467.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102467.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102467.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102467.png 2x" sizes=auto alt=image.png></a></figure><strong>实验编址：</strong></p><table><thead><tr><th>设备</th><th>接口</th><th>IP</th><th>子网掩码</th><th>网关</th></tr></thead><tbody><tr><td>R1(AR1220)</td><td>GE 0/0/0</td><td>192.168.1.2</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>GE 0/0/1</td><td>192.168.2.2</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>R2(AR1220)</td><td>GE 0/0/0</td><td>192.168.1.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>GE 0/0/1</td><td>172.16.1.254</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>R3(AR1220)</td><td>GE 0/0/1</td><td>192.168.2.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>GE 0/0/0</td><td>172.16.2.254</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>PC-1</td><td>E 0/0/1</td><td>172.16.1.1</td><td>255.255.255.0</td><td>172.16.1.254</td></tr><tr><td>PC-2</td><td>E 0/0/1</td><td>172.16.2.1</td><td>255.255.255.0</td><td>172.16.2.254</td></tr></tbody></table><h3 id=三实验内容-10 class=headerLink><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9-10 class=header-mark></a><strong>三、实验内容</strong></h3><p>本实验模拟企业网络场景。R1 为该公司出口网关路由器，连接运营商网络；R2为公司HR部门路由器与网关相连：由于公司的网络规模比较小，所以选择使用RIPv2来作为动态路由协议实现公司整网互通。现在公司IT部门员工发现用 PC-2 无法与 HR 部门的 PC-1通信，作为公司的网络管理员，现需对此网络故障进行排查，恢复网络。两台PC都确认了 IP地址和网关地址设置止确，现给出公司网络拓扑以及3台路由器的配置，请用模拟器搭建网络并把己经给出的配置拷贝入对应路由器中，再进行故障处理。本实验较全面地介绍了 RIP 的排障流程，适合大部分RIP网络。</p><h3 id=四实验结果-10 class=headerLink><a href=#%e5%9b%9b%e5%ae%9e%e9%aa%8c%e7%bb%93%e6%9e%9c-10 class=header-mark></a><strong>四、实验结果</strong></h3><ol><li>导入设备预配置</li></ol><p>本实验中设置了如下故障点：</p><ul><li>R3 缺少 <code>**network 192.168.2.0**</code> 命令；</li><li>在R3的GE 0/0/1接口下配置<code>**undo rip input**</code>命令;</li><li>关闭R1的GE 0/0/1接口；</li><li>在 R1 的 GE 0/0/0 接口 下配置 <code>**rip metricin 15**</code> 命令：</li><li>在R2的 GE 0/0/0 接口下配置 RIP 认证，方式为明文认证，密码huawei。</li></ul><p>下面即为3台路由器 R1、R2、R3 的初始配置，直接使用即可。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102502.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102502.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102502.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102502.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102502.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102502.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102587.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102587.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102587.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102587.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102587.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102587.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102959.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102959.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102959.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102959.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102959.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102959.png 2x" sizes=auto alt=image.png></a></figure></p><ol start=2><li>排除 R1 和 R2 间的故障</li></ol><p>网管发现公司网路此时出现故障，IT部门与HR部门的终端无法正常互访
测试IT部门和HR部门之间的连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102683.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102683.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102683.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102683.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102683.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102683.png 2x" sizes=auto alt=image.png></a></figure>观察到无法通信，即网络中存在故障，但此时网管不能确定故障位置，首先在 PC-1 上测试与 R2 连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102891.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102891.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102891.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102891.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102891.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102891.png 2x" sizes=auto alt=image.png></a></figure>观察到通信正常
路由器是根据路由表来进行数据转发的，所以在 R2 上使用<code>**display ip routing-table**</code>命令查看是否有 PC-2 所在网段的路由条目<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102908.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102908.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102908.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102908.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102908.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102908.png 2x" sizes=auto alt=image.png></a></figure>观察到 R2上没有任何通过 RIP 协议接收的路由信息，说明 R1 和 R2 间的 RIP 路由信息通告不正常，所以接下来需要在 R1 和 R2 之间排障
第一步，检查 R1 和 R2 所在直连链路上的物理接口状态是否正常<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102980.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102980.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102980.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102980.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102980.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102980.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102069.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102069.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102069.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102069.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102069.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102069.png 2x" sizes=auto alt=image.png></a></figure>观察到物理接口正常，在 R2 上测试与 R1 间直连链路的连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102061.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102061.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102061.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102061.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102061.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102061.png 2x" sizes=auto alt=image.png></a></figure>观察到通信正常
第二步，检查直连链路上的接口所在网段是否在 RIP 中通告<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102414.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102414.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102414.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102414.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102414.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102414.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102407.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102407.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102407.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102407.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102407.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102407.png 2x" sizes=auto alt=image.png></a></figure>观察到接口网段都已经在 RIP 中通告
第三步，检查 R1 和 R2 上的 RIP 协议发送版本号和本地接口接收的版本号是否匹配
在 R1 R2 上查看相应运行在 RIP 协议下的接口的详细信息<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102483.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102483.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102483.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102483.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102483.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102483.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102585.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102585.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102585.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102585.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102585.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102585.png 2x" sizes=auto alt=image.png></a></figure>观察到双方发送版本号和本地接口接收的版本号匹配
第四步，由于目前在 R2 上没有接收到 R1 发送过来的路由信息，所以继续在 R2 上的入接口检查是否配置了<code>**undo rip input**</code>、<code>**silent-interface**</code>命令
查看 R2 入接口 GE 0/0/0 的配置信息<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102596.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102596.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102596.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102596.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102596.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102596.png 2x" sizes=auto alt=image.png></a></figure>观察到 R2 入接口 GE 0/0/0 上并没有配置<code>**undo rip input**</code>、<code>**silent-interface**</code>命令
第五步，检查是否在 RIP 进程中配置了 **filter-policy **策略，来过滤收到的 RIP 路由或不允许发送 RIP 路由<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102837.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102837.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102837.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102837.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102837.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102837.png 2x" sizes=auto alt=image.png></a></figure></p><p>观察到没有配置策略
第六步，检查接口上是否已经开启水平分割，水平分割为默认开启，查看 R1 和 R2 相应接口上的 RIP 详细信息<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102125.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102125.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102125.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102125.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102125.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102125.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102981.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102981.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102981.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102981.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102981.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102981.png 2x" sizes=auto alt=image.png></a></figure>观察到接口下没有水平分割
第七步，检查链路两端的接口认证方式是否匹配，使用<code>display rip 1 statistics interface</code>命令查看 RIP 接口上的统计信息<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102040.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102040.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102040.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102040.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102040.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102040.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102060.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102060.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102060.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102060.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102060.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102060.png 2x" sizes=auto alt=image.png></a></figure>观察到有认证失败的 RIP 报文说明两端的 RIP 认证方式有问题，在双方路由器上执行<code>**display current-configuration**</code><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102068.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102068.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102068.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102068.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102068.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102068.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102308.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102308.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102308.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102308.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102308.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102308.png 2x" sizes=auto alt=image.png></a></figure>发现 R2 的 GE 0/0/0 接口下配置了 RIP 认证，而 R1 的 GE 0/0/0 接口下没有配置认证
进入 R2 的 GE 0/0/0 接口删除该认证命令<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102465.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102465.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102465.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102465.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102465.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102465.png 2x" sizes=auto alt=image.png></a></figure>配置完成后使用<code>**display ip routing-table protocol rip**</code>命令检查双方现在是否能够正常收发 RIP 路由<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102467.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102467.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102467.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102467.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102467.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102467.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102471.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102471.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102471.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102471.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102471.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102471.png 2x" sizes=auto alt=image.png></a></figure>发现仍没有相关 RIP 路由条目，继续下一步排查
第八步，查看路由表中是否存在从其他协议获得的相同路由，查看 R2 路由表信息<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102534.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102534.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102534.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102534.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102534.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102534.png 2x" sizes=auto alt=image.png></a></figure>观察到没有从其他协议获取的相同的路由
第九步，检查收到的路由量度值是否大于 16 ，该路由不可达，所以不会将该路由添加到路由表中，注意，如果操作到该步骤时距离导入预配置的时间过久将会无法查看到该结果
在 R1 上使用<code>display current-configuration | include rip</code>命令，查看包含字符串“rip”的所有配置信息<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102517.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102517.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102517.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102517.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102517.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102517.png 2x" sizes=auto alt=image.png></a></figure>发现 R1 上配置了<code>rip metricin 15</code>命令，将 GE 0/0/0 接口接收到的路由都加上了 15 的度量值，再放到路由表中，导致 172.16.1.0 网段的路由条目的度量值是 16
进入 GE 0/0/0 接口，删除该命令<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102800.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102800.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102800.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102800.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102800.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102800.png 2x" sizes=auto alt=image.png></a></figure>配置完成后，在 R1 上使用<code>display ip routing-table</code>检查路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102912.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102912.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102912.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102912.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102912.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102912.png 2x" sizes=auto alt=image.png></a></figure>发现 R1 已经收到 172.16.1.0 网段的路由信息，接收到 R2 通告的路由条目，即 R1 和 R2 之间的故障已排除完毕
但是此时 R1 仍然没有 R3 上 172.16.2.0 网段的路由信息，说明 R1 和 R3 间的 RIP 路由信息通告不正常接下来需要在 R1 和 R3 之间排障</p><ol start=3><li>排除 R1 与 R3 间的故障</li></ol><p>第一步，检查 R1 和 R3 所在直连链路上的物理接口状态是否正常<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102864.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102864.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102864.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102864.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102864.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102864.png 2x" sizes=auto alt=image.png></a></figure>可以观察到物理接口工作不正常，接口的物理状态和链路协议状态都不正常，并且“Physical”状态为“*down”，表示网管在该接口执行了 shutdown 命令
进入 R1 的 GE 0/0/1 接口，通过 <code>display this</code>命令查看接口配置<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102917.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102917.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102917.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102917.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102917.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102917.png 2x" sizes=auto alt=image.png></a></figure>发现果然有<code>shutdown</code>命令，在该接口配置<code>undo shutdown</code>命令<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102960.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102960.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102960.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102960.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102960.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102960.png 2x" sizes=auto alt=image.png></a></figure>配置完成后，测试连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102047.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102047.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102047.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102047.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102047.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102047.png 2x" sizes=auto alt=image.png></a></figure>现在恢复正常联通，查看 R1 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102229.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102229.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102229.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102229.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102229.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102229.png 2x" sizes=auto alt=image.png></a></figure>发现没有收到相关 的RIP 路由条目
第二步，检查直连链路上的接口所在网段是否在 RIP 中通告<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102411.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102411.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102411.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102411.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102411.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102411.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102342.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102342.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102342.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102342.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102342.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102342.png 2x" sizes=auto alt=image.png></a></figure>观察到双方能正常接收到对方 RIP 路由
最后在 PC-1 上测试 PC-2 间的连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102336.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102336.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102336.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102336.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102336.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102336.png 2x" sizes=auto alt=image.png></a></figure>通信正常，至此故障排除完成</p><h3 id=五讨论与分析-10 class=headerLink><a href=#%e4%ba%94%e8%ae%a8%e8%ae%ba%e4%b8%8e%e5%88%86%e6%9e%90-10 class=header-mark></a><strong>五、讨论与分析</strong></h3><p><strong>思考</strong>
<strong>如果采用 debug 或者抓包的方式排错，与采用查看命令进行排错相比有什么优劣？</strong></p><ul><li>优势</li></ul><p>debug 命令和抓包方式提供了更详细、实时的信息。您可以看到协议交换、数据包的内容等详细数据，有助于更深入地理解问题。
debug 命令和抓包方式能够实时监测网络活动，有助于捕捉问题发生的瞬间状态。这对于临时性的问题或需要快速定位的问题非常有用。
抓包可以帮助分析网络流量中的协议细节，包括数据包的结构、协议头部信息等，有助于发现协议交互中的问题。</p><ul><li>劣势</li></ul><p>查看命令的输出通常是持久性的，可以在长时间内对网络状态进行监控。而 debug 命令在启用后会产生大量实时输出，可能不适用于长时间的监测。
查看命令通常可以根据需要过滤信息，只显示特定类型的数据，有助于集中注意力在关键信息上。
<strong>收获</strong>
检查RIP路由器之间的物理和逻辑连接，确保网络连接正常。 RIP使用广播或组播来发送路由更新。确保广播或组播配置正确，以便路由器能够正确发送和接收RIP更新。</p><h2 id=实验10rip-的路由引入 class=headerLink><a href=#%e5%ae%9e%e9%aa%8c10rip-%e7%9a%84%e8%b7%af%e7%94%b1%e5%bc%95%e5%85%a5 class=header-mark></a><strong>实验10：RIP 的路由引入</strong></h2><h3 id=一实验目的-11 class=headerLink><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84-11 class=header-mark></a><strong>一、实验目的</strong></h3><ul><li>掌握RIP路由引入的应用场景</li><li>掌握在RIP中引入直连路由的配置</li><li>掌握在RIP中引入静态路由的配置</li><li>理解RIP抑制接口的使用场景</li></ul><h3 id=二实验环境-11 class=headerLink><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83-11 class=header-mark></a><strong>二、实验环境</strong></h3><p><strong>基础配置拓扑：</strong><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102599.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102599.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102599.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102599.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102599.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102599.png 2x" sizes=auto alt=image.png></a></figure><strong>实验编址：</strong></p><table><thead><tr><th>设备</th><th>接口</th><th>IP</th><th>子网掩码</th><th>网关</th></tr></thead></table><p>|</p><p>R1(AR2220) | GE 0/0/0 | 10.0.13.1 | 255.255.255.0 | N/A |
| | GE 0/0/1 | 10.0.12.1 | 255.255.255.0 | N/A |
| | GE 0/0/2 | 14.1.1.1 | 255.255.255.0 | N/A |
| R2(AR2220) | GE 0/0/0 | 192.168.2.254 | 255.255.255.0 | N/A |
| | GE 0/0/1 | 10.0.12.2 | 255.255.255.0 | N/A |
| R3(AR2220) | GE 0/0/0 | 192.168.3.254 | 255.255.255.0 | N/A |
| | GE 0/0/1 | 10.0.13.3 | 255.255.255.0 | N/A |
| R4(AR2220) | GE 0/0/1 | 14.1.1.4 | 255.255.255.0 | N/A |
| | GE 0/0/0 | 192.168.4.254 | 255.255.255.0 | N/A |
| PC-1 | E 0/0/1 | 192.168.2.1 | 255.255.255.0 | 192.168.2.254 |
| PC-2 | E 0/0/1 | 192.168.3.1 | 255.255.255.0 | 192.168.3.254 |
| PC-3 | E 0/0/1 | 192.168.4.1 | 255.255.255.0 | 192.168.4.254 |</p><h3 id=三实验内容-11 class=headerLink><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9-11 class=header-mark></a><strong>三、实验内容</strong></h3><p>A和B两家公司，R4是公司A的网关路由器，左侧连接的公司A内网:R1是公司B的网关路由器，右侧是公司B的内网。内网中的R2连接财务部门，R3连接研发部门，3台路由器运行RIP协议。财务部门和研发部门不希望接收到大量RIP的更新报文，通过把它们的网段当作外部网络引入到RIP中来实现。而在优化完公司B的RIP网络之后，要求公司B与公司A能够互相通信，现需要使用静态路由和路由引入技术使两家公司的网络能够互访。</p><h3 id=四实验结果-11 class=headerLink><a href=#%e5%9b%9b%e5%ae%9e%e9%aa%8c%e7%bb%93%e6%9e%9c-11 class=header-mark></a><strong>四、实验结果</strong></h3><ol><li>根据实验编址表进行基本配置（以 R1 为例，其他略）</li></ol><p><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102588.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102588.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102588.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102588.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102588.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102588.png 2x" sizes=auto alt=image.png></a></figure></p><ol start=2><li>搭建公司 B 的 RIP 网络</li></ol><p>以 R1 为例，其他略<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102685.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102685.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102685.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102685.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102685.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102685.png 2x" sizes=auto alt=image.png></a></figure>配置完成后查看 R1 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102834.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102834.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102834.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102834.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102834.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102834.png 2x" sizes=auto alt=image.png></a></figure>可以观察到此时公司 B 的网关路由器 R1 已经成功接收到了内网中财务部 192.168.2.0/24 和研发部门 192.168.3.0/24 网段的路由条目</p><ol start=3><li>优化公司 B 的 RIP 网络</li></ol><p>网管对网络进行维护，在 R2 的 GE 0/0/0 接口抓取数据包<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102847.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102847.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102847.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102847.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102847.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102847.png 2x" sizes=auto alt=image.png></a></figure>可以观察到，此时R2上连接财务部门终端一侧的接口上会通告 RIP 路由信息，而这些RIP报文对终端 PC 而言是毫无用处的。原因是使用network命令通告财务部门所在网段后，R2 GE 0/0/0 接口就会收发 RIP 协议报文，不管对端设备是否利用。
为了使财务部门的终端不接收这些无用 RIP 更新报文，可以在R2的RIP进程中不使用 network 命令通告该网段，而采用引入直连路由的方式来代替，将财务部门的网段作为外部路由发布到公司 RIP 网络中。
在 R2 上使用<code>**import-route**</code>命令配置路由引入，指定引入的源路由协议为直连路由<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102058.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102058.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102058.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102058.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102058.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102058.png 2x" sizes=auto alt=image.png></a></figure>配置完成后查看 R1路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102036.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102036.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102036.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102036.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102036.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102036.png 2x" sizes=auto alt=image.png></a></figure>可以观察到，R1 上接收到了 R2 引入的 192.168.2.0/24 网段的路由信息。再次在 R2 GE 0/0/0接口下抓包<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102065.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102065.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102065.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102065.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102065.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102065.png 2x" sizes=auto alt=image.png></a></figure>可以观察到，现在该接口上没有发送任何 RIP 更新报文，即此时已经完成优化，财务部门的终端不再收到与其无关的 RIP 更新报文。
可以在R2 GE 0/0/1接口上抓取数据包观察区别<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102051.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102051.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102051.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102051.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102051.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102051.png 2x" sizes=auto alt=image.png></a></figure>在 GE 1/0/1的接口上仍然正常发送 RIP 更新报文，将引入后的 192.168.2.0/24 网段通告出去。</p><ol start=4><li>连接公司 A 和公司 B 的网络</li></ol><p>在公司 B 网关 R1 上配置 192.168.4.0/24 网段的静态路由，并在RIP 进程中引入该条静态路由，引入后公司 B 中 RIP 网络内的所有路由器会通过 RIP 协议自动学习到该路由<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102273.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102273.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102273.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102273.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102273.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102273.png 2x" sizes=auto alt=image.png></a></figure>配置完成后查看公司 B 的 R2 R3 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102407.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102407.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102407.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102407.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102407.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102407.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102567.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102567.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102567.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102567.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102567.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102567.png 2x" sizes=auto alt=image.png></a></figure>观察到公司 B 内部路由 R2 R3 能够正常获得公司 A 内部网段的路由信息，但是此时公司 A 路由器上还没有公司 B 任何路由信息
在 R4 上配置一条默认路由，下一条为 R1，配置完后查看路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102504.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102504.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102504.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102504.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102504.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102504.png 2x" sizes=auto alt=image.png></a></figure>观察到静态路由配置成功
在 PC-1 和 PC-3 上测试连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102546.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102546.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102546.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102546.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102546.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102546.png 2x" sizes=auto alt=image.png></a></figure>通信正常，至此公司 A 和公司 B 之间能正常通信</p><h3 id=五讨论与分析-11 class=headerLink><a href=#%e4%ba%94%e8%ae%a8%e8%ae%ba%e4%b8%8e%e5%88%86%e6%9e%90-11 class=header-mark></a><strong>五、讨论与分析</strong></h3><p><strong>思考</strong>
**使用 <strong><code>**network**</code><strong>方式通告路由，与路由引入的方式通告路由有什么区别？</strong>
路由引入方式更为动态，可以通过将其他路由协议的路由引入RIP，实现不同路由协议之间的互通。
<code>**network**</code></strong> **方式更为静态，需要手动配置；路由引入方式更为动态，适应网络动态变化。</p><p><strong>收获</strong>
这次实验目的是在RIP中将路由引入，使路由信息在不同的协议之间传递，更加实用，贴合真正的企业网络架构</p></div><h2>相关内容</h2><div class=related-container><div class=related-item-container><h2 class=related-title><a href=/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A4/>[计算机网络]实验报告4</a></h2></div><div class=related-item-container><h2 class=related-title><a href=/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2/>[计算机网络]实验报告2</a></h2></div><div class=related-item-container><h2 class=related-title><a href=/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/>[计算机网络]实验报告1</a></h2></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2024-01-24</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><button title="分享到 Twitter" data-sharer=twitter data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A3/ data-title=[计算机网络]实验报告3 data-hashtags=计算机网络><span class="fab fa-twitter fa-fw"></span></button><button title="分享到 Facebook" data-sharer=facebook data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A3/ data-hashtag=计算机网络><span class="fab fa-facebook-square fa-fw"></span></button><button title="分享到 WhatsApp" data-sharer=whatsapp data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A3/ data-title=[计算机网络]实验报告3 data-web><span class="fab fa-whatsapp fa-fw"></span></button><button title="分享到 Line" data-sharer=line data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A3/ data-title=[计算机网络]实验报告3><span data-svg-src=/lib/simple-icons/icons/line.min.svg></span></button><button title="分享到 微博" data-sharer=weibo data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A3/ data-title=[计算机网络]实验报告3><span class="fab fa-weibo fa-fw"></span></button><button title="分享到 Myspace" data-sharer=myspace data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A3/ data-title=[计算机网络]实验报告3 data-description><span data-svg-src=/lib/simple-icons/icons/myspace.min.svg></span></button><button title="分享到 Blogger" data-sharer=blogger data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A3/ data-title=[计算机网络]实验报告3 data-description><span class="fab fa-blogger fa-fw"></span></button><button title="分享到 Evernote" data-sharer=evernote data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A3/ data-title=[计算机网络]实验报告3><span class="fab fa-evernote fa-fw"></span></button></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/>计算机网络</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2/ class=prev rel=prev title=[计算机网络]实验报告2><i class="fas fa-angle-left fa-fw"></i>[计算机网络]实验报告2</a>
<a href=/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A4/ class=next rel=next title=[计算机网络]实验报告4>[计算机网络]实验报告4<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2023 - 2024</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank rel="noopener noreferrer"></a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class=footer-line></div><div class=footer-line></div></div></footer></div><div id=fixed-buttons><a href=#back-to-top id=back-to-top-button class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><div id=cookieconsent-container></div><div class=assets><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/katex/copy-tex.min.css><noscript><link rel=stylesheet href=/lib/katex/copy-tex.min.css></noscript><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:10},comment:{},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},data:{"desktop-header-typeit":"Nexuzzz0's BLOG","mobile-header-typeit":"Nexuzzz0's BLOG"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{distance:100,findAllMatches:!1,highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!1,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"没有找到结果",snippetLength:50,threshold:.3,useExtendedSearch:!1},sharerjs:!0,table:{sort:!0},typeit:{cursorChar:"|",cursorSpeed:1e3,data:{"desktop-header-typeit":["desktop-header-typeit"],"mobile-header-typeit":["mobile-header-typeit"]},duration:-1,speed:100}}</script><script type=text/javascript src=/lib/tablesort/tablesort.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/lib/typeit/typeit.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js defer></script><script type=text/javascript src=/lib/katex/auto-render.min.js defer></script><script type=text/javascript src=/lib/katex/copy-tex.min.js defer></script><script type=text/javascript src=/lib/katex/mhchem.min.js defer></script><script type=text/javascript src=/js/katex.min.js defer></script><script type=text/javascript src=/lib/cookieconsent/cookieconsent.min.js defer></script><script type=text/javascript src=/js/cookieconsent.min.js defer></script><script type=text/javascript src=/js/theme.min.js defer></script></div></body></html>