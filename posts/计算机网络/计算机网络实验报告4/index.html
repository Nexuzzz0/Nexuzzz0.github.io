<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>[计算机网络]实验报告4 - Nexuzzz0</title><meta name=Description content="Nexuzzz0's BLOG"><meta property="og:title" content="[计算机网络]实验报告4">
<meta property="og:description" content="实验1：OSPF 多区域配置 一、实验目的 理解配置OSPF多区域的使用场景 掌握配置OSPF多区域的方法 理解OSPF区域边界路由器（ABR）的工作"><meta property="og:type" content="article"><meta property="og:url" content="https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A4/"><meta property="og:image" content="https://nexuzzz0.github.io/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-24T20:50:32+08:00"><meta property="article:modified_time" content="2024-01-24T20:50:32+08:00"><meta property="og:site_name" content="Nexuzzz0's BLOG"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://nexuzzz0.github.io/logo.png"><meta name=twitter:title content="[计算机网络]实验报告4"><meta name=twitter:description content="实验1：OSPF 多区域配置 一、实验目的 理解配置OSPF多区域的使用场景 掌握配置OSPF多区域的方法 理解OSPF区域边界路由器（ABR）的工作"><meta name=application-name content="Nexuzzz0's BLOG"><meta name=apple-mobile-web-app-title content="Nexuzzz0's BLOG"><meta name=theme-color content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A4/><link rel=prev href=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A3/><link rel=stylesheet href=/css/main.css><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/color.css><link rel=stylesheet href=/css/style.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/fontawesome-free/all.min.css><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/animate/animate.min.css><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"[计算机网络]实验报告4","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/nexuzzz0.github.io\/posts\/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C\/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A4\/"},"genre":"posts","keywords":"计算机网络","wordcount":5223,"url":"https:\/\/nexuzzz0.github.io\/posts\/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C\/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A4\/","datePublished":"2024-01-24T20:50:32+08:00","dateModified":"2024-01-24T20:50:32+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Nexuzzz0"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>function setTheme(e){document.body.setAttribute("theme",e),document.documentElement.style.setProperty("color-scheme",e==="light"?"light":"dark"),window.theme=e,window.isDark=window.theme!=="light"}function saveTheme(e){window.localStorage&&localStorage.setItem("theme",e)}function getMeta(e){const t=document.getElementsByTagName("meta");for(let n=0;n<t.length;n++)if(t[n].getAttribute("name")===e)return t[n];return""}if(window.localStorage&&localStorage.getItem("theme")){let e=localStorage.getItem("theme");e==="light"||e==="dark"||e==="black"?setTheme(e):setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}else"auto"==="light"||"auto"==="dark"||"auto"==="black"?(setTheme("auto"),saveTheme("auto")):(saveTheme("auto"),setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));let metaColors={light:"#f8f8f8",dark:"#252627",black:"#000000"};getMeta("theme-color").content=metaColors[document.body.getAttribute("theme")],window.switchThemeEventSet=new Set</script><div id=back-to-top></div><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=Nexuzzz0><span id=desktop-header-typeit class=typeit></span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw"></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i>
</span></span><a href=javascript:void(0); class="menu-item theme-select" title=切换主题><i class="fas fa-adjust fa-fw"></i>
<select class=color-theme-select id=theme-select-desktop title=切换主题><option value=light>浅色</option><option value=dark>深色</option><option value=black>黑色</option><option value=auto>跟随系统</option></select></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=Nexuzzz0><span id=mobile-header-typeit class=typeit></span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw"></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts/ title>文章</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/categories/ title>分类</a><a href=javascript:void(0); class="menu-item theme-select" title=切换主题>
<i class="fas fa-adjust fa-fw"></i>
<select class=color-theme-select id=theme-select-mobile title=切换主题><option value=light>浅色</option><option value=dark>深色</option><option value=black>黑色</option><option value=auto>跟随系统</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class="toc-content always-active" id=toc-content-auto><nav id=TableOfContents><ul><li><a href=#实验1ospf-多区域配置>实验1：OSPF 多区域配置</a><ul><li><a href=#一实验目的>一、实验目的</a></li><li><a href=#二实验环境>二、实验环境</a></li><li><a href=#三实验内容>三、实验内容</a></li><li><a href=#四实验结果>四、实验结果</a></li><li><a href=#五讨论与分析>五、讨论与分析</a></li></ul></li><li><a href=#实验2配置-ospf-的认证>实验2：配置 OSPF 的认证</a><ul><li><a href=#一实验目的-1>一、实验目的</a></li><li><a href=#二实验环境-1>二、实验环境</a></li><li><a href=#三实验内容-1>三、实验内容</a></li><li><a href=#四实验结果-1>四、实验结果</a></li><li><a href=#五讨论与分析-1>五、讨论与分析</a></li></ul></li><li><a href=#实验3ospf-的-dr-与-bdr><strong>实验3：OSPF 的 DR 与 BDR</strong></a><ul><li><a href=#一实验目的-2><strong>一、实验目的</strong></a></li><li><a href=#二实验环境-2><strong>二、实验环境</strong></a></li><li><a href=#三实验内容-2><strong>三、实验内容</strong></a></li><li><a href=#四实验结果-2><strong>四、实验结果</strong></a></li><li><a href=#五讨论与分析-2><strong>五、讨论与分析</strong></a></li></ul></li><li><a href=#实验4连接-rip-与-ospf-网络><strong>实验4：连接 RIP 与 OSPF 网络</strong></a><ul><li><a href=#一实验目的-3><strong>一、实验目的</strong></a></li><li><a href=#二实验环境-3><strong>二、实验环境</strong></a></li><li><a href=#三实验内容-3><strong>三、实验内容</strong></a></li><li><a href=#四实验结果-3><strong>四、实验结果</strong></a></li><li><a href=#五讨论与分析-3><strong>五、讨论与分析</strong></a></li></ul></li></ul></nav></div></div><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC","true")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">[计算机网络]实验报告4</h1><div class=post-meta><div class=post-meta-line><span class=post-author><span class="author fas fa-user-circle fa-fw"></span><a href=/ title=Author rel=author class=author>Nexuzzz0</a>
</span>&nbsp;<span class=post-category>收录于 </span>&nbsp;<span class=post-category>类别 <a href=/categories/%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/><i class="far fa-folder fa-fw"></i>实验报告</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2024-01-24>2024-01-24</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime=2024-01-24>2024-01-24</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 5223 字&nbsp;<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 11 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#实验1ospf-多区域配置>实验1：OSPF 多区域配置</a><ul><li><a href=#一实验目的>一、实验目的</a></li><li><a href=#二实验环境>二、实验环境</a></li><li><a href=#三实验内容>三、实验内容</a></li><li><a href=#四实验结果>四、实验结果</a></li><li><a href=#五讨论与分析>五、讨论与分析</a></li></ul></li><li><a href=#实验2配置-ospf-的认证>实验2：配置 OSPF 的认证</a><ul><li><a href=#一实验目的-1>一、实验目的</a></li><li><a href=#二实验环境-1>二、实验环境</a></li><li><a href=#三实验内容-1>三、实验内容</a></li><li><a href=#四实验结果-1>四、实验结果</a></li><li><a href=#五讨论与分析-1>五、讨论与分析</a></li></ul></li><li><a href=#实验3ospf-的-dr-与-bdr><strong>实验3：OSPF 的 DR 与 BDR</strong></a><ul><li><a href=#一实验目的-2><strong>一、实验目的</strong></a></li><li><a href=#二实验环境-2><strong>二、实验环境</strong></a></li><li><a href=#三实验内容-2><strong>三、实验内容</strong></a></li><li><a href=#四实验结果-2><strong>四、实验结果</strong></a></li><li><a href=#五讨论与分析-2><strong>五、讨论与分析</strong></a></li></ul></li><li><a href=#实验4连接-rip-与-ospf-网络><strong>实验4：连接 RIP 与 OSPF 网络</strong></a><ul><li><a href=#一实验目的-3><strong>一、实验目的</strong></a></li><li><a href=#二实验环境-3><strong>二、实验环境</strong></a></li><li><a href=#三实验内容-3><strong>三、实验内容</strong></a></li><li><a href=#四实验结果-3><strong>四、实验结果</strong></a></li><li><a href=#五讨论与分析-3><strong>五、讨论与分析</strong></a></li></ul></li></ul></nav></div></div><div class=content id=content><h2 id=实验1ospf-多区域配置 class=headerLink><a href=#%e5%ae%9e%e9%aa%8c1ospf-%e5%a4%9a%e5%8c%ba%e5%9f%9f%e9%85%8d%e7%bd%ae class=header-mark></a>实验1：OSPF 多区域配置</h2><h3 id=一实验目的 class=headerLink><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84 class=header-mark></a>一、实验目的</h3><ul><li>理解配置OSPF多区域的使用场景</li><li>掌握配置OSPF多区域的方法</li><li>理解OSPF区域边界路由器（ABR）的工作特点</li></ul><h3 id=二实验环境 class=headerLink><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83 class=header-mark></a>二、实验环境</h3><p><strong>基础配置拓扑：</strong><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102879.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102879.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102879.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102879.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102879.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102879.png 2x" sizes=auto alt=image.png></a></figure><strong>实验编址：</strong></p><table><thead><tr><th>设备</th><th>接口</th><th>IP</th><th>子网掩码</th><th>默认网关</th></tr></thead><tbody><tr><td>PC-1</td><td>E 0/0/1</td><td>10.0.1.1</td><td>255.255.255.0</td><td>10.0.1.254</td></tr><tr><td>PC-2</td><td>E 0/0/1</td><td>10.0.2.1</td><td>255.255.255.0</td><td>10.0.2.254</td></tr><tr><td>PC-3</td><td>E 0/0/1</td><td>10.0.3.1</td><td>255.255.255.0</td><td>10.0.3.254</td></tr><tr><td>PC-4</td><td>E 0/0/1</td><td>10.0.4.1</td><td>255.255.255.0</td><td>10.0.4.254</td></tr></tbody></table><p>|</p><p>R1(AR2240) | GE 0/0/0 | 10.0.12.1 | 255.255.255.0 | N/A |
| | GE 0/0/1 | 10.0.13.1 | 255.255.255.0 | N/A |
| | GE 0/0/2 | 10.0.15.1 | 255.255.255.0 | N/A |
|</p><p>R2(AR2240) | GE 0/0/0 | 10.0.12.2 | 255.255.255.0 | N/A |
| | GE 0/0/1 | 10.0.24.2 | 255.255.255.0 | N/A |
| | GE 0/0/2 | 10.0.26.2 | 255.255.255.0 | N/A |
|</p><p>R3(AR2240) | GE 0/0/0 | 10.0.34.3 | 255.255.255.0 | N/A |
| | GE 0/0/1 | 10.0.13.3 | 255.255.255.0 | N/A |
| | GE 0/0/2 | 10.0.35.3 | 255.255.255.0 | N/A |
| | GE 4/0/0 | 10.0.3.254 | 255.255.255.0 | N/A |
|</p><p>R4(AR2240) | GE 0/0/0 | 10.0.34.4 | 255.255.255.0 | N/A |
| | GE 0/0/1 | 10.0.24.4 | 255.255.255.0 | N/A |
| | GE 0/0/2 | 10.0.46.4 | 255.255.255.0 | N/A |
| | GE 4/0/0 | 10.0.4.254 | 255.255.255.0 | N/A |
|</p><p>R5(AR2240) | GE 0/0/0 | 10.0.15.5 | 255.255.255.0 | N/A |
| | GE 0/0/1 | 10.0.35.5 | 255.255.255.0 | N/A |
| | GE 0/0/2 | 10.0.1.254 | 255.255.255.0 | N/A |
|</p><p>R6(AR2240) | GE 0/0/0 | 10.0.226.6 | 255.255.255.0 | N/A |
| | GE 0/0/1 | 10.0.46.6 | 255.255.255.0 | N/A |
| | GE 0/0/2 | 10.0.2.254 | 255.255.255.0 | N/A |</p><h3 id=三实验内容 class=headerLink><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9 class=header-mark></a>三、实验内容</h3><p>本实验模拟企业网络场景。R1、R2、R3、R4 为企业总部核心区域设备，属于区域 0，R5 属于新增分支机构A的网关设备，R6 属于新增分支机构B的网关设备。PC-1 和 PC-2 分别属于分支机构A和B，PC-3 和 PC-4 属于总部管理员登录设备，用于管理网络。
在该网络中，如果设计方案采用单区域配置，则会导致单一区域 LSA 数目过于庞大，导致路由器开销过高，SPF 算法运算过于频繁。因此网络管理员选择配置多区域方案进行网络配置，将两个新分支运行在不同的 OSPF 区域中，其中 R5 属于区域 1，R6 属于区域 2。</p><h3 id=四实验结果 class=headerLink><a href=#%e5%9b%9b%e5%ae%9e%e9%aa%8c%e7%bb%93%e6%9e%9c class=header-mark></a>四、实验结果</h3><ol><li>基本配置</li></ol><p>根据实验编制进行基本配置（以 R3 为例）<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102525.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102525.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102525.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102525.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102525.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102525.png 2x" sizes=auto alt=image.png></a></figure></p><ol start=2><li>配置骨干路由器</li></ol><p>在公司总部路由器 R1 R2 R3 R4 上创建 OSPF 进程，并在骨干区域0视图下通告总部各网段（以 R1 为例）<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102469.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102469.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102469.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102469.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102469.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102469.png 2x" sizes=auto alt=image.png></a></figure>配置完成后用 PC-3 ping PC-4，发现可以正常通信，路由配置完成<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102473.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102473.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102473.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102473.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102473.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102473.png 2x" sizes=auto alt=image.png></a></figure></p><ol start=3><li>配置非骨干区域路由器</li></ol><p>在分支 A 的路由器 R5 上创建 OSPF 进程，创建并进入区域 1，并通告分支 A 的相应网段<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102485.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102485.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102485.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102485.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102485.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102485.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102483.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102483.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102483.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102483.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102483.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102483.png 2x" sizes=auto alt=image.png></a></figure>配置完成后查看 OSPF 邻居状态<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102941.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102941.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102941.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102941.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102941.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102941.png 2x" sizes=auto alt=image.png></a></figure>观察到 R5 与 R1 R3 的 OSPF 邻居关系建立正常
使用<code>**display ip routing-table protocol ospf**</code>命令查看 R5 路由表中的 OSPF 路由条目<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102204.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102204.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102204.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102204.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102204.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102204.png 2x" sizes=auto alt=image.png></a></figure>可以观察到，除OSPF区域2内的路由外，相关OSPF路由条目都已经获得。在拓扑中，R1和R3这两台连接不同区域的路由器称为ABR，即区域边界路由器，该类路由器设备可以同时属于两个以上的区域，但其中至少一个端口必须在骨干区域内。ABR是用来连接骨干区域和非骨干区域的，其与骨干区域之间既可以是物理连接，也可以是逻辑上的连接。
使用 <code>**display ospf lsdb**</code> 命令查看R5的OSPF链路状态数据库信息。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102024.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102024.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102024.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102024.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102024.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102024.png 2x" sizes=auto alt=image.png></a></figure>可以观察到，关于其他区域的路由条目都是通过“Sum—Net”这类LSA获得，而这类LSA是不参与本区域的SPF算法运算的。
对公司另一分部B的路由器R6，和相应ABR设备R2、R4也做同样的配置。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102976.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102976.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102976.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102976.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102976.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102976.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102002.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102002.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102002.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102002.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102002.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102002.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102414.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102414.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102414.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102414.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102414.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102414.png 2x" sizes=auto alt=image.png></a></figure>配置完成查看 R6 路由条目<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102534.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102534.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102534.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102534.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102534.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102534.png 2x" sizes=auto alt=image.png></a></figure>观察到可以正常接收路由条目
测试 PC-1 和 PC-2 连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102567.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102567.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102567.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102567.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102567.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102567.png 2x" sizes=auto alt=image.png></a></figure>观察到通信正常</p><h3 id=五讨论与分析 class=headerLink><a href=#%e4%ba%94%e8%ae%a8%e8%ae%ba%e4%b8%8e%e5%88%86%e6%9e%90 class=header-mark></a>五、讨论与分析</h3><p><strong>思考</strong>
<strong>在本实验中，如果现在公司总部配置的区域不是骨干区域0，而是其他非骨干区域，会出现什么现象？</strong>
OSPF区域之间的直接通信是受限的。非骨干区域之间不能直接交换路由信息，需要通过骨干区域进行中转。如果总部不在骨干区域，分支之间可能需要经过多个区域来实现通信，增加了路径的复杂性。
<strong>收获</strong>
本次实验学习了如何通过划分多个 OSPF 区域来优化网络配置，以降低开销和提高性能。了解了如何在骨干区域和非骨干区域配置 OSPF，以及如何通告不同区域的网段。学会了 ABR 在连接不同 OSPF 区域时的作用，以及如何配置 ABR 设备，使其能够同时属于两个以上的区域。</p><h2 id=实验2配置-ospf-的认证 class=headerLink><a href=#%e5%ae%9e%e9%aa%8c2%e9%85%8d%e7%bd%ae-ospf-%e7%9a%84%e8%ae%a4%e8%af%81 class=header-mark></a>实验2：配置 OSPF 的认证</h2><h3 id=一实验目的-1 class=headerLink><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84-1 class=header-mark></a>一、实验目的</h3><ul><li>理解OSPF认证的应用场景</li><li>理解OSPF区域认证和链路认证的区别</li><li>掌握配置OSPF区域认证的方法</li><li>掌握配置OSPF链路认证的方法实验内容</li></ul><h3 id=二实验环境-1 class=headerLink><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83-1 class=header-mark></a>二、实验环境</h3><p><strong>基础配置拓扑：</strong><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102554.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102554.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102554.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102554.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102554.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102554.png 2x" sizes=auto alt=image.png></a></figure><strong>实验编址：</strong></p><table><thead><tr><th>设备</th><th>接口</th><th>IP</th><th>子网掩码</th><th>默认网关</th></tr></thead><tbody><tr><td>R1(AR2220)</td><td>Loopback0</td><td>1.1.1.1</td><td>255.255.255.255</td><td>N/A</td></tr><tr><td></td><td>GE 0/0/0</td><td>10.0.12.1</td><td>255.255.255.0</td><td>N/A</td></tr></tbody></table><p>|</p><p>R2(AR2220) | Loopback0 | 2.2.2.2 | 255.255.255.255 | N/A |
| | GE 0/0/0 | 10.0.12.2 | 255.255.255.0 | N/A |
| | GE 0/0/1 | 10.0.24.2 | 255.255.255.0 | N/A |
| | GE 0/0/2 | 10.0.23.2 | 255.255.255.0 | N/A |
|</p><p>R3(AR2220) | Loopback0 | 3.3.3.3 | 255.255.255.255 | N/A |
| | GE 0/0/0 | 10.0.35.3 | 255.255.255.0 | N/A |
| | GE 0/0/1 | 10.0.36.3 | 255.255.255.0 | N/A |
| | GE 0/0/2 | 10.0.23.3 | 255.255.255.0 | N/A |
| R4(AR2220) | Loopback0 | 4.4.4.4 | 255.255.255.255 | N/A |
| | GE 0/0/0 | 10.0.24.4 | 255.255.255.0 | N/A |
| R5(AR2220) | Loopback0 | 5.5.5.5 | 255.255.255.255 | N/A |
| | GE 0/0/0 | 10.0.35.5 | 255.255.255.0 | N/A |
| R6(AR2220) | Loopback0 | 6.6.6.6 | 255.255.255.255 | N/A |
| | GE 0/0/0 | 10.0.36.6 | 255.255.255.0 | N/A |</p><h3 id=三实验内容-1 class=headerLink><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9-1 class=header-mark></a>三、实验内容</h3><p>本实验模拟企业网络环境。R3、R5、R6 属于公司总部骨干区域路由器，R2 为 ABR。公司分部路由器 R1 和 R4 都属于区域 1，但分属不通部门，R1 作为市场部门网关，R4作为财务部门网关。网络管理员在区域 0 和区域 1 上配置 OSPF 区域认证，其中区域 0 开启密文认证，区域1开启明文认证。为进一步提高该 OSPF 网络安全性，R2 和 R4 上单独设置密钥，配置 OSPF 链路认证。</p><h3 id=四实验结果-1 class=headerLink><a href=#%e5%9b%9b%e5%ae%9e%e9%aa%8c%e7%bb%93%e6%9e%9c-1 class=header-mark></a>四、实验结果</h3><ol><li>基本配置</li></ol><p>根据实验编址表进行基本配置（以 R3 为例）<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102543.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102543.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102543.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102543.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102543.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102543.png 2x" sizes=auto alt=image.png></a></figure></p><ol start=2><li>搭建 OSPF 网络</li></ol><p>在各台路由器上进行相关 OSPF 配置（以 R3 为例）<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102027.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102027.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102027.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102027.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102027.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102027.png 2x" sizes=auto alt=image.png></a></figure>配置完成后测试各设备上环回口的连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102353.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102353.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102353.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102353.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102353.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102353.png 2x" sizes=auto alt=image.png></a></figure>可以正常通信</p><ol start=3><li>配置公司分部 OSPF 区域明文认证</li></ol><p>在 R1 上 OSPF 的区域 1 下使用<code>**authentication-mode**</code>命令指定该区域使用认证模式为<code>simple</code>，即简单验证模式，配置命令为<code>huawei1</code>,并配置<code>plain</code>参数
配置<code>plain</code>参数后，可以使得在查看配置文件时，口令均以明文方式显示。如果不设置参数的话，在查看配置文件时，默认会以密文方式显示口令，即无法查看所配置的口令原文，这可以使非管理员用户在登录设备后无法查看到口令原文，从而提高安全性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102067.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102067.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102067.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102067.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102067.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102067.png 2x" sizes=auto alt=image.png></a></figure>观察到此时以明文的形式显示口令
在 R1 上重新配置区域认证命令，并查看配置<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102075.png title=捕获.PNG data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102075.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102075.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102075.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102075.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102075.png 2x" sizes=auto alt=捕获.PNG></a></figure>观察到口令以密文的形式显示
配置完成等待 OSPF 网络收敛之后查看 R1 和 R2 的 OSPF 邻居<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102092.png title=捕获.PNG data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102092.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102092.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102092.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102092.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102092.png 2x" sizes=auto alt=捕获.PNG></a></figure>观察到 R1 和 R2 的邻居关系中断，原因是目前仅仅在 R1 上配置了认证，导致 R1 和 R2 间的 OSPF 认证不匹配
继续配置 R2 保证验证模式一致，口令也一致<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102050.png title=捕获.PNG data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102050.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102050.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102050.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102050.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102050.png 2x" sizes=auto alt=捕获.PNG></a></figure>过段时间看两者邻居关系<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102548.png title=捕获.PNG data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102548.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102548.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102548.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102548.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102548.png 2x" sizes=auto alt=捕获.PNG></a></figure>观察到 R1 R2 邻居关系恢复正常，在 R4 上做相同配置<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png title=捕获.PNG data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png 2x" sizes=auto alt=捕获.PNG></a></figure>配置完成后在 R2 上查看邻居关系<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102641.png title=捕获.PNG data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102641.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102641.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102641.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102641.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102641.png 2x" sizes=auto alt=捕获.PNG></a></figure>现在区域 1 中的邻居关系正常</p><ol start=4><li>配置公司总部 OSPF 区域密文认证</li></ol><p>在 R2 上配置 <code>OSPF Area 0 </code>区域认证，使用验证模式为MD5，即MD5验证模式，验证字标符为1，配置口令为<code>huawei3</code>，同时在区域0的其他设备做同等配置（以 R2 为例）<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102612.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102612.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102612.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102612.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102612.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102612.png 2x" sizes=auto alt=image.png></a></figure>配置完成后查看 R3 的 OSPF 邻居状态<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102627.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102627.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102627.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102627.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102627.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102627.png 2x" sizes=auto alt=image.png></a></figure></p><ol start=5><li>配置 OSPF 链路认证</li></ol><p>在上面两个步骤中，使用了OSPF的区域认证方式配置了OSPF认证，使用链路认证方式配置可以达到同样的效果。如果采用链路认证的方式，就需要在同一OSPF的链路接口下都配置链路认证的命令，设置验证模式和口令等参数；而采用区域认证的方式时，在同一区域中，仅需在OSPF进程下的相应区域视图下配置一条命令来设置验证模式和口令即可，大大节省了配置量，所以在同一区域中如果有多台OSPF设备需要配置认证，建议选用区域认证的方式进行配置。
目前公司分部的OSPF区域中配置了简单模式的区域认证，为了进一步提升R2与R4之间的OSPF网络安全性，网络管理员需要在两台设备之间部署MD5验证模式的OSPF 链路认证。
在R2的GE 0/0/1接口下使用<code>ospf authentication—mode</code>命令配置链路认证，配置使用MD5验证模式，验证字标识符为1，口令为 <code>huawei5</code>。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102032.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102032.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102032.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102032.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102032.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102032.png 2x" sizes=auto alt=image.png></a></figure>等待一段时间查看 R2 邻居关系<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102139.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102139.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102139.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102139.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102139.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102139.png 2x" sizes=auto alt=image.png></a></figure>发现R2和R4间OSPF邻居关系已经消失。虽然已经配置好区域认证，但是如果同时配置了接口认证和区域认证时，会优先使用接口验证建立OSPF邻居。所以AR4在没有配置链路认证之前，AR2与AR4的邻居关系会因认证不匹配而无法建立
同样在R4上配置链路，注意，验证模式、标识符、口令都需要保持一致。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102150.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102150.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102150.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102150.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102150.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102150.png 2x" sizes=auto alt=image.png></a></figure>等待一段时间后查看 R4 邻居关系<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102162.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102162.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102162.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102162.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102162.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102162.png 2x" sizes=auto alt=image.png></a></figure>观察到邻居关系正常</p><h3 id=五讨论与分析-1 class=headerLink><a href=#%e4%ba%94%e8%ae%a8%e8%ae%ba%e4%b8%8e%e5%88%86%e6%9e%90-1 class=header-mark></a>五、讨论与分析</h3><p><strong>思考</strong>
<strong>OSPF 认证如果采用 MD5 验证模式，有没有办法可以获取其密钥内容？</strong>
由于MD5的特性，即便有一个MD5散列值，也很难通过逆向工程或解密来还原出原始的密钥内容。因此，一般情况下，除非使用强大的计算资源进行穷举攻击（暴力破解），否则几乎不可能直接从MD5散列值中获取原始密钥内容。
<strong>收获</strong></p><ul><li>学会配置和理解不同区域中的OSPF认证方式，包括明文认证和密文认证。这对于确保不同区域间的OSPF通信安全至关重要。</li><li>在实验中我了解到了区域认证和链路认证的不同之处。区域认证在整个OSPF区域中通用，而链路认证需要在每个连接的接口上配置。</li></ul><h2 id=实验3ospf-的-dr-与-bdr class=headerLink><a href=#%e5%ae%9e%e9%aa%8c3ospf-%e7%9a%84-dr-%e4%b8%8e-bdr class=header-mark></a><strong>实验3：OSPF 的 DR 与 BDR</strong></h2><h3 id=一实验目的-2 class=headerLink><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84-2 class=header-mark></a><strong>一、实验目的</strong></h3><ul><li>理解OSPF在哪种网络类型中会选举DR/BDR</li><li>掌握OSPF DR/BDR的选举规则</li><li>掌握如何更改设备接口上的DR优先级</li><li>理解OSPF DR/BDR选举的非抢占特性</li></ul><h3 id=二实验环境-2 class=headerLink><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83-2 class=header-mark></a><strong>二、实验环境</strong></h3><p><strong>基础配置拓扑：</strong><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102200.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102200.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102200.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102200.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102200.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102200.png 2x" sizes=auto alt=image.png></a></figure><strong>实验编址：</strong></p><table><thead><tr><th>设备</th><th>接口</th><th>IP</th><th>子网掩码</th><th>默认网关</th></tr></thead><tbody><tr><td>R1(AR2220)</td><td>GE 0/0/0</td><td>172.16.1.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>Loopback0</td><td>1.1.1.1</td><td>255.255.255.255</td><td>N/A</td></tr><tr><td>R2(AR2220)</td><td>GE 0/0/0</td><td>172.16.1.2</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>Loopback0</td><td>2.2.2.2</td><td>255.255.255.255</td><td>N/A</td></tr><tr><td>R3(AR2220)</td><td>GE 0/0/0</td><td>172.16.1.3</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>Loopback0</td><td>3.3.3.3</td><td>255.255.255.255</td><td>N/A</td></tr><tr><td>R4(AR2220)</td><td>GE 0/0/0</td><td>172.16.1.4</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>Loopback0</td><td>4.4.4.4</td><td>255.255.255.255</td><td>N/A</td></tr></tbody></table><h3 id=三实验内容-2 class=headerLink><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9-2 class=header-mark></a><strong>三、实验内容</strong></h3><p>某公司有4个部门，路由器R1连接到总经理办公室，路由器R2连接到人事部，R3连接到开发部，R4连接到市场部。4台路由器通过交换机S1互联，每台路由器都运行了OSPF 路由协议，都运行在区域0内，使得公司内部各部门网络能够互相通信。由于路由器通过广播网络互连，OSPF会选举DR和BDR，现网络管理员要配置使得性能较好的R1成为DR，性能次之的R2成为BDR，而性能最差的R4不能参加DR和BDR的选举，由此来完成网络的优化。</p><h3 id=四实验结果-2 class=headerLink><a href=#%e5%9b%9b%e5%ae%9e%e9%aa%8c%e7%bb%93%e6%9e%9c-2 class=header-mark></a><strong>四、实验结果</strong></h3><ol><li>基本配置</li></ol><p>根据实验编址进行基本配置（以 R1 为例）<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102232.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102232.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102232.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102232.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102232.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102232.png 2x" sizes=auto alt=image.png></a></figure></p><ol start=2><li>搭建基本的 OSPF 网络</li></ol><p>在四台路由器上执行基础OSPF网络配置，并将环回地址作为OSPF私有Router-ID，都运行在区域0内（以 R1 为例）<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102647.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102647.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102647.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102647.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102647.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102647.png 2x" sizes=auto alt=image.png></a></figure>配置完成后同时重启 4 台路由器上的 OSPF 进程或者直接同时重启设备<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102602.png 2x" sizes=auto alt=image.png></a></figure>重置后检查 OSPF 邻居建立情况，使用<code>**display ospf peer brief**</code>命令<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102575.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102575.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102575.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102575.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102575.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102575.png 2x" sizes=auto alt=image.png></a></figure>观察到 R1 此时已经和其他路由器成功建立起 OSPF 邻居关系</p><ol start=3><li>查看默认状况下的 DR/BDR 状况</li></ol><p>使用<code>display ospf peer</code>命令查看此时默认状况下 OSPF 网络中 DR/BDR 选举状况<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102635.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102635.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102635.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102635.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102635.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102635.png 2x" sizes=auto alt=image.png></a></figure>可以观察到在该广播网络中，此时R4为OSPF网络中的DR， R3为BDR.这是由于在默认情况下，每台路由器上的DR优先级都为 1，此时是通过Router-ID的数值高低进行比较的。
接下来在每台设备上的相关接口下使用<code>**ospf network-type p2mp**</code>命令修改OSPF的网络类型为点到多点。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102621.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102621.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102621.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102621.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102621.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102621.png 2x" sizes=auto alt=image.png></a></figure>配置完成后在 R1 上再次观察到此时 OSPF 的 DR/BDR 选举情况<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102730.png title=捕获.PNG data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102730.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102730.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102730.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102730.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102730.png 2x" sizes=auto alt=捕获.PNG></a></figure>观察到 DR/BDR 都为 none，验证了在点到多点的网络类型中不选举 DR/BDR，同样在点到多点网络中也是
现在根据要求网管要使用性能好的处理能力较强的 R1 成为 DR，性能次之的 R2 成为 BDR，而性能最差的 R4 不能参加 DR/BDR 的选举，由此来完成网络的优化
首先将 OSPF 网络类型还原为默认的广播网络类型<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102958.png title=捕获.PNG data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102958.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102958.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102958.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102958.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102958.png 2x" sizes=auto alt=捕获.PNG></a></figure>配置完成后修改 R1 GE 0/0/0 接口的 DR 优先级为 100,R2 为 50.R4 为 0.R3 默认保持不变<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102997.png title=捕获.PNG data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102997.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102997.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102997.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102997.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102997.png 2x" sizes=auto alt=捕获.PNG></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102083.png title=捕获.PNG data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102083.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102083.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102083.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102083.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102083.png 2x" sizes=auto alt=捕获.PNG></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102259.png title=捕获.PNG data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102259.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102259.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102259.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102259.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102259.png 2x" sizes=auto alt=捕获.PNG></a></figure>配置完成后查看各路由器 DR/BDR 选举情况<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102335.png title=捕获.PNG data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102335.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102335.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102335.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102335.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102335.png 2x" sizes=auto alt=捕获.PNG></a></figure>实现网络需求</p><h3 id=五讨论与分析-2 class=headerLink><a href=#%e4%ba%94%e8%ae%a8%e8%ae%ba%e4%b8%8e%e5%88%86%e6%9e%90-2 class=header-mark></a><strong>五、讨论与分析</strong></h3><p><strong>思考</strong>
<strong>在本实验步骤2中，基础的 OSPF 网络配置完毕后，为什么要同时重启 4 台路由器上的 OSPF 进程？</strong>
通过重新启动OSPF进程，路由器可以应用最新的配置信息，包括修改的Router ID和其他OSPF参数。这有助于确保配置更改生效。
<strong>收获</strong>
通过本次实验学会了通过调整DR和BDR的优先级来干预OSPF DR/BDR选举过程，从而控制特定路由器成为DR或BDR。</p><h2 id=实验4连接-rip-与-ospf-网络 class=headerLink><a href=#%e5%ae%9e%e9%aa%8c4%e8%bf%9e%e6%8e%a5-rip-%e4%b8%8e-ospf-%e7%bd%91%e7%bb%9c class=header-mark></a><strong>实验4：连接 RIP 与 OSPF 网络</strong></h2><h3 id=一实验目的-3 class=headerLink><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84-3 class=header-mark></a><strong>一、实验目的</strong></h3><ul><li>理解路由引入的应用场景</li><li>掌握RIP中引入其他协议的配置</li><li>掌握OSPF中引入其他协议的配置</li><li>掌握路由引入时修改开销值的方法</li></ul><h3 id=二实验环境-3 class=headerLink><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83-3 class=header-mark></a><strong>二、实验环境</strong></h3><p><strong>基础配置拓扑：</strong><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102515.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102515.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102515.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102515.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102515.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102515.png 2x" sizes=auto alt=image.png></a></figure><strong>实验编址：</strong><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102465.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102465.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102465.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102465.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102465.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102465.png 2x" sizes=auto alt=image.png></a></figure></p><h3 id=三实验内容-3 class=headerLink><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9-3 class=header-mark></a><strong>三、实验内容</strong></h3><p>路由器R1分别连接两家公司网络，R1左侧公司A内部网络运行RIP协议，公司B内部网络运行OSPF协议。由于业务发展需要，两家公司需要能够互相通信。但由于两家公司使用不同的路由协议，现需要在路由器R1上配置双向路由引入。</p><h3 id=四实验结果-3 class=headerLink><a href=#%e5%9b%9b%e5%ae%9e%e9%aa%8c%e7%bb%93%e6%9e%9c-3 class=header-mark></a><strong>四、实验结果</strong></h3><ol><li>基本配置</li></ol><p>根据实验编址进行基本配置（以 R3 为例）<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102480.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102480.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102480.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102480.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102480.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102480.png 2x" sizes=auto alt=image.png></a></figure></p><ol start=2><li>搭建 RIP 和 OSPF 网络</li></ol><p>公司A内部运行RIP协议。在R1和R2上配置RIP，进程号为1，启用RIPv2版本、自动关闭汇总，通告各自接口所在网段，R1在RIP中仅通告GE 0/0/0接口所在网段。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102500.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102500.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102500.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102500.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102500.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102500.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102691.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102691.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102691.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102691.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102691.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102691.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102825.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102825.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102825.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102825.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102825.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102825.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102926.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102926.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102926.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102926.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102926.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102926.png 2x" sizes=auto alt=image.png></a></figure>配置完成后查看 R1 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102981.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102981.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102981.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102981.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102981.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102981.png 2x" sizes=auto alt=image.png></a></figure>由于 R1 上同时运行了 RIP 和 OSPF 协议，可以观察到 R1 同时拥有公司A和公司B 的路由信息</p><ol start=3><li>配置双向路由引入</li></ol><p>在 R1 的 OSPF 进程中使用<code>**import-route rip**</code>命令引入 RIP 路由<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102020.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102020.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102020.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102020.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102020.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102020.png 2x" sizes=auto alt=image.png></a></figure>配置完成后查看 R3 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102049.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102049.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102049.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102049.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102049.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102049.png 2x" sizes=auto alt=image.png></a></figure>以观察到 R3 现在拥有公司 A 的路由信息
在 R1 的 RIP 进程中使用 <code>**import-route ospf**</code>命令引入 OSPF 路由<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102165.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102165.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102165.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102165.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102165.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102165.png 2x" sizes=auto alt=image.png></a></figure>配置完成后查看 R2 路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102347.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102347.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102347.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102347.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102347.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102347.png 2x" sizes=auto alt=image.png></a></figure>当配置路由引入后双方可以互相获得对方的路由信息，但是在各自的路由表中，开销都为默认值1。</p><ol start=4><li>手工配置引入时的开销值</li></ol><p>在 R1 的 RIP 进程中使用<code>**import-route ospf 1 cost 3**</code>命令修改开销值为3<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102344.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102344.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102344.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102344.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102344.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102344.png 2x" sizes=auto alt=image.png></a></figure>配置完成后在 R2 上查看 Cost 值变化情况<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102489.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102489.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102489.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102489.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102489.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242102489.png 2x" sizes=auto alt=image.png></a></figure>观察到 R2 路由表周昂两条路由的 Cost 值已经变为 4，这是因为还加上了 R2 接口上的 Cost 值 1</p><h3 id=五讨论与分析-3 class=headerLink><a href=#%e4%ba%94%e8%ae%a8%e8%ae%ba%e4%b8%8e%e5%88%86%e6%9e%90-3 class=header-mark></a><strong>五、讨论与分析</strong></h3><p><strong>思考</strong>
<strong>关于在路由引入时手工修改路由的 Cost 值，这么做还有其他用处吗？</strong>
修改 Cost 值可以影响路由器选择特定路径的优先级。如果某个路径希望被优先选择，可以增加它的 Cost 值。反之，如果希望降低某个路径的优先级，可以减小它的 Cost 值。
<strong>收获</strong>
本次实验学到了如何在路由器上同时配置不同的路由协议（RIP和OSPF），并了解了各自的配置步骤和命令。同时了解了在两个不同的公司网络中使用不同路由协议时，如何在路由器上配置双向路由引入，使得两个网络可以相互通信。</p></div><h2>相关内容</h2><div class=related-container><div class=related-item-container><h2 class=related-title><a href=/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A3/>[计算机网络]实验报告3</a></h2></div><div class=related-item-container><h2 class=related-title><a href=/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2/>[计算机网络]实验报告2</a></h2></div><div class=related-item-container><h2 class=related-title><a href=/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/>[计算机网络]实验报告1</a></h2></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2024-01-24</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><button title="分享到 Twitter" data-sharer=twitter data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A4/ data-title=[计算机网络]实验报告4 data-hashtags=计算机网络><span class="fab fa-twitter fa-fw"></span></button><button title="分享到 Facebook" data-sharer=facebook data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A4/ data-hashtag=计算机网络><span class="fab fa-facebook-square fa-fw"></span></button><button title="分享到 WhatsApp" data-sharer=whatsapp data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A4/ data-title=[计算机网络]实验报告4 data-web><span class="fab fa-whatsapp fa-fw"></span></button><button title="分享到 Line" data-sharer=line data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A4/ data-title=[计算机网络]实验报告4><span data-svg-src=/lib/simple-icons/icons/line.min.svg></span></button><button title="分享到 微博" data-sharer=weibo data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A4/ data-title=[计算机网络]实验报告4><span class="fab fa-weibo fa-fw"></span></button><button title="分享到 Myspace" data-sharer=myspace data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A4/ data-title=[计算机网络]实验报告4 data-description><span data-svg-src=/lib/simple-icons/icons/myspace.min.svg></span></button><button title="分享到 Blogger" data-sharer=blogger data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A4/ data-title=[计算机网络]实验报告4 data-description><span class="fab fa-blogger fa-fw"></span></button><button title="分享到 Evernote" data-sharer=evernote data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A4/ data-title=[计算机网络]实验报告4><span class="fab fa-evernote fa-fw"></span></button></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/>计算机网络</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A3/ class=prev rel=prev title=[计算机网络]实验报告3><i class="fas fa-angle-left fa-fw"></i>[计算机网络]实验报告3</a></div></div><div id=comments></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2023 - 2024</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank rel="noopener noreferrer"></a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class=footer-line></div><div class=footer-line></div></div></footer></div><div id=fixed-buttons><a href=#back-to-top id=back-to-top-button class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><div id=cookieconsent-container></div><div class=assets><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/katex/copy-tex.min.css><noscript><link rel=stylesheet href=/lib/katex/copy-tex.min.css></noscript><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:10},comment:{},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},data:{"desktop-header-typeit":"Nexuzzz0's BLOG","mobile-header-typeit":"Nexuzzz0's BLOG"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{distance:100,findAllMatches:!1,highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!1,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"没有找到结果",snippetLength:50,threshold:.3,useExtendedSearch:!1},sharerjs:!0,table:{sort:!0},typeit:{cursorChar:"|",cursorSpeed:1e3,data:{"desktop-header-typeit":["desktop-header-typeit"],"mobile-header-typeit":["mobile-header-typeit"]},duration:-1,speed:100}}</script><script type=text/javascript src=/lib/tablesort/tablesort.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/lib/typeit/typeit.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js defer></script><script type=text/javascript src=/lib/katex/auto-render.min.js defer></script><script type=text/javascript src=/lib/katex/copy-tex.min.js defer></script><script type=text/javascript src=/lib/katex/mhchem.min.js defer></script><script type=text/javascript src=/js/katex.min.js defer></script><script type=text/javascript src=/lib/cookieconsent/cookieconsent.min.js defer></script><script type=text/javascript src=/js/cookieconsent.min.js defer></script><script type=text/javascript src=/js/theme.min.js defer></script></div></body></html>