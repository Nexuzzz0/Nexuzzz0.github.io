<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>[计算机网络]实验报告2 - Nexuzzz0</title><meta name=Description content="Nexuzzz0's BLOG"><meta property="og:title" content="[计算机网络]实验报告2">
<meta property="og:description" content="实验1：VLAN 基础配置及 ACCESS 接口 一、实验目的 理解 VLAN 的应用场景 掌握 VLAN 的基本配置 掌握 Access 接口的配置方法 掌握 Access 接口加入相应 VLAN 的方法 二、实验环境实验拓"><meta property="og:type" content="article"><meta property="og:url" content="https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2/"><meta property="og:image" content="https://nexuzzz0.github.io/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-24T20:50:26+08:00"><meta property="article:modified_time" content="2024-01-24T20:50:26+08:00"><meta property="og:site_name" content="Nexuzzz0's BLOG"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://nexuzzz0.github.io/logo.png"><meta name=twitter:title content="[计算机网络]实验报告2"><meta name=twitter:description content="实验1：VLAN 基础配置及 ACCESS 接口 一、实验目的 理解 VLAN 的应用场景 掌握 VLAN 的基本配置 掌握 Access 接口的配置方法 掌握 Access 接口加入相应 VLAN 的方法 二、实验环境实验拓"><meta name=application-name content="Nexuzzz0's BLOG"><meta name=apple-mobile-web-app-title content="Nexuzzz0's BLOG"><meta name=theme-color content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2/><link rel=prev href=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/><link rel=next href=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A3/><link rel=stylesheet href=/css/main.css><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/color.css><link rel=stylesheet href=/css/style.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/fontawesome-free/all.min.css><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/animate/animate.min.css><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"[计算机网络]实验报告2","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/nexuzzz0.github.io\/posts\/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C\/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2\/"},"genre":"posts","keywords":"计算机网络","wordcount":8648,"url":"https:\/\/nexuzzz0.github.io\/posts\/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C\/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2\/","datePublished":"2024-01-24T20:50:26+08:00","dateModified":"2024-01-24T20:50:26+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Nexuzzz0"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>function setTheme(e){document.body.setAttribute("theme",e),document.documentElement.style.setProperty("color-scheme",e==="light"?"light":"dark"),window.theme=e,window.isDark=window.theme!=="light"}function saveTheme(e){window.localStorage&&localStorage.setItem("theme",e)}function getMeta(e){const t=document.getElementsByTagName("meta");for(let n=0;n<t.length;n++)if(t[n].getAttribute("name")===e)return t[n];return""}if(window.localStorage&&localStorage.getItem("theme")){let e=localStorage.getItem("theme");e==="light"||e==="dark"||e==="black"?setTheme(e):setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}else"auto"==="light"||"auto"==="dark"||"auto"==="black"?(setTheme("auto"),saveTheme("auto")):(saveTheme("auto"),setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));let metaColors={light:"#f8f8f8",dark:"#252627",black:"#000000"};getMeta("theme-color").content=metaColors[document.body.getAttribute("theme")],window.switchThemeEventSet=new Set</script><div id=back-to-top></div><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=Nexuzzz0><span id=desktop-header-typeit class=typeit></span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw"></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i>
</span></span><a href=javascript:void(0); class="menu-item theme-select" title=切换主题><i class="fas fa-adjust fa-fw"></i>
<select class=color-theme-select id=theme-select-desktop title=切换主题><option value=light>浅色</option><option value=dark>深色</option><option value=black>黑色</option><option value=auto>跟随系统</option></select></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=Nexuzzz0><span id=mobile-header-typeit class=typeit></span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw"></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts/ title>文章</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/categories/ title>分类</a><a href=javascript:void(0); class="menu-item theme-select" title=切换主题>
<i class="fas fa-adjust fa-fw"></i>
<select class=color-theme-select id=theme-select-mobile title=切换主题><option value=light>浅色</option><option value=dark>深色</option><option value=black>黑色</option><option value=auto>跟随系统</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class="toc-content always-active" id=toc-content-auto><nav id=TableOfContents><ul><li><a href=#实验1vlan--基础配置及-access-接口>实验1：VLAN 基础配置及 ACCESS 接口</a><ul><li><a href=#一实验目的>一、实验目的</a></li><li><a href=#二实验环境>二、实验环境</a></li><li><a href=#三实验内容>三、实验内容</a></li><li><a href=#四实验结果>四、实验结果</a></li><li><a href=#五讨论与分析>五、讨论与分析</a></li></ul></li><li><a href=#实验2配置-trunk-接口>实验2：配置 Trunk 接口</a><ul><li><a href=#一实验目的-1>一、实验目的</a></li><li><a href=#二实验环境-1>二、实验环境</a></li><li><a href=#三实验内容-1>三、实验内容</a></li><li><a href=#四实验结果-1>四、实验结果</a></li><li><a href=#五讨论与分析-1>五、讨论与分析</a></li></ul></li><li><a href=#实验3理解-hybird-接口的应用>实验3：理解 Hybird 接口的应用</a><ul><li><a href=#一实验目的-2>一、实验目的</a></li><li><a href=#二实验环境-2>二、实验环境</a></li><li><a href=#三实验内容-2>三、实验内容</a></li><li><a href=#四实验结果-2>四、实验结果</a></li><li><a href=#五讨论与分析-2>五、讨论与分析</a></li></ul></li><li><a href=#实验4利用单臂路由实现-vlan-间路由>实验4：利用单臂路由实现 VLAN 间路由</a><ul><li><a href=#一实验目的-3>一、实验目的</a></li><li><a href=#二实验环境-3>二、实验环境</a></li><li><a href=#三实验内容-3>三、实验内容</a></li><li><a href=#四实验结果-3>四、实验结果</a></li><li><a href=#五讨论与分析-3>五、讨论与分析</a></li></ul></li><li><a href=#实验5利用三层交换机实现-vlan-间路由>实验5：利用三层交换机实现 VLAN 间路由</a><ul><li><a href=#一实验目的-4>一、实验目的</a></li><li><a href=#二实验环境-4>二、实验环境</a></li><li><a href=#三实验内容-4>三、实验内容</a></li><li><a href=#四实验结果-4>四、实验结果</a></li><li><a href=#五讨论与分析-4>五、讨论与分析</a></li></ul></li></ul></nav></div></div><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC","true")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">[计算机网络]实验报告2</h1><div class=post-meta><div class=post-meta-line><span class=post-author><span class="author fas fa-user-circle fa-fw"></span><a href=/ title=Author rel=author class=author>Nexuzzz0</a>
</span>&nbsp;<span class=post-category>收录于 </span>&nbsp;<span class=post-category>类别 <a href=/categories/%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/><i class="far fa-folder fa-fw"></i>实验报告</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2024-01-24>2024-01-24</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime=2024-01-24>2024-01-24</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 8648 字&nbsp;<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 18 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#实验1vlan--基础配置及-access-接口>实验1：VLAN 基础配置及 ACCESS 接口</a><ul><li><a href=#一实验目的>一、实验目的</a></li><li><a href=#二实验环境>二、实验环境</a></li><li><a href=#三实验内容>三、实验内容</a></li><li><a href=#四实验结果>四、实验结果</a></li><li><a href=#五讨论与分析>五、讨论与分析</a></li></ul></li><li><a href=#实验2配置-trunk-接口>实验2：配置 Trunk 接口</a><ul><li><a href=#一实验目的-1>一、实验目的</a></li><li><a href=#二实验环境-1>二、实验环境</a></li><li><a href=#三实验内容-1>三、实验内容</a></li><li><a href=#四实验结果-1>四、实验结果</a></li><li><a href=#五讨论与分析-1>五、讨论与分析</a></li></ul></li><li><a href=#实验3理解-hybird-接口的应用>实验3：理解 Hybird 接口的应用</a><ul><li><a href=#一实验目的-2>一、实验目的</a></li><li><a href=#二实验环境-2>二、实验环境</a></li><li><a href=#三实验内容-2>三、实验内容</a></li><li><a href=#四实验结果-2>四、实验结果</a></li><li><a href=#五讨论与分析-2>五、讨论与分析</a></li></ul></li><li><a href=#实验4利用单臂路由实现-vlan-间路由>实验4：利用单臂路由实现 VLAN 间路由</a><ul><li><a href=#一实验目的-3>一、实验目的</a></li><li><a href=#二实验环境-3>二、实验环境</a></li><li><a href=#三实验内容-3>三、实验内容</a></li><li><a href=#四实验结果-3>四、实验结果</a></li><li><a href=#五讨论与分析-3>五、讨论与分析</a></li></ul></li><li><a href=#实验5利用三层交换机实现-vlan-间路由>实验5：利用三层交换机实现 VLAN 间路由</a><ul><li><a href=#一实验目的-4>一、实验目的</a></li><li><a href=#二实验环境-4>二、实验环境</a></li><li><a href=#三实验内容-4>三、实验内容</a></li><li><a href=#四实验结果-4>四、实验结果</a></li><li><a href=#五讨论与分析-4>五、讨论与分析</a></li></ul></li></ul></nav></div></div><div class=content id=content><div class="details admonition warning open"><div class="details-summary admonition-title"><i class="icon fas fa-exclamation-triangle fa-fwwarning"></i>警告<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content>本文最后更新于 <span class=timeago datetime=2024-01-24T20:50:26 title="January 24, 2024">2024-01-24</span>，文中内容可能已过时。</div></div></div><h2 id=实验1vlan--基础配置及-access-接口 class=headerLink><a href=#%e5%ae%9e%e9%aa%8c1vlan--%e5%9f%ba%e7%a1%80%e9%85%8d%e7%bd%ae%e5%8f%8a-access-%e6%8e%a5%e5%8f%a3 class=header-mark></a>实验1：VLAN 基础配置及 ACCESS 接口</h2><h3 id=一实验目的 class=headerLink><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84 class=header-mark></a>一、实验目的</h3><ul><li>理解 VLAN 的应用场景</li><li>掌握 VLAN 的基本配置</li><li>掌握 Access 接口的配置方法</li><li>掌握 Access 接口加入相应 VLAN 的方法</li></ul><h3 id=二实验环境 class=headerLink><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83 class=header-mark></a>二、实验环境</h3><p><strong>实验拓扑：</strong><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101065.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101065.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101065.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101065.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101065.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101065.png 2x" sizes=auto alt=image.png></a></figure><strong>实验编址：</strong></p><table><thead><tr><th>设备</th><th>接口</th><th>IP 地址</th><th>子网掩码</th><th>默认网关</th></tr></thead><tbody><tr><td>PC-1</td><td>Ethernet 0/0/1</td><td>10.1.1.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>PC-2</td><td>Ethernet 0/0/1</td><td>10.1.1.2</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>PC-3</td><td>Ethernet 0/0/1</td><td>10.1.1.3</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>PC-4</td><td>Ethernet 0/0/1</td><td>10.1.1.4</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>PC-5</td><td>Ethernet 0/0/1</td><td>10.1.1.5</td><td>255.255.255.0</td><td>N/A</td></tr></tbody></table><h3 id=三实验内容 class=headerLink><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9 class=header-mark></a>三、实验内容</h3><p>本实验模拟企业网络场景。公司内网是一个大的局域网，二层交换机 S1 放置在一 楼，在一楼办公的部门有IT部和人事部；二层交换机 S2 放置在二楼，在二楼办公的部门有市场部和研发部。由于交换机组成的是一个广播网，交换机连接的所有主机都能互 相通信，而公司策略是：不同部门之间的主机不能互相通信，同一部门内的主机才可以互相访问。因此需要在交换机上划分不同的 VLAN,并将连接主机的交换机接口配置成 Access 接口划分到相应 VLAN 内。</p><h3 id=四实验结果 class=headerLink><a href=#%e5%9b%9b%e5%ae%9e%e9%aa%8c%e7%bb%93%e6%9e%9c class=header-mark></a>四、实验结果</h3><ol><li>基本配置</li></ol><p>根据网络编址进行相应的基本 IP 地址配置，在此步骤中不要为交换机创建任何的 VLAN
使用<code>**ping**</code>命令检测各直连链路的连通性，，所有的 PC 都能相互通信<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101533.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101533.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101533.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101533.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101533.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101533.png 2x" sizes=auto alt=image.png></a></figure></p><ol start=2><li>创建 VLAN</li></ol><p>除默认 VLAN 1 外，其余 VLAN 需要通过命令来手工创建。创建 VLAN 有两种方式，一种是使用 vlan 命令一次创建单个 VLAN，另一种方式是使用<code>**vlan batch**</code>命令一次创建多个 VLAN。
S1 创建 VLAN 10 和 VLAN 20<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101485.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101485.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101485.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101485.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101485.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101485.png 2x" sizes=auto alt=image.png></a></figure>S2 创建 VLAN 30 和 VLAN 40<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101549.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101549.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101549.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101549.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101549.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101549.png 2x" sizes=auto alt=image.png></a></figure>在 S1 和 S2 上使用<code>**display vlan**</code>命令来查看 VLAN 的相关信息<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101762.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101762.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101762.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101762.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101762.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101762.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101563.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101563.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101563.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101563.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101563.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101563.png 2x" sizes=auto alt=image.png></a></figure>观察到 S1 和 S2 都成功创建相应的 VLAN 但目前没有任何接口加入创建的 VLAN 10 和 VLAN 20 中，默认情况下交换机上所有接口都属于 VLAN 1.</p><ol start=3><li>配置 Access 接口</li></ol><p>按照拓扑，使用<code>**port link-type access**</code>命令配置所有 S1 和 S2 交换机上连接 PC 的接口类型为 Access 类型接口，并使用<code>**port default vlan**</code>命令配置接口的默认 VLAN 并同时加入相应的 VLAN 中。默认情况下，所有接口的默认 VLAN ID 为 1。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101078.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101078.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101078.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101078.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101078.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101078.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101140.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101140.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101140.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101140.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101140.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101140.png 2x" sizes=auto alt=image.png></a></figure>配置完成后查看 S1 和 S2 上的 VLAN 信息<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101171.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101171.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101171.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101171.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101171.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101171.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101261.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101261.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101261.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101261.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101261.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101261.png 2x" sizes=auto alt=image.png></a></figure>可以观察到，目前两台交换机上连接的 PC 接口都已经加入到所属部门的 VLAN 当中</p><ol start=4><li>检查配置结构</li></ol><p>交换机上将不同接口加入各自不同的 VLAN 中后，属于相同 VLAN 的接口处于同一个广播域中，相互之间能直接通信。属于不同 VLAN 的接口是处于不同的广播域，相互之间不能直接通信。
在本实验环境中，只有同属于 IT 部门 VLAN 10 的两台主机 PC-1 和 PC-2 之间可以相互通信。其他部门间的 PC 之间无法通信。
在 IT 部门的终端 PC-1 上分别测试与同部门的终端 PC-2、人事部的 PC-3 间的连通信<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101343.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101343.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101343.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101343.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101343.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101343.png 2x" sizes=auto alt=image.png></a></figure>可以观察到，相同 VLAN 内的 PC 可以相互通信，不同 VLAN 内的 PC 无法通信</p><h3 id=五讨论与分析 class=headerLink><a href=#%e4%ba%94%e8%ae%a8%e8%ae%ba%e4%b8%8e%e5%88%86%e6%9e%90 class=header-mark></a>五、讨论与分析</h3><p><strong>思考</strong>
<strong>在本实验中，如果将 S2 的接口 E 0/0/5 配置为 Access 类型接口，并划入 VLAN 30 中，此时 PC-1 能否</strong><code>**ping**</code><strong>通 PC-4？PC-1 能否</strong><code>**ping**</code><strong>通 PC-5？为什么？</strong>
PC-1能够ping通PC-4，但无法ping通PC-5。这是因为它们所在的VLAN不同，不同VLAN之间默认情况下是隔离的，除非进行相应的路由配置或者使用三层交换机进行不同VLAN间的通信。
<strong>收获</strong>
学习 VLAN 及 Access 接口配置让我知道，VLAN允许将一个物理网络划分成多个逻辑网络，通过将不同部门或者用户组的流量分割到不同的VLAN中，可以避免广播风暴和冲突域扩展，从而提高网络的安全性和稳定性。</p><h2 id=实验2配置-trunk-接口 class=headerLink><a href=#%e5%ae%9e%e9%aa%8c2%e9%85%8d%e7%bd%ae-trunk-%e6%8e%a5%e5%8f%a3 class=header-mark></a>实验2：配置 Trunk 接口</h2><h3 id=一实验目的-1 class=headerLink><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84-1 class=header-mark></a>一、实验目的</h3><ul><li>理解干道链路的应用场景</li><li>掌握 Trunk 端口配置</li><li>掌握 Trunk 端口允许所有 VLAN 通过的配置方法</li><li>掌握 Trunk 端口允许特定 VLAN 通过的配置方法</li></ul><h3 id=二实验环境-1 class=headerLink><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83-1 class=header-mark></a>二、实验环境</h3><p><strong>实验拓扑：</strong><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101720.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101720.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101720.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101720.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101720.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101720.png 2x" sizes=auto alt=image.png></a></figure><strong>实验编址：</strong></p><table><thead><tr><th>设备</th><th>接口</th><th>IP 地址</th><th>子网掩码</th><th>默认网关</th></tr></thead><tbody><tr><td>PC-1</td><td>Ethernet 0/0/1</td><td>10.1.1.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>PC-2</td><td>Ethernet 0/0/1</td><td>10.1.1.2</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>PC-3</td><td>Ethernet 0/0/1</td><td>10.1.1.3</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>PC-4</td><td>Ethernet 0/0/1</td><td>10.1.1.4</td><td>255.255.255.0</td><td>N/A</td></tr></tbody></table><h3 id=三实验内容-1 class=headerLink><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9-1 class=header-mark></a>三、实验内容</h3><p>本实验模拟某公司网络场景。公司规模较大，员工200余名，内部网络是一个大的局域网。公司放置了多台接入交换机（如 S1 和 S2）负责员工的网络接入。接入交换机 之间通过汇聚交换机 S3 相连。公司通过划分 VLAN 来隔离广播域，由于员工较多，相同部门的员工通过不同交换机接入。为了保证在不同交换机下相同部门的员工能互相通信，需要配置交换机之间链路为干道模式，以实现相同 VLAN 跨交换机通信。</p><h3 id=四实验结果-1 class=headerLink><a href=#%e5%9b%9b%e5%ae%9e%e9%aa%8c%e7%bb%93%e6%9e%9c-1 class=header-mark></a>四、实验结果</h3><ol><li>基本配置</li></ol><p>根据实验编址进行 IP 地址配置，并使用<code>**ping**</code>命令检测各直连链路的连通性。在没有完成划分 VLAN 之前各 PC 之间都能互通（默认属于 VLAN）<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101667.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101667.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101667.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101667.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101667.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101667.png 2x" sizes=auto alt=image.png></a></figure></p><ol start=2><li>创建 VLAN，配置 Access 接口</li></ol><p>公司内网需要通过 VLAN 的划分来隔离不同的部门，需要在 3 台交换机 S1、S2、S3 上都分别创建 VLAN 10 和 VLAN 20，研发部员工都属于 VLAN 10，市场部员工都属于 VLAN 20<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101656.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101656.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101656.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101656.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101656.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101656.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101701.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101701.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101701.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101701.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101701.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101701.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101930.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101930.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101930.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101930.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101930.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101930.png 2x" sizes=auto alt=image.png></a></figure>配置完成后，使用<code>**display vlan**</code>命令查看所配置的 VLAN 信息<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101967.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101967.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101967.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101967.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101967.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101967.png 2x" sizes=auto alt=image.png></a></figure>可以观察到相关 VLAN 已经配置好，也可以用<code>**display vlan summary**</code>命令查看配置 VLAN 的简要信息<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101119.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101119.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101119.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101119.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101119.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101119.png 2x" sizes=auto alt=image.png></a></figure>在 S1 上配置 E 0/0/2 和 E 0/0/3 为 Access 接口，并划分相应的 VLAN<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101115.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101115.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101115.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101115.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101115.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101115.png 2x" sizes=auto alt=image.png></a></figure>在 S2 上配置 E 0/0/3 和 E 0/0/4 为 Access 接口，并划分相应的 VLAN<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101171.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101171.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101171.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101171.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101171.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101171.png 2x" sizes=auto alt=image.png></a></figure>配置完成后，使用<code>**display port vlan**</code>命令检查 VLAN 和接口配置情况<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101389.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101389.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101389.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101389.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101389.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101389.png 2x" sizes=auto alt=image.png></a></figure>可以观察到 PC 所连接的交换机接口都已经被配置成了 Access 模式，并且已经加入到了正确的 VLAN 中</p><ol start=3><li>配置 Trunk 接口</li></ol><p>将 PC 所接入的交换机接口都划入到对应的部门 VLAN 后，测试相同部门中的 PC 是否能通信。
测试 PC-1 和 PC-3 之间的连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101446.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101446.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101446.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101446.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101446.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101446.png 2x" sizes=auto alt=image.png></a></figure>测试 PC-2 和 PC-4 之间的连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101538.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101538.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101538.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101538.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101538.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101538.png 2x" sizes=auto alt=image.png></a></figure>可以观察到此时同部门的 PC 间不能通信
目前在该跨交换机实现相同 VLAN 通信的二层组网拓扑中，虽然与 PC 端相连的交换机接口上创建并划分了 VLAN 信息，但是在交换机与交换机之间相连的接口上并没有相应的 VLAN 信息，不能够识别和发送跨越交换机的 VLAN 报文，此时 VLAN 只具有在每台交换机上的本地意义，无法实现相同 VLAN 的跨交换机通信。
为了让交换机间能够识别和发送跨越交换机的 VLAN 报文，需要将交换机间相连的接口配置成为 Trunk 接口。配置时要明确被允许通过的 VLAN ，实现对 VLAN 流量传输的控制。
在 S1上配置 E 0/0/1 为 Trunk 接口，允许 VLAN 10 和 VLAN 20通过<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101581.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101581.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101581.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101581.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101581.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101581.png 2x" sizes=auto alt=image.png></a></figure>在 S2上配置 E 0/0/2 为 Trunk 接口，允许 VLAN 10 和 VLAN 20通过<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101609.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101609.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101609.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101609.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101609.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101609.png 2x" sizes=auto alt=image.png></a></figure>在 S3上配置 GE 0/0/1 和 GE 0/0/2 为 Trunk 接口，允许所有 VLAN 通过<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101665.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101665.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101665.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101665.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101665.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101665.png 2x" sizes=auto alt=image.png></a></figure>配置完成用<code>**display port vlan**</code>命令检查 Trunk 配置情况<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101024.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101024.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101024.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101024.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101024.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101024.png 2x" sizes=auto alt=image.png></a></figure>观察到 S3 的 GE 0/0/1 和 GE 0/0/2 成功配置为 Trunk 接口，允许所有 VLAN 通过
验证不同交换机上的相同部门的 PC 间的连通性
PC-1 和 PC-3<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101079.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101079.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101079.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101079.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101079.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101079.png 2x" sizes=auto alt=image.png></a></figure>PC-2 和 PC-4<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101099.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101099.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101099.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101099.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101099.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101099.png 2x" sizes=auto alt=image.png></a></figure>可以观察到此时同部门中的 PC 已经能成功通信</p><h3 id=五讨论与分析-1 class=headerLink><a href=#%e4%ba%94%e8%ae%a8%e8%ae%ba%e4%b8%8e%e5%88%86%e6%9e%90-1 class=header-mark></a>五、讨论与分析</h3><p><strong>思考</strong>
<strong>连接 PC 的交换机接口也可以成功配置成 Trunk 接口吗？为什么？</strong>
可以，但没必要。因为Trunk接口主要用于连接两个交换机，或者交换机与路由器之间，以传输多个VLAN的数据。连接PC的接口一般情况下使用Access接口。Access接口用于连接主机或者其他设备，它只能传输属于一个特定VLAN的数据。这样配置可以确保每个端口只传输特定VLAN的数据，避免了不同VLAN的数据混杂。
<strong>收获</strong>
学习了 Trunk 接口的配置让我了解到 Trunk 接口可以传输多个 VLAN 的数据。这使得它非常适合连接两个交换机或者交换机与路由器之间，可以通过合适的VLAN配置来实现网络隔离。</p><h2 id=实验3理解-hybird-接口的应用 class=headerLink><a href=#%e5%ae%9e%e9%aa%8c3%e7%90%86%e8%a7%a3-hybird-%e6%8e%a5%e5%8f%a3%e7%9a%84%e5%ba%94%e7%94%a8 class=header-mark></a>实验3：理解 Hybird 接口的应用</h2><h3 id=一实验目的-2 class=headerLink><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84-2 class=header-mark></a>一、实验目的</h3><ul><li>掌握配置 Hybird 接口的方法</li><li>理解 Hybird 接口处理 Untagged 数据帧过程</li><li>理解 Hybird 接口处理 Tagged 数据帧过程</li><li>理解 Hybird 接口的应用场景</li></ul><h3 id=二实验环境-2 class=headerLink><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83-2 class=header-mark></a>二、实验环境</h3><p><strong>实验拓扑：</strong><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101109.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101109.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101109.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101109.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101109.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101109.png 2x" sizes=auto alt=image.png></a></figure><strong>实验编址：</strong></p><table><thead><tr><th>设备</th><th>接口</th><th>IP 地址</th><th>子网掩码</th><th>默认网关</th></tr></thead><tbody><tr><td>PC-1</td><td>Ethernet 0/0/1</td><td>192.168.1.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>PC-2</td><td>Ethernet 0/0/1</td><td>192.168.1.2</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>PC-3</td><td>Ethernet 0/0/1</td><td>192.168.1.3</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>PC-4</td><td>Ethernet 0/0/1</td><td>192.168.1.4</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>PC-5</td><td>Ethernet 0/0/1</td><td>192.168.1.100</td><td>255.255.255.0</td><td>N/A</td></tr></tbody></table><h3 id=三实验内容-2 class=headerLink><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9-2 class=header-mark></a>三、实验内容</h3><p>某企业二层网络使用两台 S3700 交换机 S1 和 S2 ，且两台设备在不同的楼层。网络管理员规划了 3 个不同 VLAN, HR 部门使用 VLAN 10 ,市场部门使用 VLAN 20 , IT 部门使用 VLAN 30，现在需要让处于不同楼层的HR部门和市场部门实现部门内部通信， 而两部门之间不允许互相通信；IT部门可以访问任意部门。可以通过配置 Hybrid 接口来实现较复杂的 VLAN 控制。</p><h3 id=四实验结果-2 class=headerLink><a href=#%e5%9b%9b%e5%ae%9e%e9%aa%8c%e7%bb%93%e6%9e%9c-2 class=header-mark></a>四、实验结果</h3><ol><li>基本配置</li></ol><p>使用<code>ping</code>命令测试主机之间的连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101120.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101120.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101120.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101120.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101120.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101120.png 2x" sizes=auto alt=image.png></a></figure>在没有定义 VLAN 及接口类型之前，默认状况下，所有交换机接口都是 Hybird 类型，接口的 PVID 是 VLAN 1，即所有接口收到没有标签的二层数据帧，都被转发到 VLAN 1 中，并继续以 Untagged 的方式把帧发送至同为 VLAN 1 的其他接口，所有，即使未做任何配置，主机之间默认任然可以相互通信
S1 上使用<code>**display port vlan**</code>查看接口默认类型<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101188.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101188.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101188.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101188.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101188.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101188.png 2x" sizes=auto alt=image.png></a></figure>接口默认 Hybird 类型，接口 PVID 是 VLAN 1，其他接口也一样
在交换机上使用<code>**display vlan**</code>命令查看接口和所属 VLAN 的对应关系<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101668.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101668.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101668.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101668.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101668.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101668.png 2x" sizes=auto alt=image.png></a></figure>观察到所有接口默认属于 VLAN 1，其他交换机都一样，因此 VLAN 1 内所有的主机都可以访问到</p><ol start=2><li>实现组内通信、组间隔离</li></ol><p>将 S1 上的 E 0/0/2 和 S2 上的 E 0/0/2 配置为 Access 类型，并将相应的接口加入到 VLAN 20 ，同理，将 S1 上的 E 0/0/3 和 S2 上的 E 0/0/3 也配置为 Access 类型接口，并加入到 VLAN 10。而交换机之间的互联链路的两个 E 0/0/1 接口则配置为 Trunk 类型
S1：<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101660.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101660.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101660.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101660.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101660.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101660.png 2x" sizes=auto alt=image.png></a></figure>S2：<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101681.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101681.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101681.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101681.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101681.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101681.png 2x" sizes=auto alt=image.png></a></figure>配置完成后，查看接口和 VLAN 的对应关系
S1：<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101708.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101708.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101708.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101708.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101708.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101708.png 2x" sizes=auto alt=image.png></a></figure>S2：<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101745.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101745.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101745.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101745.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101745.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101745.png 2x" sizes=auto alt=image.png></a></figure>观察到配置生效
在 PC-1 上测试与同 VLAN 20 的 PC-3 的连通性，以及与 VLAN 10 内终端的连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101721.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101721.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101721.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101721.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101721.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101721.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101330.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101330.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101330.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101330.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101330.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101330.png 2x" sizes=auto alt=image.png></a></figure>可以观察到，在单台交换机及跨交换机间的访问控制使用 Trunk 和 Access 类型接口实现了需求，但同样的需求使用 Hybrid 实现会更灵活。
S1 的 E 0/0/2 接口连接 PC-1 主机 该接口收到的 PC-1 发送的 Untagged 的帧会被交换机转发到 VLAN 20。同样，交换机从其他接口收到 VLAN 20 的发往 PC-1 的帧也会以 Untagged 的方式从 E 0/0/2 接口发送。S1 的 E 0/0/3 接口连接 PC-2 主机，该接口收到 Untagged 的帧会被转发到 VLAN 10。如果交换机收到的VLAN 10 的发往 PC-2 的帧也会以 Untagged 的方式从接口 E 0/0/3 发送。VLAN 10 和 VLAN 20 的帧也要经过交换机间链路发送至邻居交换机 S2。反之，S1 收到来自邻居交换机 S2 的 Tagged 的帧后，也会根据 VLAN Tag 转发到相应的 VLAN。
在 S1 的 E 0/0/2 接口上使用<code>**undo port default vlan**</code>命令用来恢复接口默认 VLAN。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101384.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101384.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101384.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101384.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101384.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101384.png 2x" sizes=auto alt=image.png></a></figure>配置<code>**port link-type hybrid**</code>命令修改接口类型为默认的 Hybrid 类型<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101306.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101306.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101306.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101306.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101306.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101306.png 2x" sizes=auto alt=image.png></a></figure>配置<code>**port hybrid untagged vlan 20**</code>命令使得交换机在该接口转发 VLAN 20 的帧时，剥离掉相应的VLAN Tag 20，以 Untagged 的方式发送给 PC<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101308.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101308.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101308.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101308.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101308.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101308.png 2x" sizes=auto alt=image.png></a></figure>配置<code>**port hybrid pvid vlan 20**</code>命令设置 Hybrid 类型接口的默认 VLAN ID，即使得该端口上接收到 PC 发来的未带 VLAN Tag 的帧时，加上 VLAN Tag 20，并转发到 VLAN 20<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101343.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101343.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101343.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101343.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101343.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101343.png 2x" sizes=auto alt=image.png></a></figure>同样在 E 0/0/3 接口做同样的配置<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101322.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101322.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101322.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101322.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101322.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101322.png 2x" sizes=auto alt=image.png></a></figure>在连接交换机 S2 的 E 0/0/1 接口上修改端口类型为默认的 Hybrid 类型，并使用<code>port hybrid tagged vlan 10 20</code>命令设置该链路仅接收带有 VLAN Tag 10 和 20 的帧，而交换 机也仅转发 VLAN 10 和 VLAN 20 的帧到该链路。一般该命令配置在交换机互连的链路接口之上。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101888.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101888.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101888.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101888.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101888.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101888.png 2x" sizes=auto alt=image.png></a></figure>S2 交换机将在 E 0/0/1 接口接收到的 Tagged 帧,根据 VLAN Tag 标识，向接口 E 0/0/2 转发 VLAN 20 的帧，向接口 E 0/0/3转发 VLAN 30 的帧。反之，接口 E 0/0/2接收到PC 发送的未带Tag的帧转发到VLAN 20,端口 E 0/0/3 接收的到未带 Tag 的帧会被转发到 VLAN 10,并且这些帧发送到邻居交换机 S1时，会保留原有 Tag。
S2 配置和 S1 类似<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101935.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101935.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101935.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101935.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101935.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101935.png 2x" sizes=auto alt=image.png></a></figure>配置完成后，使用<code>display vlan</code>查看 Hybrid 配置下接口和 VLAN 的对应关系<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101977.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101977.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101977.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101977.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101977.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101977.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101966.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101966.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101966.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101966.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101966.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101966.png 2x" sizes=auto alt=image.png></a></figure>可以观察到同样的需求 Hybrid 灵活性高于 Access 和 Trunk</p><ol start=3><li>实现网管员对所有网络的访问</li></ol><p>在实现各部门内部终端可以互相访问，不同部门间的终端隔离访问后，要求网络管理员所在的IT部门（使用终端PC-5）能够实现对所有部门的访问。即要求实现VLAN 30 访问VLAN 10和VLAN 20, VLAN 10和VLAN 20之间仍然不允许互相访问。如果S1的E 0/0/2接口仍是Access类型且属于VLAN 10,则不能被其他VLAN访问。若要 VLAN 30 的终端能访问VLAN 10的终端，则需要修改接口的配置，使其既能被VLAN 10访问， 又能被V LAN 30 访问，这就要求此接口同时要属于多个VLAN,且端口所连设备是PC, 不能识别带VLAN Tag的帧，故此时只能使用Hybrid类型接口。Hybrid端口既能被加入多个VLAN中，又能够在将其余VLAN的帧转发到此接口时，剥离掉相应的VLAN Tag。
配置 S1 交换机，E 0/0/4 接口是网络管理员的PC终端，属于VLAN 30,该接口收到的PC发送的 Untagged帧要能够发送至VLAN 30中，配置<code>**port hybrid pvid vlan 30**</code>命令设置 Untagged 帧加入至 VLAN 30。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101900.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101900.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101900.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101900.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101900.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101900.png 2x" sizes=auto alt=image.png></a></figure>S1交换机收到 VLAN 10、VLAN 20 和 VLAN 30 的帧也要能够从该接口发送至 PC, 配置<code>**port hybrid untagged vlan 10 20 30**</code>命令使得上述3个VLAN的帧会以Untagged的方式从该接口发送出去。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101171.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101171.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101171.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101171.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101171.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101171.png 2x" sizes=auto alt=image.png></a></figure>同理，端口 E0/0/2接PC・1,接口收到PC的Untagged帧需要发送至 VLAN 20,使 用<code>port hybrid pvid vlan 20</code>命令。E 0/0/2 接口同时也要能够被 VLAN 30 和 VLAN 20 的主机访问，即VLAN 20和30的帧能够从该接口发送出去，并以Untagged的方式发 送至PC-1。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101409.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101409.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101409.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101409.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101409.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101409.png 2x" sizes=auto alt=image.png></a></figure>VLAN10 、VLAN20和VLAN30的帧要能够发送至邻居交换机S2,且要保留原有的 VLAN Tag,以便于邻居交换机S2根据VLAN Tag继续转发到相应的VLAN。同样，邻居交换机S2发送过来的帧也会带有相应的VLAN Tag,所以S1与S2间互连的接口 E 0/0/1配置如下。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101478.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101478.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101478.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101478.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101478.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101478.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101415.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101415.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101415.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101415.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101415.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101415.png 2x" sizes=auto alt=image.png></a></figure>同理在S2交换机上,E 0/0/1 接口收到的带有相应 VLAN Tag 标记的帧,如果是 VLAN 10 的帧要能发送至接口 E 0/0/3,如果是 VLAN 20 的帧要能发送至 E 0/0/2。而如果是 VLAN 30的帧要能发送至接口 E 0/0/2和E 0/0/3。VLAN 10、20和30的帧都是以 Untagged 的方式发送至接口 E 0/0/2 或 E 0/0/3。反之，如果 PC-3发出的Untagged的帧发送至接 口 E 0/0/2时会进入到Hybrid接口 PVID所指明的 VLAN 20中，PC-4发出的 Untagged 的帧发送至接口 E 0/0/3时会进入到Hybrid接口 PVID 所指明的 VLAN 10中<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101431.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101431.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101431.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101431.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101431.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101431.png 2x" sizes=auto alt=image.png></a></figure>使用<code>**ping**</code>在网管员的 PC-5 上测试与不同部门内的各主机间的连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101543.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101543.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101543.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101543.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101543.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101543.png 2x" sizes=auto alt=image.png></a></figure>PC-5 所属网管员所在的 VLAN 30，能够正常访问其他部门的所有终端
同理，选择市场部门所在 VLAN 20 内的主机 PC-1，测试其与其他主机间的连通性
测试 PC-1 与本部门内的主机 PC-3 连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101824.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101824.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101824.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101824.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101824.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101824.png 2x" sizes=auto alt=image.png></a></figure>测试 PC-1 与外部门的主机 PC-2 连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101893.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101893.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101893.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101893.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101893.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101893.png 2x" sizes=auto alt=image.png></a></figure>不能通信，达到实验要求
测试 PC-1 与网管员主机 PC-5 连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101990.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101990.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101990.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101990.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101990.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101990.png 2x" sizes=auto alt=image.png></a></figure>可以通信</p><h3 id=五讨论与分析-2 class=headerLink><a href=#%e4%ba%94%e8%ae%a8%e8%ae%ba%e4%b8%8e%e5%88%86%e6%9e%90-2 class=header-mark></a>五、讨论与分析</h3><p><strong>思考</strong>
<strong>在本实验中，如果将 PC-5 所连交换机的接口 E 0/0/4 下的</strong><code>**port hybrid pvid 30**</code><strong>命令删除，PC-4 所连的端口 E 0/0/3 下</strong><code>**port hybrid pvid 10**</code><strong>命令删除，其他端口配置则保持不变。此时在 PC-5 与 PC-4 间的连通性是否正常？报文经过 S1 和 S2 间端口时使用的 VLAN Tag 是哪个？为什么？</strong></p><ol><li><strong>PC-5与PC-4间的连通性是否正常？</strong></li></ol><p>连通性正常</p><ol start=2><li><strong>报文经过S1和S2间端口时使用的VLAN Tag是哪个？</strong></li></ol><p>报文会使用VLAN 10、20和30的标签</p><ol start=3><li><strong>为什么？</strong></li></ol><p>当端口被配置为Trunk接口时，它会传输所有的 VLAN 数据，并且在交换机之间传输时，数据包会被打上 VLAN Tag。因此，当报文从 PC-5 传输到 S1，然后通过 Trunk 连接到 S2，最终到达 PC-4 时，它的VLAN Tag 将被正确地保留和识别，确保报文在不同 VLAN 之间正确地传输。
<strong>收获</strong>
学习 Hybrid 接口应用让我明白 Hybrid 接口既可以传输单个 VLAN 的数据（Access 模式），也可以传输多个 VLAN 的数据（Trunk 模式）。这种灵活性使得 Hybrid 接口非常适合连接多个 VLAN 的设备，例如连接多个交换机之间，或者连接交换机与路由器之间。同时 Hybrid 接口允许管理员在不同端口上配置不同的VLAN。这意味着不同端口可以属于不同的 VLAN，从而实现了对不同部门或用户组的灵活管理。这对于大规模网络中的VLAN隔离和管理非常有用。</p><h2 id=实验4利用单臂路由实现-vlan-间路由 class=headerLink><a href=#%e5%ae%9e%e9%aa%8c4%e5%88%a9%e7%94%a8%e5%8d%95%e8%87%82%e8%b7%af%e7%94%b1%e5%ae%9e%e7%8e%b0-vlan-%e9%97%b4%e8%b7%af%e7%94%b1 class=header-mark></a>实验4：利用单臂路由实现 VLAN 间路由</h2><h3 id=一实验目的-3 class=headerLink><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84-3 class=header-mark></a>一、实验目的</h3><ul><li>理解单臂路由的应用场景</li><li>掌握路由器子接口的配置方法</li><li>掌握子接口封装 VLAN 的配置方法</li><li>理解单臂路由的工作原理</li></ul><h3 id=二实验环境-3 class=headerLink><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83-3 class=header-mark></a>二、实验环境</h3><p><strong>实验拓扑：</strong><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101900.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101900.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101900.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101900.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101900.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101900.png 2x" sizes=auto alt=image.png></a></figure><strong>实验编址：</strong></p><table><thead><tr><th>设备</th><th>接口</th><th>IP 地址</th><th>子网掩码</th><th>默认网关</th></tr></thead></table><p>|</p><p>R1(AR2220) | GE 0/0/1.1 | 192.168.1.254 | 255.255.255.0 | N/A |
| | GE 0/0/1.2 | 192.168.2.254 | 255.255.255.0 | N/A |
| | GE 0/0/1.3 | 192.168.3.254 | 255.255.255.0 | N/A |
| PC-1 | Ethernet 0/0/1 | 192.168.1.1 | 255.255.255.0 | 192.168.1.254 |
| PC-2 | Ethernet 0/0/1 | 192.168.2.1 | 255.255.255.0 | 192.168.2.254 |
| PC-3 | Ethernet 0/0/1 | 192.168.3.1 | 255.255.255.0 | 192.168.3.254 |</p><h3 id=三实验内容-3 class=headerLink><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9-3 class=header-mark></a>三、实验内容</h3><p>本实验模拟公司网络场景。路由器R1是公司的出口网关，员工PC通过接入层交换 机（如S2和S3）接入公司网络，接入层交换机又通过汇聚交换机SI与路由器R1相连。 公司内部网络通过划分不同的VLAN隔离了不同部门之间的二层通信，保证各部门间的 信息安全，但是由于业务需要，经理、市场部和人事部之间需要能实现跨VLAN通信， 网络管理员决定借助路由器的三层功能，通过配置单臂路由来实现。</p><h3 id=四实验结果-3 class=headerLink><a href=#%e5%9b%9b%e5%ae%9e%e9%aa%8c%e7%bb%93%e6%9e%9c-3 class=header-mark></a>四、实验结果</h3><ol><li>创建 VlAN 并配置 Access、Trunk 接口</li></ol><p>在 S2 上创建 VLAN 10 和 VlAN 20，并连接 PC-1 的 E 0/0/1 和连接 PC-2 的 E 0/0/2 接口配置为 Access 类型接口，并划分到相应的 VLAN 中<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101106.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101106.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101106.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101106.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101106.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101106.png 2x" sizes=auto alt=image.png></a></figure>在 S3 上创建 VLAN 30，把连接 PC-3 的 E 0/0/1 接口配置为 Access 类型接口，并划分到 VLAN 30<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101040.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101040.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101040.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101040.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101040.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101040.png 2x" sizes=auto alt=image.png></a></figure>交换机之间或交换机和路由器之间相连的接口需要传递多个 VLAN 信息，需要配置成 Trunk 接口
将 S2 和 S3 的 GE 0/0/2 接口配置成 Trunk 类型，并允许所有 VlAN 通过<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101359.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101359.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101359.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101359.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101359.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101359.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101429.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101429.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101429.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101429.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101429.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101429.png 2x" sizes=auto alt=image.png></a></figure>在 S1 上创建 VLAN 10、20和30，并配置交换机和路由器相连的接口为 Trunk，允许所有 VLAN 通过<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101494.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101494.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101494.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101494.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101494.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101494.png 2x" sizes=auto alt=image.png></a></figure></p><ol start=2><li>配置路由器子接口和 IP 地址</li></ol><p>由于路由器 R1 只有一个实际的物理接口与交换机 S1 相连，可以在路由器上配置不同的逻辑子接口来作为不同 VLAN 的网关，从而达到节省路由器接口的目的。
在 R1 上创建子接口 GE 0/0/1.1，配置 IP 地址 192.168.1.254/24，作为人事部网关地址
在 R1 上创建子接口 GE 0/0/1.2，配置 IP 地址 192.168.2.254/24，作为市场部网关地址
在 R1 上创建子接口 GE 0/0/1.3，配置 IP 地址 192.168.3.254/24，作为经理的网关地址<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101451.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101451.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101451.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101451.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101451.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101451.png 2x" sizes=auto alt=image.png></a></figure>在 PC-1 上测试与 PC-2 和 PC-3 连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101564.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101564.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101564.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101564.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101564.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101564.png 2x" sizes=auto alt=image.png></a></figure>观察到通信仍无法建立</p><ol start=3><li>配置路由器子接口封装 VLAN</li></ol><p>在 R1 的子接口 GE 0/0/1 上封装 VLAN 10，在子接口 GE 0/0/2 上封装 VLAN 20，在子接口 GE 0/0/3 上封装 VLAN 30，并开启子接口的 ARP 广播功能
使用<code>**dotlq termination vid**</code>命令配置子接口对一层tag报文的终结功能。即配置该命令后，路由器子接口在接收带有VLAN tag的报文时，将剥掉tag进行三层转发，在发送报文时，会将与该子接口对应VLAN的VLAN tag添加到报文中。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101589.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101589.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101589.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101589.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101589.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101589.png 2x" sizes=auto alt=image.png></a></figure>使用<code>**arp broadcast enable**</code>命令开启子接口的ARP广播功能。如果不配置该命令， 将会导致该子接口无法主动发送ARP广播报文，以及向外转发IP报文。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101791.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101791.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101791.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101791.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101791.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101791.png 2x" sizes=auto alt=image.png></a></figure>同理配置 GE 0/0/2 和 GE 0/0/3<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101848.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101848.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101848.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101848.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101848.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101848.png 2x" sizes=auto alt=image.png></a></figure>配置完成后，在路由器 R1 上查看接口状态<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101969.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101969.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101969.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101969.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101969.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101969.png 2x" sizes=auto alt=image.png></a></figure>观察到三个子接口正常
查看 R1路由表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101010.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101010.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101010.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101010.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101010.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101010.png 2x" sizes=auto alt=image.png></a></figure>观察到已经有 192.168.1.0/24、192.168.2.0/24、192.168.3.0/24 的路由条目，并且都是路由器 R1 的直连路由，类似于路由器上的直连物理接口
在 PC-1 上测试 192.168.1.254 和 PC-2 之间的连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101023.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101023.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101023.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101023.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101023.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101023.png 2x" sizes=auto alt=image.png></a></figure>通信正常</p><h3 id=五讨论与分析-3 class=headerLink><a href=#%e4%ba%94%e8%ae%a8%e8%ae%ba%e4%b8%8e%e5%88%86%e6%9e%90-3 class=header-mark></a>五、讨论与分析</h3><p><strong>思考</strong>
<strong>VLAN 间的通信可以利用单臂路由的方式实现，那么利用单臂路由实现数据转发会存在哪些潜在问题？该如何解决？</strong></p><ol><li>不同VLAN中可能使用相同的IP地址，导致IP地址冲突。</li></ol><p><strong>解决方法：</strong> 使用不重叠的IP地址段为不同VLAN分配地址，确保每个VLAN内部IP地址唯一。</p><ol start=2><li>VLAN间的广播流量可能导致广播风暴，尤其在大规模网络中。</li></ol><p>**解决方法：**合理划分VLAN，使用VLAN ACLs或者VLAN过滤器，限制广播域，减少广播风险。
<strong>收获</strong>
利用单臂路由实现网络间互通让我学习到如何在网络中实施VLAN划分以实现不同逻辑网络的隔离。了解不同VLAN之间的IP子网划分。同时，学会了如何配置路由器进行单臂路由，包括在接口间配置子接口、VLAN绑定、路由表配置等。深入理解单臂路由的工作原理，了解如何使不同VLAN之间的数据流量经过路由器进行转发。</p><h2 id=实验5利用三层交换机实现-vlan-间路由 class=headerLink><a href=#%e5%ae%9e%e9%aa%8c5%e5%88%a9%e7%94%a8%e4%b8%89%e5%b1%82%e4%ba%a4%e6%8d%a2%e6%9c%ba%e5%ae%9e%e7%8e%b0-vlan-%e9%97%b4%e8%b7%af%e7%94%b1 class=header-mark></a>实验5：利用三层交换机实现 VLAN 间路由</h2><h3 id=一实验目的-4 class=headerLink><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84-4 class=header-mark></a>一、实验目的</h3><ul><li>掌握配置 VLANIF 接口的方法</li><li>理解数据包跨 VLAN 路由的原理</li><li>掌握测试多层交换网络连通性的方法</li></ul><h3 id=二实验环境-4 class=headerLink><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83-4 class=header-mark></a>二、实验环境</h3><p><strong>实验拓扑：</strong><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101112.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101112.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101112.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101112.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101112.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101112.png 2x" sizes=auto alt=image.png></a></figure><strong>实验编址：</strong></p><table><thead><tr><th>设备</th><th>接口</th><th>IP 地址</th><th>子网掩码</th><th>网关</th></tr></thead><tbody><tr><td>PC-1</td><td>Ethernet 0/0/1</td><td>192.168.1.1</td><td>255.255.255.0</td><td>192.168.1.254</td></tr><tr><td>PC-2</td><td>Ethernet 0/0/1</td><td>192.168.1.2</td><td>255.255.255.0</td><td>192.168.1.254</td></tr><tr><td>PC-3</td><td>Ethernet 0/0/1</td><td>192.168.2.1</td><td>255.255.255.0</td><td>192.168.2.254</td></tr><tr><td>S1(S5700)</td><td>VLANIF 10</td><td>192.168.1.254</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>VLANIF 20</td><td>192.168.2.254</td><td>255.255.255.0</td><td>N/A</td></tr></tbody></table><h3 id=三实验内容-4 class=headerLink><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9-4 class=header-mark></a>三、实验内容</h3><p>本实验模拟企业网络场景。公司有两个部门——销售部和客服部，分别规划使用 VLAN 10和VLAN 20。其中销售部下有两台终端PC-1和PC-2,客服部下有一台终端 PC-3。所有终端都通过核心三层交换机S1相连。现需要让该公司所有三台主机都能实 现互相访问，网络管理员将通过配置三层交换机来实现。</p><h3 id=四实验结果-4 class=headerLink><a href=#%e5%9b%9b%e5%ae%9e%e9%aa%8c%e7%bb%93%e6%9e%9c-4 class=header-mark></a>四、实验结果</h3><ol><li>基本配置</li></ol><p>根据实验编址表在 PC 上进行相应的基本 IP 配置，三层交换机 S1 上暂先不做配置
销售部 PC-1 和 PC-2 间通信正常
销售部 PC-1 与 客服部 PC-3 间无法正常通信<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101317.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101317.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101317.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101317.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101317.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101317.png 2x" sizes=auto alt=image.png></a></figure>主机发出数据包前，将会查看数据包中的目的IP 地址，如果目的 IP 地址和本机 IP 地址在同一个网段上，主机会直接发出一个 ARP 请求数据包来请求对方主机的 MAC地址，封装数据包，继而发送该数据包。但如果目的IP地址与本机IP地址不在同一个网段，那么主机也会发出一个 ARP 数据包请求网关的 MAC 地址，收到网关 ARP 回复后, 继而封装数据包后发送。
所以，销售部主机 PC-1在访问<code>**192.168.2.1**</code>这个IP地址时发现这个目的 IP 地址与本机 IP 地址不在同一个IP 地址段上，PC-1 便会发出ARP数据包请求网关<code>**192.168.1.254**</code>的 MAC 地址。但由于交换机没有做任何IP配置，因此没有设备应答该 ARP 请求，导致销售部主机 PC-1 无法正常封装数据包，因此无法与客服部 PC-3 正常通信。</p><ol start=2><li>配置三层交换机实现 VLAN 间通信</li></ol><p>通过在交换机上设置不同的 VLAN 使得主机实现相互隔离。在三层交换机 S1上创 建 VLAN 10 和 VLAN 20，把销售部的主机全部划入 VLAN 10 中，客服部的主机划入 VLAN 20 中，三台 PC 接口配置全为 Access。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101308.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101308.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101308.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101308.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101308.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101308.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101579.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101579.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101579.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101579.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101579.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101579.png 2x" sizes=auto alt=image.png></a></figure>PC-1 和 PC-3 无法联通
现在需要通过 VLAN 间路由来实现通信，在三层交换机上配置 VLANIF 接口。
在 S1 上使用<code>**interface VLANif**</code>命令创建 VLANIF 接口，指定 VLANIF 接口所对应的 VLAN ID 为 10，并进入 VLANIF 接口视图，在接口视图下配置IP地址<code>192.168.1.254/24</code>。再创建对应 VLAN 20的 VLANIF 接口，地址配置为<code>192.168.2.254/24</code>。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101609.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101609.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101609.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101609.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101609.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101609.png 2x" sizes=auto alt=image.png></a></figure>配置完成，查看接口状态<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101588.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101588.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101588.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101588.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101588.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101588.png 2x" sizes=auto alt=image.png></a></figure>观察到两个 VLANIF 接口生效，再次测试 PC-1 和 PC-3 之间连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101885.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101885.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101885.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101885.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101885.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101885.png 2x" sizes=auto alt=image.png></a></figure>通信正常，实现销售部终端与客服部终端之间的通信
在 PC-1 上查看 ARP 信息<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101879.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101879.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101879.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101879.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101879.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242101879.png 2x" sizes=auto alt=image.png></a></figure>可以观察到，PC-1 上 ARP 解析到的地址只有交换机的 VLANIF 10 的地址，而没有对端的地址，PC-1 先将数据包发送至网关，即对应的 VLANIF 10 接口，再由网关转发到对端。</p><h3 id=五讨论与分析-4 class=headerLink><a href=#%e4%ba%94%e8%ae%a8%e8%ae%ba%e4%b8%8e%e5%88%86%e6%9e%90-4 class=header-mark></a>五、讨论与分析</h3><p><strong>思考</strong>
<strong>试问三层交换机与路由器实现三层功能的方式是否相同？为什么？</strong>
不同，三层交换机通常用于内部网络中不同子网间的高性能路由，而路由器主要用于连接不同网络、不同地点之间的数据转发，支持更复杂的路由策略和灵活性。
<strong>收获</strong>
了解如何配置三层交换机来实现不同VLAN的隔离，这有助于提高网络的安全性，确保不同部门或用户群体的数据不会互相干扰。同时，为实现VLAN间路由，需要对IP地址和子网进行合理规划，这帮助我了解如何划分IP地址段以便在不同VLAN间进行通信。</p></div><h2>相关内容</h2><div class=related-container><div class=related-item-container><h2 class=related-title><a href=/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A4/>[计算机网络]实验报告4</a></h2></div><div class=related-item-container><h2 class=related-title><a href=/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A3/>[计算机网络]实验报告3</a></h2></div><div class=related-item-container><h2 class=related-title><a href=/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/>[计算机网络]实验报告1</a></h2></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2024-01-24</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><button title="分享到 Twitter" data-sharer=twitter data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2/ data-title=[计算机网络]实验报告2 data-hashtags=计算机网络><span class="fab fa-twitter fa-fw"></span></button><button title="分享到 Facebook" data-sharer=facebook data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2/ data-hashtag=计算机网络><span class="fab fa-facebook-square fa-fw"></span></button><button title="分享到 WhatsApp" data-sharer=whatsapp data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2/ data-title=[计算机网络]实验报告2 data-web><span class="fab fa-whatsapp fa-fw"></span></button><button title="分享到 Line" data-sharer=line data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2/ data-title=[计算机网络]实验报告2><span data-svg-src=/lib/simple-icons/icons/line.min.svg></span></button><button title="分享到 微博" data-sharer=weibo data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2/ data-title=[计算机网络]实验报告2><span class="fab fa-weibo fa-fw"></span></button><button title="分享到 Myspace" data-sharer=myspace data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2/ data-title=[计算机网络]实验报告2 data-description><span data-svg-src=/lib/simple-icons/icons/myspace.min.svg></span></button><button title="分享到 Blogger" data-sharer=blogger data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2/ data-title=[计算机网络]实验报告2 data-description><span class="fab fa-blogger fa-fw"></span></button><button title="分享到 Evernote" data-sharer=evernote data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2/ data-title=[计算机网络]实验报告2><span class="fab fa-evernote fa-fw"></span></button></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/>计算机网络</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/ class=prev rel=prev title=[计算机网络]实验报告1><i class="fas fa-angle-left fa-fw"></i>[计算机网络]实验报告1</a>
<a href=/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A3/ class=next rel=next title=[计算机网络]实验报告3>[计算机网络]实验报告3<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2023 - 2024</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank rel="noopener noreferrer"></a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class=footer-line></div><div class=footer-line></div></div></footer></div><div id=fixed-buttons><a href=#back-to-top id=back-to-top-button class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><div id=cookieconsent-container></div><div class=assets><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/katex/copy-tex.min.css><noscript><link rel=stylesheet href=/lib/katex/copy-tex.min.css></noscript><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:10},comment:{},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},data:{"desktop-header-typeit":"Nexuzzz0's BLOG","mobile-header-typeit":"Nexuzzz0's BLOG"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{distance:100,findAllMatches:!1,highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!1,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"没有找到结果",snippetLength:50,threshold:.3,useExtendedSearch:!1},sharerjs:!0,table:{sort:!0},typeit:{cursorChar:"|",cursorSpeed:1e3,data:{"desktop-header-typeit":["desktop-header-typeit"],"mobile-header-typeit":["mobile-header-typeit"]},duration:-1,speed:100}}</script><script type=text/javascript src=/lib/tablesort/tablesort.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/lib/typeit/typeit.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js defer></script><script type=text/javascript src=/lib/katex/auto-render.min.js defer></script><script type=text/javascript src=/lib/katex/copy-tex.min.js defer></script><script type=text/javascript src=/lib/katex/mhchem.min.js defer></script><script type=text/javascript src=/js/katex.min.js defer></script><script type=text/javascript src=/lib/cookieconsent/cookieconsent.min.js defer></script><script type=text/javascript src=/js/cookieconsent.min.js defer></script><script type=text/javascript src=/js/theme.min.js defer></script></div></body></html>