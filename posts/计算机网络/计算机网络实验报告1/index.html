<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>[计算机网络]实验报告1 - Nexuzzz0</title><meta name=Description content="Nexuzzz0's BLOG"><meta property="og:title" content="[计算机网络]实验报告1">
<meta property="og:description" content="实验1：交换机的基础配置 一、实验目的交换机的基础配置 理解双工模式和接口速率 掌握更改双工模式的配置 掌握更改接口速率的配置 二、实验环境基础配置拓"><meta property="og:type" content="article"><meta property="og:url" content="https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/"><meta property="og:image" content="https://nexuzzz0.github.io/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-24T20:50:15+08:00"><meta property="article:modified_time" content="2024-01-24T20:50:15+08:00"><meta property="og:site_name" content="Nexuzzz0's BLOG"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://nexuzzz0.github.io/logo.png"><meta name=twitter:title content="[计算机网络]实验报告1"><meta name=twitter:description content="实验1：交换机的基础配置 一、实验目的交换机的基础配置 理解双工模式和接口速率 掌握更改双工模式的配置 掌握更改接口速率的配置 二、实验环境基础配置拓"><meta name=application-name content="Nexuzzz0's BLOG"><meta name=apple-mobile-web-app-title content="Nexuzzz0's BLOG"><meta name=theme-color content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/><link rel=prev href=https://nexuzzz0.github.io/posts/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96pop%E9%93%BE/><link rel=next href=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2/><link rel=stylesheet href=/css/main.css><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/color.css><link rel=stylesheet href=/css/style.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/fontawesome-free/all.min.css><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/animate/animate.min.css><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"[计算机网络]实验报告1","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/nexuzzz0.github.io\/posts\/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C\/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1\/"},"genre":"posts","keywords":"计算机网络","wordcount":4527,"url":"https:\/\/nexuzzz0.github.io\/posts\/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C\/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1\/","datePublished":"2024-01-24T20:50:15+08:00","dateModified":"2024-01-24T20:50:15+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Nexuzzz0"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>function setTheme(e){document.body.setAttribute("theme",e),document.documentElement.style.setProperty("color-scheme",e==="light"?"light":"dark"),window.theme=e,window.isDark=window.theme!=="light"}function saveTheme(e){window.localStorage&&localStorage.setItem("theme",e)}function getMeta(e){const t=document.getElementsByTagName("meta");for(let n=0;n<t.length;n++)if(t[n].getAttribute("name")===e)return t[n];return""}if(window.localStorage&&localStorage.getItem("theme")){let e=localStorage.getItem("theme");e==="light"||e==="dark"||e==="black"?setTheme(e):setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}else"auto"==="light"||"auto"==="dark"||"auto"==="black"?(setTheme("auto"),saveTheme("auto")):(saveTheme("auto"),setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));let metaColors={light:"#f8f8f8",dark:"#252627",black:"#000000"};getMeta("theme-color").content=metaColors[document.body.getAttribute("theme")],window.switchThemeEventSet=new Set</script><div id=back-to-top></div><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=Nexuzzz0><span id=desktop-header-typeit class=typeit></span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><a class=menu-item href=/friend/ title=Friend>友链 </a><a class=menu-item href=/about/ title=About>关于 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw"></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i>
</span></span><a href=javascript:void(0); class="menu-item theme-select" title=切换主题><i class="fas fa-adjust fa-fw"></i>
<select class=color-theme-select id=theme-select-desktop title=切换主题><option value=light>浅色</option><option value=dark>深色</option><option value=black>黑色</option><option value=auto>跟随系统</option></select></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=Nexuzzz0><span id=mobile-header-typeit class=typeit></span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw"></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts/ title>文章</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/categories/ title>分类</a><a class=menu-item href=/friend/ title=Friend>友链</a><a class=menu-item href=/about/ title=About>关于</a><a href=javascript:void(0); class="menu-item theme-select" title=切换主题>
<i class="fas fa-adjust fa-fw"></i>
<select class=color-theme-select id=theme-select-mobile title=切换主题><option value=light>浅色</option><option value=dark>深色</option><option value=black>黑色</option><option value=auto>跟随系统</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class="toc-content always-active" id=toc-content-auto><nav id=TableOfContents><ul><li><a href=#实验1交换机的基础配置>实验1：交换机的基础配置</a><ul><li><a href=#一实验目的>一、实验目的</a></li><li><a href=#二实验环境>二、实验环境</a></li><li><a href=#三实验内容>三、实验内容</a></li><li><a href=#四实验结果>四、实验结果</a></li><li><a href=#五讨论与分析>五、讨论与分析</a></li></ul></li><li><a href=#实验2理解-arp-及-proxy-arp>实验2：理解 ARP 及 Proxy ARP</a><ul><li><a href=#一实验目的-1>一、实验目的</a></li><li><a href=#二实验环境-1>二、实验环境</a></li><li><a href=#三实验内容-1>三、实验内容</a></li><li><a href=#四实验结果-1>四、实验结果</a></li><li><a href=#五讨论与分析-1>五、讨论与分析</a></li></ul></li></ul></nav></div></div><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC","true")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">[计算机网络]实验报告1</h1><div class=post-meta><div class=post-meta-line><span class=post-author><span class="author fas fa-user-circle fa-fw"></span><a href=/ title=Author rel=author class=author>Nexuzzz0</a>
</span>&nbsp;<span class=post-category>收录于 </span>&nbsp;<span class=post-category>类别 <a href=/categories/%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/><i class="far fa-folder fa-fw"></i>实验报告</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=24248-11-241>24248-11-241</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime=24248-11-241>24248-11-241</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 4527 字&nbsp;<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 10 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#实验1交换机的基础配置>实验1：交换机的基础配置</a><ul><li><a href=#一实验目的>一、实验目的</a></li><li><a href=#二实验环境>二、实验环境</a></li><li><a href=#三实验内容>三、实验内容</a></li><li><a href=#四实验结果>四、实验结果</a></li><li><a href=#五讨论与分析>五、讨论与分析</a></li></ul></li><li><a href=#实验2理解-arp-及-proxy-arp>实验2：理解 ARP 及 Proxy ARP</a><ul><li><a href=#一实验目的-1>一、实验目的</a></li><li><a href=#二实验环境-1>二、实验环境</a></li><li><a href=#三实验内容-1>三、实验内容</a></li><li><a href=#四实验结果-1>四、实验结果</a></li><li><a href=#五讨论与分析-1>五、讨论与分析</a></li></ul></li></ul></nav></div></div><div class=content id=content><h2 id=实验1交换机的基础配置 class=headerLink><a href=#%e5%ae%9e%e9%aa%8c1%e4%ba%a4%e6%8d%a2%e6%9c%ba%e7%9a%84%e5%9f%ba%e7%a1%80%e9%85%8d%e7%bd%ae class=header-mark></a>实验1：交换机的基础配置</h2><h3 id=一实验目的 class=headerLink><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84 class=header-mark></a>一、实验目的</h3><p>交换机的基础配置</p><ul><li>理解双工模式和接口速率</li><li>掌握更改双工模式的配置</li><li>掌握更改接口速率的配置</li></ul><h3 id=二实验环境 class=headerLink><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83 class=header-mark></a>二、实验环境</h3><p><strong>基础配置拓扑：</strong><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030048.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030048.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030048.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030048.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030048.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030048.png 2x" sizes=auto alt=image.png></a></figure><strong>实验编址：</strong></p><table><thead><tr><th>设备</th><th>接口</th><th>IP地址</th><th>子网掩码</th><th>默认网关</th></tr></thead><tbody><tr><td>PC-1</td><td>Ethernet 0/0/1</td><td>10.1.1.1</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>PC-2</td><td>Ethernet 0/0/1</td><td>10.1.1.2</td><td>255.255.255.0</td><td>N/A</td></tr></tbody></table><h3 id=三实验内容 class=headerLink><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9 class=header-mark></a>三、实验内容</h3><p>某公司刚成立，新组建网络，购置3台交换机，其中S1和S2为接入层交换机，S3为汇聚层交换机。现在网络管理员需要对3台新交换机进行基本配置，保证交换机间的接口使用全双工模式，并根据需要配置接口速率。</p><h3 id=四实验结果 class=headerLink><a href=#%e5%9b%9b%e5%ae%9e%e9%aa%8c%e7%bb%93%e6%9e%9c class=header-mark></a>四、实验结果</h3><ol><li>基本配置</li></ol><p>根据实验编址表进行相应的基本 IP 配置，并使用 ping 命令检测各直连链路的连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030116.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030116.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030116.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030116.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030116.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030116.png 2x" sizes=auto alt=image.png></a></figure>发现 PC-1 与 PC-2 之间能 ping 通，说明能正常通信</p><ol start=2><li>配置交换机双工模式</li></ol><p>配置接口的双工模式可在<strong>自协商</strong>或者<strong>非自协商</strong>模式下进行。
在自协商模式下，接口的双工模式是和对端接口协商得到的，但协商得到的双工模式可能与实际要求不符。可通过配置双工模式的取值范围来控制协商的结果。例如，互连的两个设备对应的接口都支持全/半双工，经自协商后工作在半双工模式，与实际要求的全双工模式不符，这时就可以执行 <code>**auto duplex full**</code> 命令使接口的可协商双工模式变为全双工模式·默认情况下，以太网接口自协商双工模式范围为接口所支持的双工模式。
在非自协商模式下，可以根据实际需求手动配置接口的双工模式。在S1、S2、S3交换机接口下先通过 <code>**undo negotiation auto**</code> 命令关掉自协商功能，再手工指定双工模式为全双工。
<strong>全双工模式配置：</strong>
<code>**undo info enable**</code>** //信息不显示**
<code>**sys**</code>** //进入系统视图**
<code>**interface GigabitEthnet 0/0/1**</code>** //进入接口**
<code>**undo negotiation auto**</code>** //关掉自动协商功能**
<code>**duplex full**</code>** //全双工**
S1 配置<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030081.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030081.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030081.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030081.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030081.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030081.png 2x" sizes=auto alt=image.png></a></figure>S2 配置<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030084.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030084.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030084.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030084.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030084.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030084.png 2x" sizes=auto alt=image.png></a></figure>S3 配置<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030102.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030102.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030102.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030102.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030102.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030102.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030098.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030098.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030098.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030098.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030098.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030098.png 2x" sizes=auto alt=image.png></a></figure></p><ol start=3><li>配置接口速率</li></ol><p>在自协商模式下，以太网接口的速率是和对端接口协商得到的。如果协商的速率与实际要求不符，可通过配置速率的取值范围来控制协商的结果。例如，互连的两个设备对应的接口经自协商后的速率为 <strong>10Mbit/s</strong>，与实际要求的 <strong>100Mbit/s</strong> 以不符，可通过执行<code>**auto speed 100**</code>命令配置使得接口可协商的速率为 <strong>10Mbit/s</strong> 。默认情况下，以太网接口自协商速率范围为接口支持的所有速率。
在非自协商模式下，需手动配置接口速率，避免发生无法正常通信的情况。
默认情况下，以太网接口的速率为接口支持的最大速率。
根据网络需要调整接口速率、由于网络用户较少，配置 GE 接口速率为 <strong>100Mbit/s</strong> ，配置 Ethernet 接口速率为 <strong>10Mbit/s</strong>。
在3台交换机接口下配置速率。首先关闭接口自协商模式，然后配置以太网接口的速率。
S1 配置<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030657.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030657.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030657.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030657.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030657.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030657.png 2x" sizes=auto alt=image.png></a></figure>S2 配置<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030693.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030693.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030693.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030693.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030693.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030693.png 2x" sizes=auto alt=image.png></a></figure>S3 配置<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030689.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030689.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030689.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030689.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030689.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030689.png 2x" sizes=auto alt=image.png></a></figure></p><h3 id=五讨论与分析 class=headerLink><a href=#%e4%ba%94%e8%ae%a8%e8%ae%ba%e4%b8%8e%e5%88%86%e6%9e%90 class=header-mark></a>五、讨论与分析</h3><p><strong>思考</strong>
<strong>在实际操作中，通常使用自动协商模式还是手动配置模式？为什么？</strong>
在大多数普通网络中，自动协商模式通常更推荐，因为它提供了便捷性、灵活性，并且能够适应不同设备的连接。但在某些特殊需求或对网络稳定性要求极高的环境中，手动配置模式可能更合适。在实际操作中，选择哪种模式通常需要综合考虑网络的需求、设备的兼容性和稳定性。
<strong>收获</strong>
通过这次实验了解了如何配置交换机的全双工模式和接口速率，通过配置合适的双工模式和接口速率，可以最大限度地利用网络带宽，并确保数据在网络中的流动是高效和可靠的。</p><h2 id=实验2理解-arp-及-proxy-arp class=headerLink><a href=#%e5%ae%9e%e9%aa%8c2%e7%90%86%e8%a7%a3-arp-%e5%8f%8a-proxy-arp class=header-mark></a>实验2：理解 ARP 及 Proxy ARP</h2><h3 id=一实验目的-1 class=headerLink><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84-1 class=header-mark></a>一、实验目的</h3><p>理解 ARP 及 Proxy ARP</p><ul><li>理解 ARP 的工作原理</li><li>掌握配置静态 ARP 的方法</li><li>理解 Proxy ARP 的配置</li><li>理解主机之间的通信</li></ul><h3 id=二实验环境-1 class=headerLink><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83-1 class=header-mark></a>二、实验环境</h3><p><strong>实验拓扑：</strong><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030646.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030646.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030646.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030646.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030646.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030646.png 2x" sizes=auto alt=image.png></a></figure><strong>实验编址：</strong></p><table><thead><tr><th>设备</th><th>接口</th><th>IP地址</th><th>子网掩码</th><th>默认网关</th></tr></thead><tbody><tr><td>R1(AR220)</td><td>GE 0/0/1</td><td>10.1.1.254</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td></td><td>GE 0/0/2</td><td>10.1.2.254</td><td>255.255.255.0</td><td>N/A</td></tr><tr><td>PC-1</td><td>Ethernet 0/0/1</td><td>10.1.1.1</td><td>255.255.0.0</td><td>N/A</td></tr><tr><td>PC-2</td><td>Ethernet 0/0/1</td><td>10.1.1.2</td><td>255.255.0.0</td><td>N/A</td></tr><tr><td>PC-3</td><td>Ethernet 0/0/1</td><td>10.1.1.3</td><td>255.255.0.0</td><td>N/A</td></tr></tbody></table><h3 id=三实验内容-1 class=headerLink><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9-1 class=header-mark></a>三、实验内容</h3><p>本实验模拟公司网络场景。路由器RI是公司的出口网关，连接到外网。公司内所有员工使用 10.1.0.0/16 网段，通过交换机连接到网关路由器上。网络管理员通过配置静态ARP防止ARP欺骗攻击，保证通信安全。又由于公司内所有主机都没有配置网关，且分属于不同广播域，造成无法正常通信，网络管理员需要通过在路山器上配置ARP代理功能，实现网络内所有主机的通信。</p><h3 id=四实验结果-1 class=headerLink><a href=#%e5%9b%9b%e5%ae%9e%e9%aa%8c%e7%bb%93%e6%9e%9c-1 class=header-mark></a>四、实验结果</h3><ol><li>基本配置</li></ol><p>根据实验编址表进行相应的基本 IP 配置，并使用 ping 命令检测各链路的连通性
根据实验编址配置 PC 主机的 IP 地址及对应的掩码，掩码长度为 16。配置完成后，在命令行使用<code>arp-a</code>命令查看主机的 ARP 表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030632.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030632.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030632.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030632.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030632.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030632.png 2x" sizes=auto alt=image.png></a></figure>看到 ARP 表项为空，没有任何条目在里面
根据实验编址配置路由器 R1 的接口 IP 地址，掩码长度为 24。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030710.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030710.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030710.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030710.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030710.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030710.png 2x" sizes=auto alt=image.png></a></figure>配置完成后，使用<code>display arp all</code>命令查看 R1 的 ARP 表<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030385.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030385.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030385.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030385.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030385.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030385.png 2x" sizes=auto alt=image.png></a></figure>ARP 表中仅含有 R1 的两个接口 IP 地址及与其对应的 MAC 地址的 ARP 表项，没有其他条目
在 PC-1 上使用<code>ping</code>命令测试网关 R1 和 PC-2 的连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030192.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030192.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030192.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030192.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030192.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030192.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030197.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030197.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030197.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030197.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030197.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030197.png 2x" sizes=auto alt=image.png></a></figure>在 PC-3 上，使用<code>ping</code>命令测试到网关 R1 的连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030182.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030182.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030182.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030182.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030182.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030182.png 2x" sizes=auto alt=image.png></a></figure>可以观察到直连网络连通性正常
当主机和网关之间有数据访问时，如果 ARP 表中没有目标IP地址与目标 MAC 地址的对应表项，ARP协议会被触发，向直连网段发送 ARP 广播请求包，请求目标 IP 地址所对应的 MAC 地址。
下图是 PC-1 发送的 ARP 广播请求，请求目标 IP 10.1.1.254 的 MAC 地址。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030358.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030358.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030358.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030358.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030358.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030358.png 2x" sizes=auto alt=image.png></a></figure>网关收到广播请求后，回应单播的 ARP 响应，里面含有自身往 IP 地址与 MAC 地址的对应关系<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030148.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030148.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030148.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030148.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030148.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030148.png 2x" sizes=auto alt=image.png></a></figure>PC 和 R1 都会从这一对消息中知道对方的 IP 地址与 MAC 地址的对应关系，并将它写到各自的 ARP 表中。在 PC-1上<code>ping</code>网关 10.1.1.254 后，在 PC 上使用<code>arp—a</code>命令查看，在 R1 上使用<code>display arp all</code>命令查看。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030444.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030444.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030444.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030444.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030444.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030444.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030507.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030507.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030507.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030507.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030507.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030507.png 2x" sizes=auto alt=image.png></a></figure>可以观察到，在 PC-1 上生成了网关 IP 地址 10.1.1.254 和与其对应的 MAC 地址的 ARP 表项，在 R1 上生成了PC-1 的 IP 地址 10.1.1.1 和与其对应的 MAC 地址的 ARP 表项。上述出现在 PC 和 R1 里面的条目都是动态生成的。如果一段时间之后没有更新，便会从上述 ARP 表中删除。</p><ol start=2><li>配置静态 ARP</li></ol><p>上述 ARP 协议的工作行为往往被攻击者利用。如果攻击者发送伪造的ARP报文，而且报文里面所通告的 IP 地址和MAC 地址的映射是错误的，则主机或网关会把错误的映射更新到 ARP 表中。当主机要发送数据到指定的目标IP地址时，从 ARP 表里得到了不正确的硬件 MAC 地址，并用之封装数据帧，导致数据帧无法正确发送。
由于公司内主机感染了这种 ARP 病毒，所以主机对网关 R1 进行 ARP 攻击，向网关 R1 通告含错误映射的 ARP 通告，导致网关路由器上使用不正确的动态 ARP 映射条目，造成其他主机无法与网关正常通信。
模拟ARP攻击发生时，网络的通信受到了影响。在网关R1上，使用<code>**arp static 10.1.1.1 5489-98CF-2803**</code> 命令在路由器上静态添加一条关于 PC-1 的错误的 ARP 映射，假定此映射条目是通过一个 ARP 攻击报文所获得的（静态的条目优于动态的条目），所以错误的映射将出现在 ARP 表中。
使用<code>**display arp all**</code>命令查看 ARP 表，并使用** **<code>**ping**</code>命令测试 PC-1 和网关之间的连通性<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030503.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030503.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030503.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030503.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030503.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030503.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030523.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030523.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030523.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030523.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030523.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030523.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030651.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030651.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030651.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030651.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030651.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030651.png 2x" sizes=auto alt=image.png></a></figure>可以观察到，PC-1 与网关间无法通信，因为在路由器 R1 上 ARP 的映射错误，导致路由器无法正确地发送数据包给 PC-1。在 R1 的 GE 0/0/1 接口抓包观察<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030654.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030654.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030654.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030654.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030654.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030654.png 2x" sizes=auto alt=image.png></a></figure>可以观察到，由于配置了静态 ARP ， R1 发往 PC-1 的 ping 包的二层头部，目的 MAC 地址被错误地封装为 <code>5489-98CF-2803</code>。
应对 ARP 欺骗攻击，防止其感染路由器的 ARP 表，可以通过配置静态 ARP 表项来实现。如果 IP 地址和一个 MAC 地址的静态映射已经出现在 ARP 表中，则通过动态 ARP 方式学来的映射则无法进入 ARP 表。所以针对公司网络的现状，网络管理员在 R1 上手工配置三条关于 PC-1、PC-2和PC-3 的正确 ARP 映射。使用<code>arp static</code>命令，配置如下。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030777.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030777.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030777.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030777.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030777.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030777.png 2x" sizes=auto alt=image.png></a></figure>配置完成后，在 PC-1 上测试<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030820.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030820.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030820.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030820.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030820.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030820.png 2x" sizes=auto alt=image.png></a></figure>可以观察到，配置后连通性恢复正常。
公司网络中出现 ARP 攻击的情况是比较常见的，防御的办法之一是在 ARP 表中手工添加 ARP 映射。此种方法的优点是简单易操作，不足之处是网络中每个网络设备都有 ARP 表，要全方位保护网络就要在尽可能多的三层设备上把全网的 ARP 映射手工写入到 ARP 表里，工作量过大，如果更换 IP 或 MAC 后，还需要手工更新 ARP 映射，远没有动态 ARP 协议维护 ARP 表方便。但如果公司网络规模不大或者网络设备不多的情况 下，静态 ARP 方案还是具有一定优势的。</p><ol start=3><li>配置 Proxy ARP</li></ol><p>目前公司的网络被路由器 R1 分割为两个独立的广播域，每个路由器接口对应一个 IP 网络，分别是<code>10.1.1.0/24</code>和<code>10/1/2/0/24</code>，查看 R1 的路由表。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030079.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030079.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030079.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030079.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030079.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030079.png 2x" sizes=auto alt=image.png></a></figure>默认情况下，路由器上的 APR 代理功能是关闭的。
如果 R1 保持 ARP 代理功能关闭的情况，则 PC-2 和 PC-3 之间不能互相通信。在 PC-2 上，使用<code>**ping**</code>访问<code>10.1.2.3</code>，并在 PC-2 的 E 0/0/1 接口抓包来观察<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030825.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030825.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030825.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030825.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030825.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030825.png 2x" sizes=auto alt=image.png></a></figure><figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030902.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030902.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030902.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030902.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030902.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030902.png 2x" sizes=auto alt=image.png></a></figure>可以观察到，PC-2 发出了 ARP广播，却一直没有收到 ARP 响应。原因是 PC-2 和 PC-3 分处在两个广播域内， PC-2 发的ARP请求无法跨越中间的路由器，所以 PC-3 收不到 PC-2 的 ARP 请求，PC-2 也无法知晓目标主机PC-3 的硬件 MAC 地址而导致数据封装失败。但 R1 如果开启 ARP 代理之后，看是否能够解决这个问题。配置<code>arp-proxy enable</code>命令在路由器的接口上来开启 ARP 代理功能。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030911.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030911.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030911.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030911.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030911.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030911.png 2x" sizes=auto alt=image.png></a></figure>启用 ARP 代理之后，同样的测试，在 PC-2 上访问 PC-3 并在 PC-2 的 E 0/0/1 接口抓包观察<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030064.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030064.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030064.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030064.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030064.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030064.png 2x" sizes=auto alt=image.png></a></figure>可以观察到，PC-2 发出了 ARP 请求并收到了 ARP 响应，但响应中<code>10.1.2.3</code>所对应 的硬件 MAC 地址并非是PC-3 的 MAC 地址，而是网关 R1 的 GE 0/0/1 接口 MAC 地址。
在PC-2上查看ARP表。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030241.png title=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030241.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030241.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030241.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030241.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030241.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030241.png 2x" sizes=auto alt=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030241.png></a></figure>开启ARP代理后，PC-2 访问 PC-3 的工作过程如下。
R1的 接口 GE 0/0/1 开启了 ARP 代理后，收到 PC-2 的 ARP 广播请求报文后，R1 根据 ARP 请求中的目标IP地址<code>10.1.2.3</code>查看自身的路由表中是否有对应的目标网络， R1 的 GE 0/0/2 接口就是<code>10.1.2.0/24</code>网络，所以，R1 直接把自身的 GE 0/0/1 接口的 MAC 地址通过 ARP 响应返回给 PC-2, PC-2 接收到此 ARP 响应后横用该 MAC 作为目标硬件 地址发送报文给 R1, R1收到后再把报文转发给 PC-3。
同理，PC-3 要能访问R1连接的其他广播域的 PC,也需要在 R1 的 GE 0/0/2 接口上开启 ARP 代理功能。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030088.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030088.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030088.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030088.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030088.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030088.png 2x" sizes=auto alt=image.png></a></figure>配置完成后，测试PC-3与PC-1间的连通性。<figure><a class=lightgallery href=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030237.png title=image.png data-thumbnail=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030237.png><img loading=lazy src=https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030237.png srcset="https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030237.png, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030237.png 1.5x, https://nexuzzz0-picture.oss-cn-hangzhou.aliyuncs.com/202401242030237.png 2x" sizes=auto alt=image.png></a></figure>可以观察到，通信正常。
如果IP网络过大，广播对网络的影响也相应增大.在不改变网络主机配置的情况 下，由管理员在网络中透明地插入一台路由器，靠路由器分割出多个广播域，降低了 广播对网络的影响。在当前的IP网络中，此种做法并不多见。其缺点是主机间的通信会因为引入额外的路由器而延迟增大，并存在着瓶颈问题，所以一般只作为临时解决方案使用。</p><h3 id=五讨论与分析-1 class=headerLink><a href=#%e4%ba%94%e8%ae%a8%e8%ae%ba%e4%b8%8e%e5%88%86%e6%9e%90-1 class=header-mark></a>五、讨论与分析</h3><p><strong>思考</strong>
<strong>在ARP代理开启的情况下，如果在PC-2上，</strong><code>**ping 10.1.2.4**</code>** (**<code>**10.1.2.4**</code><strong>主机不存在)，icmp echo报文是在 PC-2 还是 R1 路由器丢掉的？为什么？</strong>
在ARP代理（ARP Proxy）开启的情况下，当PC-2尝试ping不存在的主机<code>10.1.2.4</code>时，icmp echo请求会被R1路由器丢弃。
因为ARP代理是一种机制，它允许一个设备（通常是路由器）代表另一个设备响应ARP请求。在这种情况下，如果PC-2尝试<code>ping 10.1.2.4</code>，它会发送一个ARP请求，询问<code>10.1.2.4</code>的MAC地址。由于<code>10.1.2.4</code>不存在，ARP请求将被R1路由器代理，R1将尝试回应ARP请求。但是R1不知道<code>10.1.2.4</code>不存在（因为它不在它的路由表中），所以R1将不会能够为<code>10.1.2.4</code>提供有效的MAC地址。在这种情况下，R1会丢弃PC-2发送的icmp echo请求，因为它无法为目标IP地址提供正确的下一跳。所以，icmp echo请求在R1路由器上被丢弃，因为R1是ARP代理，代表不存在的<code>10.1.2.4</code>尝试响应ARP请求，但无法提供有效的MAC地址。
<strong>收获</strong>
了解ARP的重要性和原理，以及它在网络通信中的作用，让我知道ARP协议是理解网络通信的基础。了解设备如何通过IP地址查找MAC地址，有助于深入了解网络通信的流程。
同时了解ARP欺骗是一种网络攻击方式，攻击者伪装成网络上的合法设备，通过篡改ARP表来进行中间人攻击。理解ARP欺骗有助于实施网络安全措施，如使用静态ARP表项或ARP检测工具来防范此类攻击。</p></div><h2>相关内容</h2><div class=related-container><div class=related-item-container><h2 class=related-title><a href=/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A4/>[计算机网络]实验报告4</a></h2></div><div class=related-item-container><h2 class=related-title><a href=/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A3/>[计算机网络]实验报告3</a></h2></div><div class=related-item-container><h2 class=related-title><a href=/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2/>[计算机网络]实验报告2</a></h2></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 24248-11-241</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><button title="分享到 Twitter" data-sharer=twitter data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/ data-title=[计算机网络]实验报告1 data-hashtags=计算机网络><span class="fab fa-twitter fa-fw"></span></button><button title="分享到 Facebook" data-sharer=facebook data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/ data-hashtag=计算机网络><span class="fab fa-facebook-square fa-fw"></span></button><button title="分享到 WhatsApp" data-sharer=whatsapp data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/ data-title=[计算机网络]实验报告1 data-web><span class="fab fa-whatsapp fa-fw"></span></button><button title="分享到 Line" data-sharer=line data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/ data-title=[计算机网络]实验报告1><span data-svg-src=/lib/simple-icons/icons/line.min.svg></span></button><button title="分享到 微博" data-sharer=weibo data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/ data-title=[计算机网络]实验报告1><span class="fab fa-weibo fa-fw"></span></button><button title="分享到 Myspace" data-sharer=myspace data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/ data-title=[计算机网络]实验报告1 data-description><span data-svg-src=/lib/simple-icons/icons/myspace.min.svg></span></button><button title="分享到 Blogger" data-sharer=blogger data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/ data-title=[计算机网络]实验报告1 data-description><span class="fab fa-blogger fa-fw"></span></button><button title="分享到 Evernote" data-sharer=evernote data-url=https://nexuzzz0.github.io/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A1/ data-title=[计算机网络]实验报告1><span class="fab fa-evernote fa-fw"></span></button></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/>计算机网络</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96pop%E9%93%BE/ class=prev rel=prev title=[反序列化]POP链><i class="fas fa-angle-left fa-fw"></i>[反序列化]POP链</a>
<a href=/posts/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A2/ class=next rel=next title=[计算机网络]实验报告2>[计算机网络]实验报告2<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2023 - 2024</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank rel="noopener noreferrer"></a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class=footer-line></div><div class=footer-line></div></div></footer></div><div id=fixed-buttons><a href=#back-to-top id=back-to-top-button class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><div class=assets><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/katex/copy-tex.min.css><noscript><link rel=stylesheet href=/lib/katex/copy-tex.min.css></noscript><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:10},comment:{},data:{"desktop-header-typeit":"Nexuzzz0's BLOG","mobile-header-typeit":"Nexuzzz0's BLOG"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{distance:100,findAllMatches:!1,highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!1,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"没有找到结果",snippetLength:50,threshold:.3,useExtendedSearch:!1},sharerjs:!0,table:{sort:!0},typeit:{cursorChar:"|",cursorSpeed:1e3,data:{"desktop-header-typeit":["desktop-header-typeit"],"mobile-header-typeit":["mobile-header-typeit"]},duration:-1,speed:100}}</script><script type=text/javascript src=/lib/tablesort/tablesort.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/lib/typeit/typeit.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js defer></script><script type=text/javascript src=/lib/katex/auto-render.min.js defer></script><script type=text/javascript src=/lib/katex/copy-tex.min.js defer></script><script type=text/javascript src=/lib/katex/mhchem.min.js defer></script><script type=text/javascript src=/js/katex.min.js defer></script><script type=text/javascript src=/js/theme.min.js defer></script></div></body></html>